var aq=Object.create;var wc=Object.defineProperty;var cq=Object.getOwnPropertyDescriptor;var dq=Object.getOwnPropertyNames;var uq=Object.getPrototypeOf,lq=Object.prototype.hasOwnProperty;var z=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var We=(e,t)=>()=>(e&&(t=e(e=0)),t);var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_v=(e,t)=>{for(var r in t)wc(e,r,{get:t[r],enumerable:!0})},yv=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of dq(t))!lq.call(e,i)&&i!==r&&wc(e,i,{get:()=>t[i],enumerable:!(n=cq(t,i))||n.enumerable});return e};var pq=(e,t,r)=>(r=e!=null?aq(uq(e)):{},yv(t||!e||!e.__esModule?wc(r,"default",{value:e,enumerable:!0}):r,e)),S=e=>yv(wc({},"__esModule",{value:!0}),e);var N={};_v(N,{__addDisposableResource:()=>RS,__assign:()=>ld,__asyncDelegator:()=>bS,__asyncGenerator:()=>NS,__asyncValues:()=>xS,__await:()=>ps,__awaiter:()=>yS,__classPrivateFieldGet:()=>OS,__classPrivateFieldIn:()=>IS,__classPrivateFieldSet:()=>PS,__createBinding:()=>fd,__decorate:()=>mS,__disposeResources:()=>qS,__esDecorate:()=>Zq,__exportStar:()=>wS,__extends:()=>pS,__generator:()=>gS,__importDefault:()=>CS,__importStar:()=>TS,__makeTemplateObject:()=>AS,__metadata:()=>_S,__param:()=>hS,__propKey:()=>t1,__read:()=>Ph,__rest:()=>fS,__runInitializers:()=>e1,__setFunctionName:()=>r1,__spread:()=>ES,__spreadArray:()=>SS,__spreadArrays:()=>vS,__values:()=>pd,default:()=>s1});function pS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Oh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function fS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function mS(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function hS(e,t){return function(r,n){t(r,n,e)}}function Zq(e,t,r,n,i,s){function o(X){if(X!==void 0&&typeof X!="function")throw new TypeError("Function expected");return X}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,p=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),f,m=!1,h=r.length-1;h>=0;h--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(X){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(X||null))};var v=(0,r[h])(a==="accessor"?{get:p.get,set:p.set}:p[u],g);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=o(v.get))&&(p.get=f),(f=o(v.set))&&(p.set=f),(f=o(v.init))&&i.unshift(f)}else(f=o(v))&&(a==="field"?i.unshift(f):p[u]=f)}l&&Object.defineProperty(l,n.name,p),m=!0}function e1(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function t1(e){return typeof e=="symbol"?e:"".concat(e)}function r1(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function _S(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function yS(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})}function gS(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(p){return u([l,p])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(p){l=[6,p],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wS(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fd(t,e,r)}function pd(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ph(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function ES(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ph(arguments[t]));return e}function vS(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function SS(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function ps(e){return this instanceof ps?(this.v=e,this):new ps(e)}function NS(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){n[m]&&(i[m]=function(h){return new Promise(function(g,y){s.push([m,h,g,y])>1||a(m,h)})})}function a(m,h){try{u(n[m](h))}catch(g){f(s[0][3],g)}}function u(m){m.value instanceof ps?Promise.resolve(m.value.v).then(l,p):f(s[0][2],m)}function l(m){a("next",m)}function p(m){a("throw",m)}function f(m,h){m(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bS(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:ps(e[i](o)),done:!1}:s?s(o):o}:s}}function xS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof pd=="function"?pd(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function AS(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function TS(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&fd(t,e,r);return n1(t,e),t}function CS(e){return e&&e.__esModule?e:{default:e}}function OS(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function PS(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function IS(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function RS(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function qS(e){function t(n){e.error=e.hasError?new i1(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(s){return t(s),r()})}catch(s){t(s)}}if(e.hasError)throw e.error}return r()}var Oh,ld,fd,n1,i1,s1,b=We(()=>{Oh=function(e,t){return Oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Oh(e,t)};ld=function(){return ld=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ld.apply(this,arguments)};fd=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};n1=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};i1=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};s1={__extends:pS,__assign:ld,__rest:fS,__decorate:mS,__param:hS,__metadata:_S,__awaiter:yS,__generator:gS,__createBinding:fd,__exportStar:wS,__values:pd,__read:Ph,__spread:ES,__spreadArrays:vS,__spreadArray:SS,__await:ps,__asyncGenerator:NS,__asyncDelegator:bS,__asyncValues:xS,__makeTemplateObject:AS,__importStar:TS,__importDefault:CS,__classPrivateFieldGet:OS,__classPrivateFieldSet:PS,__classPrivateFieldIn:IS,__addDisposableResource:RS,__disposeResources:qS}});var MS=d(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.isArnBucketName=at.isDnsCompatibleBucketName=at.S3_HOSTNAME_PATTERN=at.DOT_PATTERN=at.resolveParamsForS3=void 0;var o1=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(0,at.isArnBucketName)(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!(0,at.isDnsCompatibleBucketName)(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e};at.resolveParamsForS3=o1;var a1=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,c1=/(\d+\.){3}\d+/,d1=/\.\./;at.DOT_PATTERN=/\./;at.S3_HOSTNAME_PATTERN=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;var u1=e=>a1.test(e)&&!c1.test(e)&&!d1.test(e);at.isDnsCompatibleBucketName=u1;var l1=e=>{let[t,r,n,i,s,o]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,u=[t,r,n,s,o].filter(Boolean).length===5;if(a&&!u)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!o};at.isArnBucketName=l1});var kS=d(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});var p1=(b(),S(N));p1.__exportStar(MS(),Ih)});var DS=d(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.createConfigValueProvider=void 0;var f1=(e,t,r)=>{let n=async()=>{var i;let s=(i=r[e])!==null&&i!==void 0?i:r[t];return typeof s=="function"?s():s};return e==="endpoint"||t==="endpoint"?async()=>{let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:s,hostname:o,port:a,path:u}=i;return`${s}//${o}${a?":"+a:""}${u}`}}return i}:n};md.createConfigValueProvider=f1});var Rh=d(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.resolveParams=hi.getEndpointFromInstructions=void 0;var m1=kS(),h1=DS(),_1=async(e,t,r,n)=>{let i=await(0,hi.resolveParams)(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)};hi.getEndpointFromInstructions=_1;var y1=async(e,t,r)=>{var n;let i={},s=((n=t?.getEndpointParameterInstructions)===null||n===void 0?void 0:n.call(t))||{};for(let[o,a]of Object.entries(s))switch(a.type){case"staticContextParams":i[o]=a.value;break;case"contextParams":i[o]=e[a.name];break;case"clientContextParams":case"builtInParams":i[o]=await(0,h1.createConfigValueProvider)(a.name,o,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(i,r),String(r.serviceId).toLowerCase()==="s3"&&await(0,m1.resolveParamsForS3)(i),i};hi.resolveParams=y1});var FS=d(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.parseQueryString=void 0;function g1(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in t?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i}return t}hd.parseQueryString=g1});var _i=d(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.parseUrl=void 0;var w1=FS(),E1=e=>{if(typeof e=="string")return(0,Go.parseUrl)(new URL(e));let{hostname:t,pathname:r,port:n,protocol:i,search:s}=e,o;return s&&(o=(0,w1.parseQueryString)(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:i,path:r,query:o}};Go.parseUrl=E1});var qh=d(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.toEndpointV1=void 0;var LS=_i(),v1=e=>typeof e=="object"?"url"in e?(0,LS.parseUrl)(e.url):e:(0,LS.parseUrl)(e);_d.toEndpointV1=v1});var US=d(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var zS=(b(),S(N));zS.__exportStar(Rh(),yd);zS.__exportStar(qh(),yd)});var Mh=d(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.endpointMiddleware=void 0;var S1=Rh(),N1=({config:e,instructions:t})=>(r,n)=>async i=>{var s,o;let a=await(0,S1.getEndpointFromInstructions)(i.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=a,n.authSchemes=(s=a.properties)===null||s===void 0?void 0:s.authSchemes;let u=(o=n.authSchemes)===null||o===void 0?void 0:o[0];return u&&(n.signing_region=u.signingRegion,n.signing_service=u.signingName),r({...i})};gd.endpointMiddleware=N1});var kh=d(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.deserializerMiddleware=void 0;var b1=(e,t)=>(r,n)=>async i=>{let{response:s}=await r(i);try{let o=await t(s,e);return{response:s,output:o}}catch(o){throw Object.defineProperty(o,"$response",{value:s}),o}};wd.deserializerMiddleware=b1});var Dh=d(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.serializerMiddleware=void 0;var x1=(e,t)=>(r,n)=>async i=>{var s;let o=!((s=n.endpointV2)===null||s===void 0)&&s.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(i.input,{...e,endpoint:o});return r({...i,request:a})};Ed.serializerMiddleware=x1});var WS=d(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.getSerdePlugin=sr.serializerMiddlewareOption=sr.deserializerMiddlewareOption=void 0;var A1=kh(),T1=Dh();sr.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};sr.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function C1(e,t,r){return{applyToStack:n=>{n.add((0,A1.deserializerMiddleware)(e,r),sr.deserializerMiddlewareOption),n.add((0,T1.serializerMiddleware)(e,t),sr.serializerMiddlewareOption)}}}sr.getSerdePlugin=C1});var fe=d(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Fh=(b(),S(N));Fh.__exportStar(kh(),Jo);Fh.__exportStar(WS(),Jo);Fh.__exportStar(Dh(),Jo)});var jS=d(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.getEndpointPlugin=yi.endpointMiddlewareOptions=void 0;var O1=fe(),P1=Mh();yi.endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:O1.serializerMiddlewareOption.name};var I1=(e,t)=>({applyToStack:r=>{r.addRelativeTo((0,P1.endpointMiddleware)({config:e,instructions:t}),yi.endpointMiddlewareOptions)}});yi.getEndpointPlugin=I1});var VS=d(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.normalizeProvider=void 0;var R1=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};vd.normalizeProvider=R1});var gi=d(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var q1=(b(),S(N));q1.__exportStar(VS(),Lh)});var BS=d(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.resolveEndpointConfig=void 0;var zh=gi(),M1=qh(),k1=e=>{var t,r,n;let i=(t=e.tls)!==null&&t!==void 0?t:!0,{endpoint:s}=e,o=s!=null?async()=>(0,M1.toEndpointV1)(await(0,zh.normalizeProvider)(s)()):void 0;return{...e,endpoint:o,tls:i,isCustomEndpoint:!!s,useDualstackEndpoint:(0,zh.normalizeProvider)((r=e.useDualstackEndpoint)!==null&&r!==void 0?r:!1),useFipsEndpoint:(0,zh.normalizeProvider)((n=e.useFipsEndpoint)!==null&&n!==void 0?n:!1)}};Sd.resolveEndpointConfig=k1});var HS=d($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0})});var Z=d(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var Qo=(b(),S(N));Qo.__exportStar(US(),wi);Qo.__exportStar(Mh(),wi);Qo.__exportStar(jS(),wi);Qo.__exportStar(BS(),wi);Qo.__exportStar(HS(),wi)});var GS=d(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.NoOpLogger=void 0;var Uh=class{trace(){}debug(){}info(){}warn(){}error(){}};Nd.NoOpLogger=Uh});var KS=d(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.constructStack=void 0;var D1=()=>{let e=[],t=[],r=new Set,n=p=>p.sort((f,m)=>JS[m.step]-JS[f.step]||QS[m.priority||"normal"]-QS[f.priority||"normal"]),i=p=>{let f=!1,m=h=>h.name&&h.name===p?(f=!0,r.delete(p),!1):!0;return e=e.filter(m),t=t.filter(m),f},s=p=>{let f=!1,m=h=>h.middleware===p?(f=!0,h.name&&r.delete(h.name),!1):!0;return e=e.filter(m),t=t.filter(m),f},o=p=>(e.forEach(f=>{p.add(f.middleware,{...f})}),t.forEach(f=>{p.addRelativeTo(f.middleware,{...f})}),p),a=p=>{let f=[];return p.before.forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...a(m))}),f.push(p),p.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?f.push(m):f.push(...a(m))}),f},u=(p=!1)=>{let f=[],m=[],h={};return e.forEach(y=>{let v={...y,before:[],after:[]};v.name&&(h[v.name]=v),f.push(v)}),t.forEach(y=>{let v={...y,before:[],after:[]};v.name&&(h[v.name]=v),m.push(v)}),m.forEach(y=>{if(y.toMiddleware){let v=h[y.toMiddleware];if(v===void 0){if(p)return;throw new Error(`${y.toMiddleware} is not found when adding ${y.name||"anonymous"} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&v.after.push(y),y.relation==="before"&&v.before.push(y)}}),n(f).map(a).reduce((y,v)=>(y.push(...v),y),[])},l={add:(p,f={})=>{let{name:m,override:h}=f,g={step:"initialize",priority:"normal",middleware:p,...f};if(m){if(r.has(m)){if(!h)throw new Error(`Duplicate middleware name '${m}'`);let y=e.findIndex(X=>X.name===m),v=e[y];if(v.step!==g.step||v.priority!==g.priority)throw new Error(`"${m}" middleware with ${v.priority} priority in ${v.step} step cannot be overridden by same-name middleware with ${g.priority} priority in ${g.step} step.`);e.splice(y,1)}r.add(m)}e.push(g)},addRelativeTo:(p,f)=>{let{name:m,override:h}=f,g={middleware:p,...f};if(m){if(r.has(m)){if(!h)throw new Error(`Duplicate middleware name '${m}'`);let y=t.findIndex(X=>X.name===m),v=t[y];if(v.toMiddleware!==g.toMiddleware||v.relation!==g.relation)throw new Error(`"${m}" middleware ${v.relation} "${v.toMiddleware}" middleware cannot be overridden by same-name middleware ${g.relation} "${g.toMiddleware}" middleware.`);t.splice(y,1)}r.add(m)}t.push(g)},clone:()=>o((0,fs.constructStack)()),use:p=>{p.applyToStack(l)},remove:p=>typeof p=="string"?i(p):s(p),removeByTag:p=>{let f=!1,m=h=>{let{tags:g,name:y}=h;return g&&g.includes(p)?(y&&r.delete(y),f=!0,!1):!0};return e=e.filter(m),t=t.filter(m),f},concat:p=>{let f=o((0,fs.constructStack)());return f.use(p),f},applyToStack:o,identify:()=>u(!0).map(p=>p.name+": "+(p.tags||[]).join(",")),resolve:(p,f)=>{for(let m of u().map(h=>h.middleware).reverse())p=m(p,f);return p}};return l};fs.constructStack=D1;var JS={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},QS={high:3,normal:2,low:1}});var jh=d(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});var F1=(b(),S(N));F1.__exportStar(KS(),Wh)});var YS=d(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.Client=void 0;var L1=jh(),Vh=class{constructor(t){this.middlewareStack=(0,L1.constructStack)(),this.config=t}send(t,r,n){let i=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,o=t.resolveMiddleware(this.middlewareStack,this.config,i);if(s)o(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return o(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};bd.Client=Vh});var XS=d(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.Command=void 0;var z1=jh(),Bh=class{constructor(){this.middlewareStack=(0,z1.constructStack)()}};xd.Command=Bh});var ZS=d(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.SENSITIVE_STRING=void 0;Ad.SENSITIVE_STRING="***SensitiveInformation***"});var Hh=d(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.logger=E.strictParseByte=E.strictParseShort=E.strictParseInt32=E.strictParseInt=E.strictParseLong=E.limitedParseFloat32=E.limitedParseFloat=E.handleFloat=E.limitedParseDouble=E.strictParseFloat32=E.strictParseFloat=E.strictParseDouble=E.expectUnion=E.expectString=E.expectObject=E.expectNonNull=E.expectByte=E.expectShort=E.expectInt32=E.expectInt=E.expectLong=E.expectFloat32=E.expectNumber=E.expectBoolean=E.parseBoolean=void 0;var U1=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};E.parseBoolean=U1;var W1=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&E.logger.warn(Td(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&E.logger.warn(Td(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}};E.expectBoolean=W1;var j1=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&E.logger.warn(Td(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}};E.expectNumber=j1;var V1=Math.ceil(2**127*(2-2**-23)),B1=e=>{let t=(0,E.expectNumber)(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>V1)throw new TypeError(`Expected 32-bit float, got ${e}`);return t};E.expectFloat32=B1;var $1=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};E.expectLong=$1;E.expectInt=E.expectLong;var H1=e=>$h(e,32);E.expectInt32=H1;var G1=e=>$h(e,16);E.expectShort=G1;var J1=e=>$h(e,8);E.expectByte=J1;var $h=(e,t)=>{let r=(0,E.expectLong)(e);if(r!==void 0&&Q1(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Q1=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},K1=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e};E.expectNonNull=K1;var Y1=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)};E.expectObject=Y1;var X1=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return E.logger.warn(Td(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};E.expectString=X1;var Z1=e=>{if(e==null)return;let t=(0,E.expectObject)(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t};E.expectUnion=Z1;var eM=e=>typeof e=="string"?(0,E.expectNumber)(ms(e)):(0,E.expectNumber)(e);E.strictParseDouble=eM;E.strictParseFloat=E.strictParseDouble;var tM=e=>typeof e=="string"?(0,E.expectFloat32)(ms(e)):(0,E.expectFloat32)(e);E.strictParseFloat32=tM;var rM=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ms=e=>{let t=e.match(rM);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},nM=e=>typeof e=="string"?eN(e):(0,E.expectNumber)(e);E.limitedParseDouble=nM;E.handleFloat=E.limitedParseDouble;E.limitedParseFloat=E.limitedParseDouble;var iM=e=>typeof e=="string"?eN(e):(0,E.expectFloat32)(e);E.limitedParseFloat32=iM;var eN=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},sM=e=>typeof e=="string"?(0,E.expectLong)(ms(e)):(0,E.expectLong)(e);E.strictParseLong=sM;E.strictParseInt=E.strictParseLong;var oM=e=>typeof e=="string"?(0,E.expectInt32)(ms(e)):(0,E.expectInt32)(e);E.strictParseInt32=oM;var aM=e=>typeof e=="string"?(0,E.expectShort)(ms(e)):(0,E.expectShort)(e);E.strictParseShort=aM;var cM=e=>typeof e=="string"?(0,E.expectByte)(ms(e)):(0,E.expectByte)(e);E.strictParseByte=cM;var Td=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`);E.logger={warn:console.warn}});var tN=d(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.parseEpochTimestamp=Ct.parseRfc7231DateTime=Ct.parseRfc3339DateTimeWithOffset=Ct.parseRfc3339DateTime=Ct.dateToUtcString=void 0;var xn=Hh(),dM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Jh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function uM(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),s=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),u=i<10?`0${i}`:`${i}`,l=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`;return`${dM[n]}, ${u} ${Jh[r]} ${t} ${l}:${p}:${f} GMT`}Ct.dateToUtcString=uM;var lM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),pM=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=lM.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,s,o,a,u,l]=t,p=(0,xn.strictParseShort)(hs(n)),f=or(i,"month",1,12),m=or(s,"day",1,31);return Ko(p,f,m,{hours:o,minutes:a,seconds:u,fractionalMilliseconds:l})};Ct.parseRfc3339DateTime=pM;var fM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),mM=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=fM.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,s,o,a,u,l,p]=t,f=(0,xn.strictParseShort)(hs(n)),m=or(i,"month",1,12),h=or(s,"day",1,31),g=Ko(f,m,h,{hours:o,minutes:a,seconds:u,fractionalMilliseconds:l});return p.toUpperCase()!="Z"&&g.setTime(g.getTime()-TM(p)),g};Ct.parseRfc3339DateTimeWithOffset=mM;var hM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),_M=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),yM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),gM=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=hM.exec(e);if(t){let[r,n,i,s,o,a,u,l]=t;return Ko((0,xn.strictParseShort)(hs(s)),Gh(i),or(n,"day",1,31),{hours:o,minutes:a,seconds:u,fractionalMilliseconds:l})}if(t=_M.exec(e),t){let[r,n,i,s,o,a,u,l]=t;return SM(Ko(EM(s),Gh(i),or(n,"day",1,31),{hours:o,minutes:a,seconds:u,fractionalMilliseconds:l}))}if(t=yM.exec(e),t){let[r,n,i,s,o,a,u,l]=t;return Ko((0,xn.strictParseShort)(hs(l)),Gh(n),or(i.trimLeft(),"day",1,31),{hours:s,minutes:o,seconds:a,fractionalMilliseconds:u})}throw new TypeError("Invalid RFC-7231 date-time value")};Ct.parseRfc7231DateTime=gM;var wM=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=(0,xn.strictParseDouble)(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))};Ct.parseEpochTimestamp=wM;var Ko=(e,t,r,n)=>{let i=t-1;return bM(e,i,r),new Date(Date.UTC(e,i,r,or(n.hours,"hour",0,23),or(n.minutes,"minute",0,59),or(n.seconds,"seconds",0,60),AM(n.fractionalMilliseconds)))},EM=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+(0,xn.strictParseShort)(hs(e));return r<t?r+100:r},vM=50*365*24*60*60*1e3,SM=e=>e.getTime()-new Date().getTime()>vM?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Gh=e=>{let t=Jh.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},NM=[31,28,31,30,31,30,31,31,30,31,30,31],bM=(e,t,r)=>{let n=NM[t];if(t===1&&xM(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Jh[t]} in ${e}: ${r}`)},xM=e=>e%4===0&&(e%100!==0||e%400===0),or=(e,t,r,n)=>{let i=(0,xn.strictParseByte)(hs(e));if(i<r||i>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},AM=e=>e==null?0:(0,xn.strictParseFloat32)("0."+e)*1e3,TM=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),i=Number(e.substring(4,6));return r*(n*60+i)*60*1e3},hs=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Kh=d(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.decorateServiceException=_s.ServiceException=void 0;var Qh=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}};_s.ServiceException=Qh;var CM=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(e[n]==null||e[n]==="")&&(e[n]=i)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};_s.decorateServiceException=CM});var rN=d(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.throwDefaultError=void 0;var OM=Kh(),PM=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let i=IM(e),s=i.httpStatusCode?i.httpStatusCode+"":void 0,o=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:i});throw(0,OM.decorateServiceException)(o,t)};Cd.throwDefaultError=PM;var IM=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!==null&&t!==void 0?t:e.headers["x-amzn-request-id"])!==null&&r!==void 0?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}});var nN=d(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.loadConfigsForDefaultMode=void 0;var RM=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};Od.loadConfigsForDefaultMode=RM});var sN=d(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.emitWarningIfUnsupportedVersion=void 0;var iN=!1,qM=e=>{e&&!iN&&parseInt(e.substring(1,e.indexOf(".")))<14&&(iN=!0)};Pd.emitWarningIfUnsupportedVersion=qM});var Yh=d(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.extendedEncodeURIComponent=void 0;function MM(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}Id.extendedEncodeURIComponent=MM});var oN=d(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.getArrayIfSingleItem=void 0;var kM=e=>Array.isArray(e)?e:[e];Rd.getArrayIfSingleItem=kM});var aN=d(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.getValueFromTextNode=void 0;var DM=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=(0,Yo.getValueFromTextNode)(e[r]));return e};Yo.getValueFromTextNode=DM});var cN=d(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.LazyJsonString=ar.StringWrapper=void 0;var FM=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};ar.StringWrapper=FM;ar.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:ar.StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(ar.StringWrapper,String);var Xh=class e extends ar.StringWrapper{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(t){return t instanceof e?t:t instanceof String||typeof t=="string"?new e(t):new e(JSON.stringify(t))}};ar.LazyJsonString=Xh});var uN=d(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.convertMap=ys.map=void 0;function dN(e,t,r){let n,i,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return i=t,s=r,zM(n,i,s);s=t}for(let o of Object.keys(s)){if(!Array.isArray(s[o])){n[o]=s[o];continue}let[a,u]=s[o];if(typeof u=="function"){let l,p=a===void 0&&(l=u())!=null,f=typeof a=="function"&&!!a(void 0)||typeof a!="function"&&!!a;p?n[o]=l:f&&(n[o]=u())}else{let l=a===void 0&&u!=null,p=typeof a=="function"&&!!a(u)||typeof a!="function"&&!!a;(l||p)&&(n[o]=u)}}return n}ys.map=dN;var LM=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t};ys.convertMap=LM;var zM=(e,t,r)=>dN(e,Object.entries(r).reduce((n,[i,s])=>(Array.isArray(s)?n[i]=s:typeof s=="function"?n[i]=[t,s()]:n[i]=[t,s],n),{}))});var pN=d(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.resolvedPath=void 0;var lN=Yh(),UM=(e,t,r,n,i,s)=>{if(t!=null&&t[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,s?o.split("/").map(a=>(0,lN.extendedEncodeURIComponent)(a)).join("/"):(0,lN.extendedEncodeURIComponent)(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};qd.resolvedPath=UM});var fN=d(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.serializeFloat=void 0;var WM=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}};Md.serializeFloat=WM});var mN=d(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.splitEvery=void 0;function jM(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let i=[],s="";for(let o=0;o<n.length;o++)s===""?s=n[o]:s+=t+n[o],(o+1)%r===0&&(i.push(s),s="");return s!==""&&i.push(s),i}kd.splitEvery=jM});var R=d(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});var Ie=(b(),S(N));Ie.__exportStar(GS(),Se);Ie.__exportStar(YS(),Se);Ie.__exportStar(XS(),Se);Ie.__exportStar(ZS(),Se);Ie.__exportStar(tN(),Se);Ie.__exportStar(rN(),Se);Ie.__exportStar(nN(),Se);Ie.__exportStar(sN(),Se);Ie.__exportStar(Kh(),Se);Ie.__exportStar(Yh(),Se);Ie.__exportStar(oN(),Se);Ie.__exportStar(aN(),Se);Ie.__exportStar(cN(),Se);Ie.__exportStar(uN(),Se);Ie.__exportStar(Hh(),Se);Ie.__exportStar(pN(),Se);Ie.__exportStar(fN(),Se);Ie.__exportStar(mN(),Se)});var Fd=d(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.RDSDataServiceException=void 0;var VM=R(),Zh=class e extends VM.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};Dd.RDSDataServiceException=Zh});var Br=d(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.ExecuteSqlResponseFilterSensitiveLog=_.SqlStatementResultFilterSensitiveLog=_.ResultFrameFilterSensitiveLog=_.ExecuteStatementResponseFilterSensitiveLog=_._RecordFilterSensitiveLog=_.BatchExecuteStatementResponseFilterSensitiveLog=_.BatchExecuteStatementRequestFilterSensitiveLog=_.StructValueFilterSensitiveLog=_.ExecuteStatementRequestFilterSensitiveLog=_.ValueFilterSensitiveLog=_.UpdateResultFilterSensitiveLog=_.SqlParameterFilterSensitiveLog=_.FieldFilterSensitiveLog=_.ArrayValueFilterSensitiveLog=_.RollbackTransactionResponseFilterSensitiveLog=_.RollbackTransactionRequestFilterSensitiveLog=_.ResultSetOptionsFilterSensitiveLog=_.ResultSetMetadataFilterSensitiveLog=_.ExecuteSqlRequestFilterSensitiveLog=_.CommitTransactionResponseFilterSensitiveLog=_.CommitTransactionRequestFilterSensitiveLog=_.ColumnMetadataFilterSensitiveLog=_.BeginTransactionResponseFilterSensitiveLog=_.BeginTransactionRequestFilterSensitiveLog=_.Value=_.Field=_.ArrayValue=_.LongReturnType=_.RecordsFormatType=_.DecimalReturnType=_.NotFoundException=_.StatementTimeoutException=_.ServiceUnavailableError=_.InternalServerErrorException=_.ForbiddenException=_.TypeHint=_.BadRequestException=_.AccessDeniedException=void 0;var Ei=Fd(),e_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};_.AccessDeniedException=e_;var t_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"BadRequestException",$fault:"client",...t}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};_.BadRequestException=t_;var BM;(function(e){e.DATE="DATE",e.DECIMAL="DECIMAL",e.JSON="JSON",e.TIME="TIME",e.TIMESTAMP="TIMESTAMP",e.UUID="UUID"})(BM=_.TypeHint||(_.TypeHint={}));var r_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"ForbiddenException",$fault:"client",...t}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};_.ForbiddenException=r_;var n_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"InternalServerErrorException",$fault:"server",...t}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,e.prototype)}};_.InternalServerErrorException=n_;var i_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"ServiceUnavailableError",$fault:"server",...t}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,e.prototype)}};_.ServiceUnavailableError=i_;var s_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"StatementTimeoutException",$fault:"client",...t}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.dbConnectionId=t.dbConnectionId}};_.StatementTimeoutException=s_;var o_=class e extends Ei.RDSDataServiceException{constructor(t){super({name:"NotFoundException",$fault:"client",...t}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};_.NotFoundException=o_;var $M;(function(e){e.DOUBLE_OR_LONG="DOUBLE_OR_LONG",e.STRING="STRING"})($M=_.DecimalReturnType||(_.DecimalReturnType={}));var HM;(function(e){e.JSON="JSON",e.NONE="NONE"})(HM=_.RecordsFormatType||(_.RecordsFormatType={}));var GM;(function(e){e.LONG="LONG",e.STRING="STRING"})(GM=_.LongReturnType||(_.LongReturnType={}));var JM;(function(e){e.visit=(t,r)=>t.booleanValues!==void 0?r.booleanValues(t.booleanValues):t.longValues!==void 0?r.longValues(t.longValues):t.doubleValues!==void 0?r.doubleValues(t.doubleValues):t.stringValues!==void 0?r.stringValues(t.stringValues):t.arrayValues!==void 0?r.arrayValues(t.arrayValues):r._(t.$unknown[0],t.$unknown[1])})(JM=_.ArrayValue||(_.ArrayValue={}));var QM;(function(e){e.visit=(t,r)=>t.isNull!==void 0?r.isNull(t.isNull):t.booleanValue!==void 0?r.booleanValue(t.booleanValue):t.longValue!==void 0?r.longValue(t.longValue):t.doubleValue!==void 0?r.doubleValue(t.doubleValue):t.stringValue!==void 0?r.stringValue(t.stringValue):t.blobValue!==void 0?r.blobValue(t.blobValue):t.arrayValue!==void 0?r.arrayValue(t.arrayValue):r._(t.$unknown[0],t.$unknown[1])})(QM=_.Field||(_.Field={}));var KM;(function(e){e.visit=(t,r)=>t.isNull!==void 0?r.isNull(t.isNull):t.bitValue!==void 0?r.bitValue(t.bitValue):t.bigIntValue!==void 0?r.bigIntValue(t.bigIntValue):t.intValue!==void 0?r.intValue(t.intValue):t.doubleValue!==void 0?r.doubleValue(t.doubleValue):t.realValue!==void 0?r.realValue(t.realValue):t.stringValue!==void 0?r.stringValue(t.stringValue):t.blobValue!==void 0?r.blobValue(t.blobValue):t.arrayValues!==void 0?r.arrayValues(t.arrayValues):t.structValue!==void 0?r.structValue(t.structValue):r._(t.$unknown[0],t.$unknown[1])})(KM=_.Value||(_.Value={}));var YM=e=>({...e});_.BeginTransactionRequestFilterSensitiveLog=YM;var XM=e=>({...e});_.BeginTransactionResponseFilterSensitiveLog=XM;var ZM=e=>({...e});_.ColumnMetadataFilterSensitiveLog=ZM;var ek=e=>({...e});_.CommitTransactionRequestFilterSensitiveLog=ek;var tk=e=>({...e});_.CommitTransactionResponseFilterSensitiveLog=tk;var rk=e=>({...e});_.ExecuteSqlRequestFilterSensitiveLog=rk;var nk=e=>({...e});_.ResultSetMetadataFilterSensitiveLog=nk;var ik=e=>({...e});_.ResultSetOptionsFilterSensitiveLog=ik;var sk=e=>({...e});_.RollbackTransactionRequestFilterSensitiveLog=sk;var ok=e=>({...e});_.RollbackTransactionResponseFilterSensitiveLog=ok;var ak=e=>{if(e.booleanValues!==void 0)return{booleanValues:e.booleanValues};if(e.longValues!==void 0)return{longValues:e.longValues};if(e.doubleValues!==void 0)return{doubleValues:e.doubleValues};if(e.stringValues!==void 0)return{stringValues:e.stringValues};if(e.arrayValues!==void 0)return{arrayValues:e.arrayValues.map(t=>(0,_.ArrayValueFilterSensitiveLog)(t))};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}};_.ArrayValueFilterSensitiveLog=ak;var ck=e=>{if(e.isNull!==void 0)return{isNull:e.isNull};if(e.booleanValue!==void 0)return{booleanValue:e.booleanValue};if(e.longValue!==void 0)return{longValue:e.longValue};if(e.doubleValue!==void 0)return{doubleValue:e.doubleValue};if(e.stringValue!==void 0)return{stringValue:e.stringValue};if(e.blobValue!==void 0)return{blobValue:e.blobValue};if(e.arrayValue!==void 0)return{arrayValue:(0,_.ArrayValueFilterSensitiveLog)(e.arrayValue)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}};_.FieldFilterSensitiveLog=ck;var dk=e=>({...e,...e.value&&{value:(0,_.FieldFilterSensitiveLog)(e.value)}});_.SqlParameterFilterSensitiveLog=dk;var uk=e=>({...e,...e.generatedFields&&{generatedFields:e.generatedFields.map(t=>(0,_.FieldFilterSensitiveLog)(t))}});_.UpdateResultFilterSensitiveLog=uk;var lk=e=>{if(e.isNull!==void 0)return{isNull:e.isNull};if(e.bitValue!==void 0)return{bitValue:e.bitValue};if(e.bigIntValue!==void 0)return{bigIntValue:e.bigIntValue};if(e.intValue!==void 0)return{intValue:e.intValue};if(e.doubleValue!==void 0)return{doubleValue:e.doubleValue};if(e.realValue!==void 0)return{realValue:e.realValue};if(e.stringValue!==void 0)return{stringValue:e.stringValue};if(e.blobValue!==void 0)return{blobValue:e.blobValue};if(e.arrayValues!==void 0)return{arrayValues:e.arrayValues.map(t=>(0,_.ValueFilterSensitiveLog)(t))};if(e.structValue!==void 0)return{structValue:(0,_.StructValueFilterSensitiveLog)(e.structValue)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}};_.ValueFilterSensitiveLog=lk;var pk=e=>({...e,...e.parameters&&{parameters:e.parameters.map(t=>(0,_.SqlParameterFilterSensitiveLog)(t))}});_.ExecuteStatementRequestFilterSensitiveLog=pk;var fk=e=>({...e,...e.attributes&&{attributes:e.attributes.map(t=>(0,_.ValueFilterSensitiveLog)(t))}});_.StructValueFilterSensitiveLog=fk;var mk=e=>({...e,...e.parameterSets&&{parameterSets:e.parameterSets.map(t=>t.map(r=>(0,_.SqlParameterFilterSensitiveLog)(r)))}});_.BatchExecuteStatementRequestFilterSensitiveLog=mk;var hk=e=>({...e,...e.updateResults&&{updateResults:e.updateResults.map(t=>(0,_.UpdateResultFilterSensitiveLog)(t))}});_.BatchExecuteStatementResponseFilterSensitiveLog=hk;var _k=e=>({...e,...e.values&&{values:e.values.map(t=>(0,_.ValueFilterSensitiveLog)(t))}});_._RecordFilterSensitiveLog=_k;var yk=e=>({...e,...e.records&&{records:e.records.map(t=>t.map(r=>(0,_.FieldFilterSensitiveLog)(r)))},...e.generatedFields&&{generatedFields:e.generatedFields.map(t=>(0,_.FieldFilterSensitiveLog)(t))}});_.ExecuteStatementResponseFilterSensitiveLog=yk;var gk=e=>({...e,...e.records&&{records:e.records.map(t=>(0,_._RecordFilterSensitiveLog)(t))}});_.ResultFrameFilterSensitiveLog=gk;var wk=e=>({...e});_.SqlStatementResultFilterSensitiveLog=wk;var Ek=e=>({...e});_.ExecuteSqlResponseFilterSensitiveLog=Ek});var a_=d(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.FieldPosition=void 0;var vk;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(vk=Xo.FieldPosition||(Xo.FieldPosition={}))});var hN=d(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.Field=void 0;var Sk=a_(),c_=class{constructor({name:t,kind:r=Sk.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}};Ld.Field=c_});var _N=d(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.Fields=void 0;var d_=class{constructor({fields:t=[],encoding:r="utf-8"}){this.entries={},t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name]=t}getField(t){return this.entries[t]}removeField(t){delete this.entries[t]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}};zd.Fields=d_});var gN=d(yN=>{"use strict";Object.defineProperty(yN,"__esModule",{value:!0})});var wN=d(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.HttpRequest=void 0;var u_=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=Nk(t.query)),t}};Ud.HttpRequest=u_;function Nk(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}});var EN=d(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.HttpResponse=void 0;var l_=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};Wd.HttpResponse=l_});var vN=d(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.isValidHostname=void 0;function bk(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}jd.isValidHostname=bk});var Ke=d($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});var vi=(b(),S(N));vi.__exportStar(hN(),$r);vi.__exportStar(a_(),$r);vi.__exportStar(_N(),$r);vi.__exportStar(gN(),$r);vi.__exportStar(wN(),$r);vi.__exportStar(EN(),$r);vi.__exportStar(vN(),$r)});var Ni=d(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.deserializeAws_restJson1RollbackTransactionCommand=ee.deserializeAws_restJson1ExecuteStatementCommand=ee.deserializeAws_restJson1ExecuteSqlCommand=ee.deserializeAws_restJson1CommitTransactionCommand=ee.deserializeAws_restJson1BeginTransactionCommand=ee.deserializeAws_restJson1BatchExecuteStatementCommand=ee.serializeAws_restJson1RollbackTransactionCommand=ee.serializeAws_restJson1ExecuteStatementCommand=ee.serializeAws_restJson1ExecuteSqlCommand=ee.serializeAws_restJson1CommitTransactionCommand=ee.serializeAws_restJson1BeginTransactionCommand=ee.serializeAws_restJson1BatchExecuteStatementCommand=void 0;var gs=Ke(),w=R(),Hr=Br(),ws=Fd(),xk=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/BatchExecute`,u;return u=JSON.stringify({...e.database!=null&&{database:e.database},...e.parameterSets!=null&&{parameterSets:Kk(e.parameterSets,t)},...e.resourceArn!=null&&{resourceArn:e.resourceArn},...e.schema!=null&&{schema:e.schema},...e.secretArn!=null&&{secretArn:e.secretArn},...e.sql!=null&&{sql:e.sql},...e.transactionId!=null&&{transactionId:e.transactionId}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1BatchExecuteStatementCommand=xk;var Ak=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/BeginTransaction`,u;return u=JSON.stringify({...e.database!=null&&{database:e.database},...e.resourceArn!=null&&{resourceArn:e.resourceArn},...e.schema!=null&&{schema:e.schema},...e.secretArn!=null&&{secretArn:e.secretArn}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1BeginTransactionCommand=Ak;var Tk=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/CommitTransaction`,u;return u=JSON.stringify({...e.resourceArn!=null&&{resourceArn:e.resourceArn},...e.secretArn!=null&&{secretArn:e.secretArn},...e.transactionId!=null&&{transactionId:e.transactionId}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1CommitTransactionCommand=Tk;var Ck=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/ExecuteSql`,u;return u=JSON.stringify({...e.awsSecretStoreArn!=null&&{awsSecretStoreArn:e.awsSecretStoreArn},...e.database!=null&&{database:e.database},...e.dbClusterOrInstanceArn!=null&&{dbClusterOrInstanceArn:e.dbClusterOrInstanceArn},...e.schema!=null&&{schema:e.schema},...e.sqlStatements!=null&&{sqlStatements:e.sqlStatements}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1ExecuteSqlCommand=Ck;var Ok=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/Execute`,u;return u=JSON.stringify({...e.continueAfterTimeout!=null&&{continueAfterTimeout:e.continueAfterTimeout},...e.database!=null&&{database:e.database},...e.formatRecordsAs!=null&&{formatRecordsAs:e.formatRecordsAs},...e.includeResultMetadata!=null&&{includeResultMetadata:e.includeResultMetadata},...e.parameters!=null&&{parameters:bN(e.parameters,t)},...e.resourceArn!=null&&{resourceArn:e.resourceArn},...e.resultSetOptions!=null&&{resultSetOptions:Jk(e.resultSetOptions,t)},...e.schema!=null&&{schema:e.schema},...e.secretArn!=null&&{secretArn:e.secretArn},...e.sql!=null&&{sql:e.sql},...e.transactionId!=null&&{transactionId:e.transactionId}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1ExecuteStatementCommand=Ok;var Pk=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/RollbackTransaction`,u;return u=JSON.stringify({...e.resourceArn!=null&&{resourceArn:e.resourceArn},...e.secretArn!=null&&{secretArn:e.secretArn},...e.transactionId!=null&&{transactionId:e.transactionId}}),new gs.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ee.serializeAws_restJson1RollbackTransactionCommand=Pk;var Ik=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Rk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.updateResults!=null&&(r.updateResults=hD(n.updateResults,t)),r};ee.deserializeAws_restJson1BatchExecuteStatementCommand=Ik;var Rk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Zo(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},qk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Mk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.transactionId!=null&&(r.transactionId=(0,w.expectString)(n.transactionId)),r};ee.deserializeAws_restJson1BeginTransactionCommand=qk;var Mk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Zo(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},kk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Dk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.transactionStatus!=null&&(r.transactionStatus=(0,w.expectString)(n.transactionStatus)),r};ee.deserializeAws_restJson1CommitTransactionCommand=kk;var Dk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await SN(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Zo(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},Fk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Lk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.sqlStatementResults!=null&&(r.sqlStatementResults=lD(n.sqlStatementResults,t)),r};ee.deserializeAws_restJson1ExecuteSqlCommand=Fk;var Lk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},zk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Uk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.columnMetadata!=null&&(r.columnMetadata=TN(n.columnMetadata,t)),n.formattedRecords!=null&&(r.formattedRecords=(0,w.expectString)(n.formattedRecords)),n.generatedFields!=null&&(r.generatedFields=p_(n.generatedFields,t)),n.numberOfRecordsUpdated!=null&&(r.numberOfRecordsUpdated=(0,w.expectLong)(n.numberOfRecordsUpdated)),n.records!=null&&(r.records=dD(n.records,t)),r};ee.deserializeAws_restJson1ExecuteStatementCommand=zk;var Uk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Zo(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},Wk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jk(e,t);let r=gt({$metadata:wt(e)}),n=(0,w.expectNonNull)((0,w.expectObject)(await Si(e.body,t)),"body");return n.transactionStatus!=null&&(r.transactionStatus=(0,w.expectString)(n.transactionStatus)),r};ee.deserializeAws_restJson1RollbackTransactionCommand=Wk;var jk=async(e,t)=>{let r={...e,body:await xs(e.body,t)},n=As(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await Es(r,t);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await vs(r,t);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await Ss(r,t);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await Ns(r,t);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await SN(r,t);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await bs(r,t);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Zo(r,t);default:let i=r.body;(0,w.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:ws.RDSDataServiceException,errorCode:n})}},gt=w.map,Es=async(e,t)=>{let r=gt({}),n=e.body;n.message!=null&&(r.message=(0,w.expectString)(n.message));let i=new Hr.AccessDeniedException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},vs=async(e,t)=>{let r=gt({}),n=e.body;n.message!=null&&(r.message=(0,w.expectString)(n.message));let i=new Hr.BadRequestException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},Ss=async(e,t)=>{let r=gt({}),n=e.body;n.message!=null&&(r.message=(0,w.expectString)(n.message));let i=new Hr.ForbiddenException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},Ns=async(e,t)=>{let r=gt({}),n=e.body,i=new Hr.InternalServerErrorException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},SN=async(e,t)=>{let r=gt({}),n=e.body;n.message!=null&&(r.message=(0,w.expectString)(n.message));let i=new Hr.NotFoundException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},bs=async(e,t)=>{let r=gt({}),n=e.body,i=new Hr.ServiceUnavailableError({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},Zo=async(e,t)=>{let r=gt({}),n=e.body;n.dbConnectionId!=null&&(r.dbConnectionId=(0,w.expectLong)(n.dbConnectionId)),n.message!=null&&(r.message=(0,w.expectString)(n.message));let i=new Hr.StatementTimeoutException({$metadata:wt(e),...r});return(0,w.decorateServiceException)(i,e.body)},Vk=(e,t)=>e.filter(r=>r!=null).map(r=>NN(r,t)),NN=(e,t)=>Hr.ArrayValue.visit(e,{arrayValues:r=>({arrayValues:Vk(r,t)}),booleanValues:r=>({booleanValues:Bk(r,t)}),doubleValues:r=>({doubleValues:$k(r,t)}),longValues:r=>({longValues:Gk(r,t)}),stringValues:r=>({stringValues:Yk(r,t)}),_:(r,n)=>({name:n})}),Bk=(e,t)=>e.filter(r=>r!=null).map(r=>r),$k=(e,t)=>e.filter(r=>r!=null).map(r=>(0,w.serializeFloat)(r)),Hk=(e,t)=>Hr.Field.visit(e,{arrayValue:r=>({arrayValue:NN(r,t)}),blobValue:r=>({blobValue:t.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,w.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,n)=>({name:n})}),Gk=(e,t)=>e.filter(r=>r!=null).map(r=>r),Jk=(e,t)=>({...e.decimalReturnType!=null&&{decimalReturnType:e.decimalReturnType},...e.longReturnType!=null&&{longReturnType:e.longReturnType}}),Qk=(e,t)=>({...e.name!=null&&{name:e.name},...e.typeHint!=null&&{typeHint:e.typeHint},...e.value!=null&&{value:Hk(e.value,t)}}),Kk=(e,t)=>e.filter(r=>r!=null).map(r=>bN(r,t)),bN=(e,t)=>e.filter(r=>r!=null).map(r=>Qk(r,t)),Yk=(e,t)=>e.filter(r=>r!=null).map(r=>r),Xk=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:xN((0,w.expectUnion)(n),t)),xN=(e,t)=>e.arrayValues!=null?{arrayValues:Xk(e.arrayValues,t)}:e.booleanValues!=null?{booleanValues:Zk(e.booleanValues,t)}:e.doubleValues!=null?{doubleValues:tD(e.doubleValues,t)}:e.longValues!=null?{longValues:nD(e.longValues,t)}:e.stringValues!=null?{stringValues:pD(e.stringValues,t)}:{$unknown:Object.entries(e)[0]},AN=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:CN((0,w.expectUnion)(n),t)),Zk=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:(0,w.expectBoolean)(n)),eD=(e,t)=>({arrayBaseColumnType:(0,w.expectInt32)(e.arrayBaseColumnType),isAutoIncrement:(0,w.expectBoolean)(e.isAutoIncrement),isCaseSensitive:(0,w.expectBoolean)(e.isCaseSensitive),isCurrency:(0,w.expectBoolean)(e.isCurrency),isSigned:(0,w.expectBoolean)(e.isSigned),label:(0,w.expectString)(e.label),name:(0,w.expectString)(e.name),nullable:(0,w.expectInt32)(e.nullable),precision:(0,w.expectInt32)(e.precision),scale:(0,w.expectInt32)(e.scale),schemaName:(0,w.expectString)(e.schemaName),tableName:(0,w.expectString)(e.tableName),type:(0,w.expectInt32)(e.type),typeName:(0,w.expectString)(e.typeName)}),tD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:(0,w.limitedParseDouble)(n)),rD=(e,t)=>e.arrayValue!=null?{arrayValue:xN((0,w.expectUnion)(e.arrayValue),t)}:e.blobValue!=null?{blobValue:t.base64Decoder(e.blobValue)}:(0,w.expectBoolean)(e.booleanValue)!==void 0?{booleanValue:(0,w.expectBoolean)(e.booleanValue)}:(0,w.limitedParseDouble)(e.doubleValue)!==void 0?{doubleValue:(0,w.limitedParseDouble)(e.doubleValue)}:(0,w.expectBoolean)(e.isNull)!==void 0?{isNull:(0,w.expectBoolean)(e.isNull)}:(0,w.expectLong)(e.longValue)!==void 0?{longValue:(0,w.expectLong)(e.longValue)}:(0,w.expectString)(e.stringValue)!==void 0?{stringValue:(0,w.expectString)(e.stringValue)}:{$unknown:Object.entries(e)[0]},p_=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:rD((0,w.expectUnion)(n),t)),nD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:(0,w.expectLong)(n)),TN=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:eD(n,t)),iD=(e,t)=>({values:e.values!=null?cD(e.values,t):void 0}),sD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:iD(n,t)),oD=(e,t)=>({records:e.records!=null?sD(e.records,t):void 0,resultSetMetadata:e.resultSetMetadata!=null?aD(e.resultSetMetadata,t):void 0}),aD=(e,t)=>({columnCount:(0,w.expectLong)(e.columnCount),columnMetadata:e.columnMetadata!=null?TN(e.columnMetadata,t):void 0}),cD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:CN((0,w.expectUnion)(n),t)),dD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:p_(n,t)),uD=(e,t)=>({numberOfRecordsUpdated:(0,w.expectLong)(e.numberOfRecordsUpdated),resultFrame:e.resultFrame!=null?oD(e.resultFrame,t):void 0}),lD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:uD(n,t)),pD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:(0,w.expectString)(n)),fD=(e,t)=>({attributes:e.attributes!=null?AN(e.attributes,t):void 0}),mD=(e,t)=>({generatedFields:e.generatedFields!=null?p_(e.generatedFields,t):void 0}),hD=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:mD(n,t)),CN=(e,t)=>e.arrayValues!=null?{arrayValues:AN(e.arrayValues,t)}:(0,w.expectLong)(e.bigIntValue)!==void 0?{bigIntValue:(0,w.expectLong)(e.bigIntValue)}:(0,w.expectBoolean)(e.bitValue)!==void 0?{bitValue:(0,w.expectBoolean)(e.bitValue)}:e.blobValue!=null?{blobValue:t.base64Decoder(e.blobValue)}:(0,w.limitedParseDouble)(e.doubleValue)!==void 0?{doubleValue:(0,w.limitedParseDouble)(e.doubleValue)}:(0,w.expectInt32)(e.intValue)!==void 0?{intValue:(0,w.expectInt32)(e.intValue)}:(0,w.expectBoolean)(e.isNull)!==void 0?{isNull:(0,w.expectBoolean)(e.isNull)}:(0,w.limitedParseFloat32)(e.realValue)!==void 0?{realValue:(0,w.limitedParseFloat32)(e.realValue)}:(0,w.expectString)(e.stringValue)!==void 0?{stringValue:(0,w.expectString)(e.stringValue)}:e.structValue!=null?{structValue:fD(e.structValue,t)}:{$unknown:Object.entries(e)[0]},wt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_D=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),yD=(e,t)=>_D(e,t).then(r=>t.utf8Encoder(r)),Si=(e,t)=>yD(e,t).then(r=>r.length?JSON.parse(r):{}),xs=async(e,t)=>{let r=await Si(e,t);return r.message=r.message??r.Message,r},As=(e,t)=>{let r=(s,o)=>Object.keys(s).find(a=>a.toLowerCase()===o.toLowerCase()),n=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var m_=d(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.BatchExecuteStatementCommand=void 0;var gD=Z(),wD=fe(),ED=R(),ON=Br(),PN=Ni(),f_=class e extends ED.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,wD.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,gD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:ON.BatchExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:ON.BatchExecuteStatementResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,PN.serializeAws_restJson1BatchExecuteStatementCommand)(t,r)}deserialize(t,r){return(0,PN.deserializeAws_restJson1BatchExecuteStatementCommand)(t,r)}};Vd.BatchExecuteStatementCommand=f_});var __=d(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.BeginTransactionCommand=void 0;var vD=Z(),SD=fe(),ND=R(),IN=Br(),RN=Ni(),h_=class e extends ND.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,SD.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,vD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:IN.BeginTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:IN.BeginTransactionResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,RN.serializeAws_restJson1BeginTransactionCommand)(t,r)}deserialize(t,r){return(0,RN.deserializeAws_restJson1BeginTransactionCommand)(t,r)}};Bd.BeginTransactionCommand=h_});var g_=d($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.CommitTransactionCommand=void 0;var bD=Z(),xD=fe(),AD=R(),qN=Br(),MN=Ni(),y_=class e extends AD.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,xD.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,bD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:qN.CommitTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:qN.CommitTransactionResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,MN.serializeAws_restJson1CommitTransactionCommand)(t,r)}deserialize(t,r){return(0,MN.deserializeAws_restJson1CommitTransactionCommand)(t,r)}};$d.CommitTransactionCommand=y_});var E_=d(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.ExecuteSqlCommand=void 0;var TD=Z(),CD=fe(),OD=R(),kN=Br(),DN=Ni(),w_=class e extends OD.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,CD.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,TD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:kN.ExecuteSqlRequestFilterSensitiveLog,outputFilterSensitiveLog:kN.ExecuteSqlResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,DN.serializeAws_restJson1ExecuteSqlCommand)(t,r)}deserialize(t,r){return(0,DN.deserializeAws_restJson1ExecuteSqlCommand)(t,r)}};Hd.ExecuteSqlCommand=w_});var S_=d(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.ExecuteStatementCommand=void 0;var PD=Z(),ID=fe(),RD=R(),FN=Br(),LN=Ni(),v_=class e extends RD.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,ID.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,PD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:FN.ExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:FN.ExecuteStatementResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,LN.serializeAws_restJson1ExecuteStatementCommand)(t,r)}deserialize(t,r){return(0,LN.deserializeAws_restJson1ExecuteStatementCommand)(t,r)}};Gd.ExecuteStatementCommand=v_});var b_=d(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.RollbackTransactionCommand=void 0;var qD=Z(),MD=fe(),kD=R(),zN=Br(),UN=Ni(),N_=class e extends kD.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,MD.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,qD.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:zN.RollbackTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:zN.RollbackTransactionResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,UN.serializeAws_restJson1RollbackTransactionCommand)(t,r)}deserialize(t,r){return(0,UN.deserializeAws_restJson1RollbackTransactionCommand)(t,r)}};Jd.RollbackTransactionCommand=N_});var WN=d(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.booleanSelector=bi.SelectorType=void 0;var DD;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(DD=bi.SelectorType||(bi.SelectorType={}));var FD=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};bi.booleanSelector=FD});var A_=d(x_=>{"use strict";Object.defineProperty(x_,"__esModule",{value:!0});var LD=(b(),S(N));LD.__exportStar(WN(),x_)});var jN=d(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Ot.DEFAULT_USE_DUALSTACK_ENDPOINT=Ot.CONFIG_USE_DUALSTACK_ENDPOINT=Ot.ENV_USE_DUALSTACK_ENDPOINT=void 0;var Qd=A_();Ot.ENV_USE_DUALSTACK_ENDPOINT="AWS_USE_DUALSTACK_ENDPOINT";Ot.CONFIG_USE_DUALSTACK_ENDPOINT="use_dualstack_endpoint";Ot.DEFAULT_USE_DUALSTACK_ENDPOINT=!1;Ot.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>(0,Qd.booleanSelector)(e,Ot.ENV_USE_DUALSTACK_ENDPOINT,Qd.SelectorType.ENV),configFileSelector:e=>(0,Qd.booleanSelector)(e,Ot.CONFIG_USE_DUALSTACK_ENDPOINT,Qd.SelectorType.CONFIG),default:!1}});var VN=d(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Pt.DEFAULT_USE_FIPS_ENDPOINT=Pt.CONFIG_USE_FIPS_ENDPOINT=Pt.ENV_USE_FIPS_ENDPOINT=void 0;var Kd=A_();Pt.ENV_USE_FIPS_ENDPOINT="AWS_USE_FIPS_ENDPOINT";Pt.CONFIG_USE_FIPS_ENDPOINT="use_fips_endpoint";Pt.DEFAULT_USE_FIPS_ENDPOINT=!1;Pt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>(0,Kd.booleanSelector)(e,Pt.ENV_USE_FIPS_ENDPOINT,Kd.SelectorType.ENV),configFileSelector:e=>(0,Kd.booleanSelector)(e,Pt.CONFIG_USE_FIPS_ENDPOINT,Kd.SelectorType.CONFIG),default:!1}});var $N=d(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.resolveCustomEndpointsConfig=void 0;var BN=gi(),zD=e=>{var t,r;let{endpoint:n,urlParser:i}=e;return{...e,tls:(t=e.tls)!==null&&t!==void 0?t:!0,endpoint:(0,BN.normalizeProvider)(typeof n=="string"?i(n):n),isCustomEndpoint:!0,useDualstackEndpoint:(0,BN.normalizeProvider)((r=e.useDualstackEndpoint)!==null&&r!==void 0?r:!1)}};Yd.resolveCustomEndpointsConfig=zD});var HN=d(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.getEndpointFromRegion=void 0;var UD=async e=>{var t;let{tls:r=!0}=e,n=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");let s=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:a}=(t=await e.regionInfoProvider(n,{useDualstackEndpoint:s,useFipsEndpoint:o}))!==null&&t!==void 0?t:{};if(!a)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${r?"https:":"http:"}//${a}`)};Xd.getEndpointFromRegion=UD});var JN=d(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.resolveEndpointsConfig=void 0;var GN=gi(),WD=HN(),jD=e=>{var t,r;let n=(0,GN.normalizeProvider)((t=e.useDualstackEndpoint)!==null&&t!==void 0?t:!1),{endpoint:i,useFipsEndpoint:s,urlParser:o}=e;return{...e,tls:(r=e.tls)!==null&&r!==void 0?r:!0,endpoint:i?(0,GN.normalizeProvider)(typeof i=="string"?o(i):i):()=>(0,WD.getEndpointFromRegion)({...e,useDualstackEndpoint:n,useFipsEndpoint:s}),isCustomEndpoint:!!i,useDualstackEndpoint:n}};Zd.resolveEndpointsConfig=jD});var QN=d(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});var eu=(b(),S(N));eu.__exportStar(jN(),Ts);eu.__exportStar(VN(),Ts);eu.__exportStar($N(),Ts);eu.__exportStar(JN(),Ts)});var KN=d(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.NODE_REGION_CONFIG_FILE_OPTIONS=It.NODE_REGION_CONFIG_OPTIONS=It.REGION_INI_NAME=It.REGION_ENV_NAME=void 0;It.REGION_ENV_NAME="AWS_REGION";It.REGION_INI_NAME="region";It.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:e=>e[It.REGION_ENV_NAME],configFileSelector:e=>e[It.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};It.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var T_=d(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.isFipsRegion=void 0;var VD=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));tu.isFipsRegion=VD});var YN=d(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.getRealRegion=void 0;var BD=T_(),$D=e=>(0,BD.isFipsRegion)(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;ru.getRealRegion=$D});var ZN=d(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.resolveRegionConfig=void 0;var XN=YN(),HD=T_(),GD=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return(0,XN.getRealRegion)(t);let n=await t();return(0,XN.getRealRegion)(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return(0,HD.isFipsRegion)(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};nu.resolveRegionConfig=GD});var tb=d(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});var eb=(b(),S(N));eb.__exportStar(KN(),iu);eb.__exportStar(ZN(),iu)});var nb=d(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0})});var sb=d(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0})});var ob=d(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.getHostnameFromVariants=void 0;var JD=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>{var n;return(n=e.find(({tags:i})=>t===i.includes("fips")&&r===i.includes("dualstack")))===null||n===void 0?void 0:n.hostname};su.getHostnameFromVariants=JD});var ab=d(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.getResolvedHostname=void 0;var QD=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0);ou.getResolvedHostname=QD});var cb=d(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.getResolvedPartition=void 0;var KD=(e,{partitionHash:t})=>{var r;return(r=Object.keys(t||{}).find(n=>t[n].regions.includes(e)))!==null&&r!==void 0?r:"aws"};au.getResolvedPartition=KD});var db=d(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.getResolvedSigningRegion=void 0;var YD=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let i=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(i);if(s)return s[0].slice(1,-1)}};cu.getResolvedSigningRegion=YD});var lb=d(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.getRegionInfo=void 0;var ub=ob(),XD=ab(),ZD=cb(),eF=db(),tF=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:i,partitionHash:s})=>{var o,a,u,l,p,f;let m=(0,ZD.getResolvedPartition)(e,{partitionHash:s}),h=e in i?e:(a=(o=s[m])===null||o===void 0?void 0:o.endpoint)!==null&&a!==void 0?a:e,g={useFipsEndpoint:t,useDualstackEndpoint:r},y=(0,ub.getHostnameFromVariants)((u=i[h])===null||u===void 0?void 0:u.variants,g),v=(0,ub.getHostnameFromVariants)((l=s[m])===null||l===void 0?void 0:l.variants,g),X=(0,XD.getResolvedHostname)(h,{regionHostname:y,partitionHostname:v});if(X===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:h,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let Oe=(0,eF.getResolvedSigningRegion)(X,{signingRegion:(p=i[h])===null||p===void 0?void 0:p.signingRegion,regionRegex:s[m].regionRegex,useFipsEndpoint:t});return{partition:m,signingService:n,hostname:X,...Oe&&{signingRegion:Oe},...((f=i[h])===null||f===void 0?void 0:f.signingService)&&{signingService:i[h].signingService}}};du.getRegionInfo=tF});var pb=d(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var C_=(b(),S(N));C_.__exportStar(nb(),ea);C_.__exportStar(sb(),ea);C_.__exportStar(lb(),ea)});var cr=d(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});var O_=(b(),S(N));O_.__exportStar(QN(),ta);O_.__exportStar(tb(),ta);O_.__exportStar(pb(),ta)});var ra=d(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.getContentLengthPlugin=Gr.contentLengthMiddlewareOptions=Gr.contentLengthMiddleware=void 0;var rF=Ke(),fb="content-length";function mb(e){return t=>async r=>{let n=r.request;if(rF.HttpRequest.isInstance(n)){let{body:i,headers:s}=n;if(i&&Object.keys(s).map(o=>o.toLowerCase()).indexOf(fb)===-1)try{let o=e(i);n.headers={...n.headers,[fb]:String(o)}}catch{}}return t({...r,request:n})}}Gr.contentLengthMiddleware=mb;Gr.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var nF=e=>({applyToStack:t=>{t.add(mb(e.bodyLengthChecker),Gr.contentLengthMiddlewareOptions)}});Gr.getContentLengthPlugin=nF});var na=d(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.getHostHeaderPlugin=Rt.hostHeaderMiddlewareOptions=Rt.hostHeaderMiddleware=Rt.resolveHostHeaderConfig=void 0;var iF=Ke();function sF(e){return e}Rt.resolveHostHeaderConfig=sF;var oF=e=>t=>async r=>{if(!iF.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)};Rt.hostHeaderMiddleware=oF;Rt.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var aF=e=>({applyToStack:t=>{t.add((0,Rt.hostHeaderMiddleware)(e),Rt.hostHeaderMiddlewareOptions)}});Rt.getHostHeaderPlugin=aF});var hb=d(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.getLoggerPlugin=dr.loggerMiddlewareOptions=dr.loggerMiddleware=void 0;var cF=()=>(e,t)=>async r=>{let n=await e(r),{clientName:i,commandName:s,logger:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:p,overrideOutputFilterSensitiveLog:f}=l;if(!o)return n;if(typeof o.info=="function"){let{$metadata:m,...h}=n.output;o.info({clientName:i,commandName:s,input:(p??a)(r.input),output:(f??u)(h),metadata:m})}return n};dr.loggerMiddleware=cF;dr.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var dF=e=>({applyToStack:t=>{t.add((0,dr.loggerMiddleware)(),dr.loggerMiddlewareOptions)}});dr.getLoggerPlugin=dF});var ia=d(P_=>{"use strict";Object.defineProperty(P_,"__esModule",{value:!0});var uF=(b(),S(N));uF.__exportStar(hb(),P_)});var sa=d(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.getRecursionDetectionPlugin=ur.addRecursionDetectionMiddlewareOptions=ur.recursionDetectionMiddleware=void 0;var lF=Ke(),_b="X-Amzn-Trace-Id",pF="AWS_LAMBDA_FUNCTION_NAME",fF="_X_AMZN_TRACE_ID",mF=e=>t=>async r=>{let{request:n}=r;if(!lF.HttpRequest.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(_b))return t(r);let i=process.env[pF],s=process.env[fF],o=a=>typeof a=="string"&&a.length>0;return o(i)&&o(s)&&(n.headers[_b]=s),t({...r,request:n})};ur.recursionDetectionMiddleware=mF;ur.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var hF=e=>({applyToStack:t=>{t.add((0,ur.recursionDetectionMiddleware)(e),ur.addRecursionDetectionMiddlewareOptions)}});ur.getRecursionDetectionPlugin=hF});var uu=d(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.DEFAULT_RETRY_MODE=Jr.DEFAULT_MAX_ATTEMPTS=Jr.RETRY_MODES=void 0;var _F;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(_F=Jr.RETRY_MODES||(Jr.RETRY_MODES={}));Jr.DEFAULT_MAX_ATTEMPTS=3;Jr.DEFAULT_RETRY_MODE="STANDARD"});var yb=d(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.NODEJS_TIMEOUT_ERROR_CODES=qt.TRANSIENT_ERROR_STATUS_CODES=qt.TRANSIENT_ERROR_CODES=qt.THROTTLING_ERROR_CODES=qt.CLOCK_SKEW_ERROR_CODES=void 0;qt.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];qt.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];qt.TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];qt.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504];qt.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var aa=d(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.isServerError=Et.isTransientError=Et.isThrottlingError=Et.isClockSkewError=Et.isRetryableByTrait=void 0;var oa=yb(),yF=e=>e.$retryable!==void 0;Et.isRetryableByTrait=yF;var gF=e=>oa.CLOCK_SKEW_ERROR_CODES.includes(e.name);Et.isClockSkewError=gF;var wF=e=>{var t,r;return((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)===429||oa.THROTTLING_ERROR_CODES.includes(e.name)||((r=e.$retryable)===null||r===void 0?void 0:r.throttling)==!0};Et.isThrottlingError=wF;var EF=e=>{var t;return oa.TRANSIENT_ERROR_CODES.includes(e.name)||oa.NODEJS_TIMEOUT_ERROR_CODES.includes(e?.code||"")||oa.TRANSIENT_ERROR_STATUS_CODES.includes(((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)||0)};Et.isTransientError=EF;var vF=e=>{var t;if(((t=e.$metadata)===null||t===void 0?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!(0,Et.isTransientError)(e)}return!1};Et.isServerError=vF});var R_=d(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.DefaultRateLimiter=void 0;var SF=aa(),I_=class{constructor(t){var r,n,i,s,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=t?.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(n=t?.minCapacity)!==null&&n!==void 0?n:1,this.minFillRate=(i=t?.minFillRate)!==null&&i!==void 0?i:.5,this.scaleConstant=(s=t?.scaleConstant)!==null&&s!==void 0?s:.4,this.smooth=(o=t?.smooth)!==null&&o!==void 0?o:.8;let a=this.getCurrentTimeInSeconds();this.lastThrottleTime=a,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),(0,SF.isThrottlingError)(t)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};lu.DefaultRateLimiter=I_});var ca=d(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.REQUEST_HEADER=Ne.INVOCATION_ID_HEADER=Ne.NO_RETRY_INCREMENT=Ne.TIMEOUT_RETRY_COST=Ne.RETRY_COST=Ne.INITIAL_RETRY_TOKENS=Ne.THROTTLING_RETRY_DELAY_BASE=Ne.MAXIMUM_RETRY_DELAY=Ne.DEFAULT_RETRY_DELAY_BASE=void 0;Ne.DEFAULT_RETRY_DELAY_BASE=100;Ne.MAXIMUM_RETRY_DELAY=20*1e3;Ne.THROTTLING_RETRY_DELAY_BASE=500;Ne.INITIAL_RETRY_TOKENS=500;Ne.RETRY_COST=5;Ne.TIMEOUT_RETRY_COST=10;Ne.NO_RETRY_INCREMENT=1;Ne.INVOCATION_ID_HEADER="amz-sdk-invocation-id";Ne.REQUEST_HEADER="amz-sdk-request"});var wb=d(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.getDefaultRetryBackoffStrategy=void 0;var gb=ca(),NF=()=>{let e=gb.DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:n=>Math.floor(Math.min(gb.MAXIMUM_RETRY_DELAY,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};pu.getDefaultRetryBackoffStrategy=NF});var Eb=d(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.getDefaultRetryToken=void 0;var Cs=ca(),bF=wb(),xF=(e,t,r,n)=>{var i,s,o;let a=e,u=(i=n?.retryCost)!==null&&i!==void 0?i:Cs.RETRY_COST,l=(s=n?.timeoutRetryCost)!==null&&s!==void 0?s:Cs.TIMEOUT_RETRY_COST,p=(o=n?.retryBackoffStrategy)!==null&&o!==void 0?o:(0,bF.getDefaultRetryBackoffStrategy)(),f=e,m=Math.min(Cs.MAXIMUM_RETRY_DELAY,t),h,g=r??0,y=Bt=>Bt==="TRANSIENT"?l:u,v=()=>g,X=()=>m,Oe=()=>h,Ee=Bt=>y(Bt)<=f;return{getRetryCount:v,getRetryDelay:X,getLastRetryCost:Oe,hasRetryTokens:Ee,getRetryTokenCount:Bt=>{let Bm=Bt.errorType;if(!Ee(Bm))throw new Error("No retry token available");let $m=y(Bm),sq=Bm==="THROTTLING"?Cs.THROTTLING_RETRY_DELAY_BASE:Cs.DEFAULT_RETRY_DELAY_BASE;p.setDelayBase(sq);let hv=p.computeNextBackoffDelay(g);if(Bt.retryAfterHint){let oq=Bt.retryAfterHint.getTime()-Date.now();m=Math.max(oq||0,hv)}else m=hv;return g++,h=$m,f-=$m,$m},releaseRetryTokens:Bt=>{f+=Bt??Cs.NO_RETRY_INCREMENT,f=Math.min(f,a)}}};fu.getDefaultRetryToken=xF});var k_=d(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.StandardRetryStrategy=void 0;var q_=uu(),vb=ca(),AF=Eb(),M_=class{constructor(t){this.maxAttemptsProvider=t,this.mode=q_.RETRY_MODES.STANDARD,this.retryToken=(0,AF.getDefaultRetryToken)(vb.INITIAL_RETRY_TOKENS,vb.DEFAULT_RETRY_DELAY_BASE),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n))return t.getRetryTokenCount(r),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${q_.DEFAULT_MAX_ATTEMPTS}`),q_.DEFAULT_MAX_ATTEMPTS}}shouldRetry(t,r,n){return t.getRetryCount()<n&&t.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};mu.StandardRetryStrategy=M_});var Sb=d(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.AdaptiveRetryStrategy=void 0;var TF=uu(),CF=R_(),OF=k_(),D_=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=TF.RETRY_MODES.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new CF.DefaultRateLimiter,this.standardRetryStrategy=new OF.StandardRetryStrategy(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};hu.AdaptiveRetryStrategy=D_});var bb=d(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0})});var Mt=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var Os=(b(),S(N));Os.__exportStar(Sb(),An);Os.__exportStar(R_(),An);Os.__exportStar(k_(),An);Os.__exportStar(uu(),An);Os.__exportStar(ca(),An);Os.__exportStar(bb(),An)});import PF from"crypto";function da(){return _u>yu.length-16&&(PF.randomFillSync(yu),_u=0),yu.slice(_u,_u+=16)}var yu,_u,F_=We(()=>{yu=new Uint8Array(256),_u=yu.length});var xb,Ab=We(()=>{xb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function IF(e){return typeof e=="string"&&xb.test(e)}var Tn,ua=We(()=>{Ab();Tn=IF});function RF(e,t=0){let r=(Fe[e[t+0]]+Fe[e[t+1]]+Fe[e[t+2]]+Fe[e[t+3]]+"-"+Fe[e[t+4]]+Fe[e[t+5]]+"-"+Fe[e[t+6]]+Fe[e[t+7]]+"-"+Fe[e[t+8]]+Fe[e[t+9]]+"-"+Fe[e[t+10]]+Fe[e[t+11]]+Fe[e[t+12]]+Fe[e[t+13]]+Fe[e[t+14]]+Fe[e[t+15]]).toLowerCase();if(!Tn(r))throw TypeError("Stringified UUID is invalid");return r}var Fe,Cn,la=We(()=>{ua();Fe=[];for(let e=0;e<256;++e)Fe.push((e+256).toString(16).substr(1));Cn=RF});function qF(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let s=e.node||Tb,o=e.clockseq!==void 0?e.clockseq:L_;if(s==null||o==null){let m=e.random||(e.rng||da)();s==null&&(s=Tb=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),o==null&&(o=L_=(m[6]<<8|m[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:U_+1,l=a-z_+(u-U_)/1e4;if(l<0&&e.clockseq===void 0&&(o=o+1&16383),(l<0||a>z_)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");z_=a,U_=u,L_=o,a+=122192928e5;let p=((a&268435455)*1e4+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=p&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let m=0;m<6;++m)i[n+m]=s[m];return t||Cn(i)}var Tb,L_,z_,U_,Cb,Ob=We(()=>{F_();la();z_=0,U_=0;Cb=qF});function MF(e){if(!Tn(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var gu,W_=We(()=>{ua();gu=MF});function kF(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function wu(e,t,r){function n(i,s,o,a){if(typeof i=="string"&&(i=kF(i)),typeof s=="string"&&(s=gu(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return Cn(u)}try{n.name=e}catch{}return n.DNS=DF,n.URL=FF,n}var DF,FF,j_=We(()=>{la();W_();DF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",FF="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import LF from"crypto";function zF(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),LF.createHash("md5").update(e).digest()}var Pb,Ib=We(()=>{Pb=zF});var UF,Rb,qb=We(()=>{j_();Ib();UF=wu("v3",48,Pb),Rb=UF});function WF(e,t,r){e=e||{};let n=e.random||(e.rng||da)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Cn(n)}var Mb,kb=We(()=>{F_();la();Mb=WF});import jF from"crypto";function VF(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),jF.createHash("sha1").update(e).digest()}var Db,Fb=We(()=>{Db=VF});var BF,Lb,zb=We(()=>{j_();Fb();BF=wu("v5",80,Db),Lb=BF});var Ub,Wb=We(()=>{Ub="00000000-0000-0000-0000-000000000000"});function $F(e){if(!Tn(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var jb,Vb=We(()=>{ua();jb=$F});var V_={};_v(V_,{NIL:()=>Ub,parse:()=>gu,stringify:()=>Cn,v1:()=>Cb,v3:()=>Rb,v4:()=>Mb,v5:()=>Lb,validate:()=>Tn,version:()=>jb});var B_=We(()=>{Ob();qb();kb();zb();Wb();Vb();ua();la();W_()});var Bb=d(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.getDefaultRetryQuota=void 0;var $_=Mt(),HF=(e,t)=>{var r,n,i;let s=e,o=(r=t?.noRetryIncrement)!==null&&r!==void 0?r:$_.NO_RETRY_INCREMENT,a=(n=t?.retryCost)!==null&&n!==void 0?n:$_.RETRY_COST,u=(i=t?.timeoutRetryCost)!==null&&i!==void 0?i:$_.TIMEOUT_RETRY_COST,l=e,p=g=>g.name==="TimeoutError"?u:a,f=g=>p(g)<=l;return Object.freeze({hasRetryTokens:f,retrieveRetryTokens:g=>{if(!f(g))throw new Error("No retry token available");let y=p(g);return l-=y,y},releaseRetryTokens:g=>{l+=g??o,l=Math.min(l,s)}})};Eu.getDefaultRetryQuota=HF});var H_=d(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.defaultDelayDecider=void 0;var GF=Mt(),JF=(e,t)=>Math.floor(Math.min(GF.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e));vu.defaultDelayDecider=JF});var G_=d(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.defaultRetryDecider=void 0;var Su=aa(),QF=e=>e?(0,Su.isRetryableByTrait)(e)||(0,Su.isClockSkewError)(e)||(0,Su.isThrottlingError)(e)||(0,Su.isTransientError)(e):!1;Nu.defaultRetryDecider=QF});var J_=d(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.asSdkError=void 0;var KF=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);bu.asSdkError=KF});var Y_=d(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.StandardRetryStrategy=void 0;var Q_=Ke(),YF=aa(),xi=Mt(),XF=(B_(),S(V_)),ZF=Bb(),eL=H_(),tL=G_(),rL=J_(),K_=class{constructor(t,r){var n,i,s;this.maxAttemptsProvider=t,this.mode=xi.RETRY_MODES.STANDARD,this.retryDecider=(n=r?.retryDecider)!==null&&n!==void 0?n:tL.defaultRetryDecider,this.delayDecider=(i=r?.delayDecider)!==null&&i!==void 0?i:eL.defaultDelayDecider,this.retryQuota=(s=r?.retryQuota)!==null&&s!==void 0?s:(0,ZF.getDefaultRetryQuota)(xi.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=xi.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let i,s=0,o=0,a=await this.getMaxAttempts(),{request:u}=r;for(Q_.HttpRequest.isInstance(u)&&(u.headers[xi.INVOCATION_ID_HEADER]=(0,XF.v4)());;)try{Q_.HttpRequest.isInstance(u)&&(u.headers[xi.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:p}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(i),p.$metadata.attempts=s+1,p.$metadata.totalRetryDelay=o,{response:l,output:p}}catch(l){let p=(0,rL.asSdkError)(l);if(s++,this.shouldRetry(p,s,a)){i=this.retryQuota.retrieveRetryTokens(p);let f=this.delayDecider((0,YF.isThrottlingError)(p)?xi.THROTTLING_RETRY_DELAY_BASE:xi.DEFAULT_RETRY_DELAY_BASE,s),m=nL(p.$response),h=Math.max(m||0,f);o+=h,await new Promise(g=>setTimeout(g,h));continue}throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=s,p.$metadata.totalRetryDelay=o,p}}};xu.StandardRetryStrategy=K_;var nL=e=>{if(!Q_.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3}});var Hb=d(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.AdaptiveRetryStrategy=void 0;var $b=Mt(),iL=Y_(),X_=class extends iL.StandardRetryStrategy{constructor(t,r){let{rateLimiter:n,...i}=r??{};super(t,i),this.rateLimiter=n??new $b.DefaultRateLimiter,this.mode=$b.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};Au.AdaptiveRetryStrategy=X_});var Jb=d(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.NODE_RETRY_MODE_CONFIG_OPTIONS=ye.CONFIG_RETRY_MODE=ye.ENV_RETRY_MODE=ye.resolveRetryConfig=ye.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=ye.CONFIG_MAX_ATTEMPTS=ye.ENV_MAX_ATTEMPTS=void 0;var Gb=gi(),Ps=Mt();ye.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";ye.CONFIG_MAX_ATTEMPTS="max_attempts";ye.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:e=>{let t=e[ye.ENV_MAX_ATTEMPTS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${ye.ENV_MAX_ATTEMPTS} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[ye.CONFIG_MAX_ATTEMPTS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${ye.CONFIG_MAX_ATTEMPTS} mast be a number, got "${t}"`);return r},default:Ps.DEFAULT_MAX_ATTEMPTS};var sL=e=>{var t;let{retryStrategy:r}=e,n=(0,Gb.normalizeProvider)((t=e.maxAttempts)!==null&&t!==void 0?t:Ps.DEFAULT_MAX_ATTEMPTS);return{...e,maxAttempts:n,retryStrategy:async()=>r||(await(0,Gb.normalizeProvider)(e.retryMode)()===Ps.RETRY_MODES.ADAPTIVE?new Ps.AdaptiveRetryStrategy(n):new Ps.StandardRetryStrategy(n))}};ye.resolveRetryConfig=sL;ye.ENV_RETRY_MODE="AWS_RETRY_MODE";ye.CONFIG_RETRY_MODE="retry_mode";ye.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[ye.ENV_RETRY_MODE],configFileSelector:e=>e[ye.CONFIG_RETRY_MODE],default:Ps.DEFAULT_RETRY_MODE}});var Kb=d(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.getOmitRetryHeadersPlugin=lr.omitRetryHeadersMiddlewareOptions=lr.omitRetryHeadersMiddleware=void 0;var oL=Ke(),Qb=Mt(),aL=()=>e=>async t=>{let{request:r}=t;return oL.HttpRequest.isInstance(r)&&(delete r.headers[Qb.INVOCATION_ID_HEADER],delete r.headers[Qb.REQUEST_HEADER]),e(t)};lr.omitRetryHeadersMiddleware=aL;lr.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var cL=e=>({applyToStack:t=>{t.addRelativeTo((0,lr.omitRetryHeadersMiddleware)(),lr.omitRetryHeadersMiddlewareOptions)}});lr.getOmitRetryHeadersPlugin=cL});var Xb=d(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.getRetryAfterHint=vt.getRetryPlugin=vt.retryMiddlewareOptions=vt.retryMiddleware=void 0;var ey=Ke(),Z_=aa(),Yb=Mt(),dL=(B_(),S(V_)),uL=J_(),lL=e=>(t,r)=>async n=>{let i=await e.retryStrategy(),s=await e.maxAttempts();if(pL(i)){i=i;let o=await i.acquireInitialRetryToken(r.partition_id),a=new Error,u=0,l=0,{request:p}=n;for(ey.HttpRequest.isInstance(p)&&(p.headers[Yb.INVOCATION_ID_HEADER]=(0,dL.v4)());;)try{ey.HttpRequest.isInstance(p)&&(p.headers[Yb.REQUEST_HEADER]=`attempt=${u+1}; max=${s}`);let{response:f,output:m}=await t(n);return i.recordSuccess(o),m.$metadata.attempts=u+1,m.$metadata.totalRetryDelay=l,{response:f,output:m}}catch(f){let m=fL(f);a=(0,uL.asSdkError)(f);try{o=await i.refreshRetryTokenForRetry(o,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=l,a}u=o.getRetryCount();let h=o.getRetryDelay();l+=h,await new Promise(g=>setTimeout(g,h))}}else return i=i,i?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(t,n)};vt.retryMiddleware=lL;var pL=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",fL=e=>{let t={errorType:mL(e)},r=(0,vt.getRetryAfterHint)(e.$response);return r&&(t.retryAfterHint=r),t},mL=e=>(0,Z_.isThrottlingError)(e)?"THROTTLING":(0,Z_.isTransientError)(e)?"TRANSIENT":(0,Z_.isServerError)(e)?"SERVER_ERROR":"CLIENT_ERROR";vt.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var hL=e=>({applyToStack:t=>{t.add((0,vt.retryMiddleware)(e),vt.retryMiddlewareOptions)}});vt.getRetryPlugin=hL;var _L=e=>{if(!ey.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};vt.getRetryAfterHint=_L});var Kr=d(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var Ai=(b(),S(N));Ai.__exportStar(Hb(),Qr);Ai.__exportStar(Y_(),Qr);Ai.__exportStar(Jb(),Qr);Ai.__exportStar(H_(),Qr);Ai.__exportStar(Kb(),Qr);Ai.__exportStar(G_(),Qr);Ai.__exportStar(Xb(),Qr)});var pa=d(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ProviderError=void 0;var ty=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};Tu.ProviderError=ty});var Zb=d(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.CredentialsProviderError=void 0;var yL=pa(),ry=class e extends yL.ProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};Cu.CredentialsProviderError=ry});var ex=d(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.TokenProviderError=void 0;var gL=pa(),ny=class e extends gL.ProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};Ou.TokenProviderError=ny});var tx=d(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.chain=void 0;var wL=pa();function EL(...e){return()=>{let t=Promise.reject(new wL.ProviderError("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n?.tryNextLink)return r();throw n});return t}}Pu.chain=EL});var rx=d(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.fromStatic=void 0;var vL=e=>()=>Promise.resolve(e);Iu.fromStatic=vL});var nx=d(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.memoize=void 0;var SL=(e,t,r)=>{let n,i,s,o=!1,a=async()=>{i||(i=e());try{n=await i,s=!0,o=!1}finally{i=void 0}return n};return t===void 0?async u=>((!s||u?.forceRefresh)&&(n=await a()),n):async u=>((!s||u?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))};Ru.memoize=SL});var Q=d(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var Is=(b(),S(N));Is.__exportStar(Zb(),On);Is.__exportStar(pa(),On);Is.__exportStar(ex(),On);Is.__exportStar(tx(),On);Is.__exportStar(rx(),On);Is.__exportStar(nx(),On)});var qu=d(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.toHex=Rs.fromHex=void 0;var ix={},iy={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ix[e]=t,iy[t]=e}function NL(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in iy)t[r/2]=iy[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}Rs.fromHex=NL;function bL(e){let t="";for(let r=0;r<e.byteLength;r++)t+=ix[e[r]];return t}Rs.toHex=bL});var sy=d(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.isArrayBuffer=void 0;var xL=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Mu.isArrayBuffer=xL});var Ms=d(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.fromString=qs.fromArrayBuffer=void 0;var AL=sy(),oy=z("buffer"),TL=(e,t=0,r=e.byteLength-t)=>{if(!(0,AL.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return oy.Buffer.from(e,t,r)};qs.fromArrayBuffer=TL;var CL=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?oy.Buffer.from(e,t):oy.Buffer.from(e)};qs.fromString=CL});var ay=d(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.fromUtf8=void 0;var OL=Ms(),PL=e=>{let t=(0,OL.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};ku.fromUtf8=PL});var sx=d(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.toUint8Array=void 0;var IL=ay(),RL=e=>typeof e=="string"?(0,IL.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);Du.toUint8Array=RL});var ox=d(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.toUtf8=void 0;var qL=Ms(),ML=e=>(0,qL.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8");Fu.toUtf8=ML});var Yr=d(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});var cy=(b(),S(N));cy.__exportStar(ay(),fa);cy.__exportStar(sx(),fa);cy.__exportStar(ox(),fa)});var Ti=d(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.MAX_PRESIGNED_TTL=A.KEY_TYPE_IDENTIFIER=A.MAX_CACHE_SIZE=A.UNSIGNED_PAYLOAD=A.EVENT_ALGORITHM_IDENTIFIER=A.ALGORITHM_IDENTIFIER_V4A=A.ALGORITHM_IDENTIFIER=A.UNSIGNABLE_PATTERNS=A.SEC_HEADER_PATTERN=A.PROXY_HEADER_PATTERN=A.ALWAYS_UNSIGNABLE_HEADERS=A.HOST_HEADER=A.TOKEN_HEADER=A.SHA256_HEADER=A.SIGNATURE_HEADER=A.GENERATED_HEADERS=A.DATE_HEADER=A.AMZ_DATE_HEADER=A.AUTH_HEADER=A.REGION_SET_PARAM=A.TOKEN_QUERY_PARAM=A.SIGNATURE_QUERY_PARAM=A.EXPIRES_QUERY_PARAM=A.SIGNED_HEADERS_QUERY_PARAM=A.AMZ_DATE_QUERY_PARAM=A.CREDENTIAL_QUERY_PARAM=A.ALGORITHM_QUERY_PARAM=void 0;A.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";A.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";A.AMZ_DATE_QUERY_PARAM="X-Amz-Date";A.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";A.EXPIRES_QUERY_PARAM="X-Amz-Expires";A.SIGNATURE_QUERY_PARAM="X-Amz-Signature";A.TOKEN_QUERY_PARAM="X-Amz-Security-Token";A.REGION_SET_PARAM="X-Amz-Region-Set";A.AUTH_HEADER="authorization";A.AMZ_DATE_HEADER=A.AMZ_DATE_QUERY_PARAM.toLowerCase();A.DATE_HEADER="date";A.GENERATED_HEADERS=[A.AUTH_HEADER,A.AMZ_DATE_HEADER,A.DATE_HEADER];A.SIGNATURE_HEADER=A.SIGNATURE_QUERY_PARAM.toLowerCase();A.SHA256_HEADER="x-amz-content-sha256";A.TOKEN_HEADER=A.TOKEN_QUERY_PARAM.toLowerCase();A.HOST_HEADER="host";A.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};A.PROXY_HEADER_PATTERN=/^proxy-/;A.SEC_HEADER_PATTERN=/^sec-/;A.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];A.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";A.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";A.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";A.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";A.MAX_CACHE_SIZE=50;A.KEY_TYPE_IDENTIFIER="aws4_request";A.MAX_PRESIGNED_TTL=60*60*24*7});var uy=d(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.clearCredentialCache=Pn.getSigningKey=Pn.createScope=void 0;var kL=qu(),DL=Yr(),dy=Ti(),ks={},Lu=[],FL=(e,t,r)=>`${e}/${t}/${r}/${dy.KEY_TYPE_IDENTIFIER}`;Pn.createScope=FL;var LL=async(e,t,r,n,i)=>{let s=await ax(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${i}:${(0,kL.toHex)(s)}:${t.sessionToken}`;if(o in ks)return ks[o];for(Lu.push(o);Lu.length>dy.MAX_CACHE_SIZE;)delete ks[Lu.shift()];let a=`AWS4${t.secretAccessKey}`;for(let u of[r,n,i,dy.KEY_TYPE_IDENTIFIER])a=await ax(e,a,u);return ks[o]=a};Pn.getSigningKey=LL;var zL=()=>{Lu.length=0,Object.keys(ks).forEach(e=>{delete ks[e]})};Pn.clearCredentialCache=zL;var ax=(e,t,r)=>{let n=new e(t);return n.update((0,DL.toUint8Array)(r)),n.digest()}});var py=d(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.getCanonicalHeaders=void 0;var ly=Ti(),UL=({headers:e},t,r)=>{let n={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let s=i.toLowerCase();(s in ly.ALWAYS_UNSIGNABLE_HEADERS||t?.has(s)||ly.PROXY_HEADER_PATTERN.test(s)||ly.SEC_HEADER_PATTERN.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[i].trim().replace(/\s+/g," "))}return n};zu.getCanonicalHeaders=UL});var fy=d(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.escapeUri=void 0;var WL=e=>encodeURIComponent(e).replace(/[!'()*]/g,jL);Uu.escapeUri=WL;var jL=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`});var cx=d(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.escapeUriPath=void 0;var VL=fy(),BL=e=>e.split("/").map(VL.escapeUri).join("/");Wu.escapeUriPath=BL});var my=d(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var dx=(b(),S(N));dx.__exportStar(fy(),ju);dx.__exportStar(cx(),ju)});var hy=d(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.getCanonicalQuery=void 0;var Vu=my(),$L=Ti(),HL=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===$L.SIGNATURE_HEADER)continue;t.push(n);let i=e[n];typeof i=="string"?r[n]=`${(0,Vu.escapeUri)(n)}=${(0,Vu.escapeUri)(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).sort().reduce((s,o)=>s.concat([`${(0,Vu.escapeUri)(n)}=${(0,Vu.escapeUri)(o)}`]),[]).join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};Bu.getCanonicalQuery=HL});var _y=d($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.getPayloadHash=void 0;var GL=sy(),JL=qu(),QL=Yr(),ux=Ti(),KL=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===ux.SHA256_HEADER)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,GL.isArrayBuffer)(t)){let n=new r;return n.update((0,QL.toUint8Array)(t)),(0,JL.toHex)(await n.digest())}return ux.UNSIGNED_PAYLOAD};$u.getPayloadHash=KL});var lx=d(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.deleteHeader=In.getHeaderValue=In.hasHeader=void 0;var YL=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};In.hasHeader=YL;var XL=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return t[r]};In.getHeaderValue=XL;var ZL=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))e===r.toLowerCase()&&delete t[r]};In.deleteHeader=ZL});var yy=d(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.cloneQuery=Ci.cloneRequest=void 0;var ez=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?(0,Ci.cloneQuery)(t):void 0});Ci.cloneRequest=ez;var tz=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});Ci.cloneQuery=tz});var gy=d(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.moveHeadersToQuery=void 0;var rz=yy(),nz=(e,t={})=>{var r;let{headers:n,query:i={}}=typeof e.clone=="function"?e.clone():(0,rz.cloneRequest)(e);for(let s of Object.keys(n)){let o=s.toLowerCase();o.slice(0,6)==="x-amz-"&&!(!((r=t.unhoistableHeaders)===null||r===void 0)&&r.has(o))&&(i[s]=n[s],delete n[s])}return{...e,headers:n,query:i}};Hu.moveHeadersToQuery=nz});var wy=d(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.prepareRequest=void 0;var iz=yy(),sz=Ti(),oz=e=>{e=typeof e.clone=="function"?e.clone():(0,iz.cloneRequest)(e);for(let t of Object.keys(e.headers))sz.GENERATED_HEADERS.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};Gu.prepareRequest=oz});var px=d(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.toDate=Oi.iso8601=void 0;var az=e=>(0,Oi.toDate)(e).toISOString().replace(/\.\d{3}Z$/,"Z");Oi.iso8601=az;var cz=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;Oi.toDate=cz});var yx=d(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.SignatureV4=void 0;var Ju=qu(),fx=gi(),Ey=Yr(),Le=Ti(),Qu=uy(),mx=py(),dz=hy(),vy=_y(),uz=lx(),lz=gy(),hx=wy(),pz=px(),Sy=class{constructor({applyChecksum:t,credentials:r,region:n,service:i,sha256:s,uriEscapePath:o=!0}){this.service=i,this.sha256=s,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=(0,fx.normalizeProvider)(n),this.credentialProvider=(0,fx.normalizeProvider)(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:s,unhoistableHeaders:o,signableHeaders:a,signingRegion:u,signingService:l}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let f=u??await this.regionProvider(),{longDate:m,shortDate:h}=Ku(n);if(i>Le.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let g=(0,Qu.createScope)(h,f,l??this.service),y=(0,lz.moveHeadersToQuery)((0,hx.prepareRequest)(t),{unhoistableHeaders:o});p.sessionToken&&(y.query[Le.TOKEN_QUERY_PARAM]=p.sessionToken),y.query[Le.ALGORITHM_QUERY_PARAM]=Le.ALGORITHM_IDENTIFIER,y.query[Le.CREDENTIAL_QUERY_PARAM]=`${p.accessKeyId}/${g}`,y.query[Le.AMZ_DATE_QUERY_PARAM]=m,y.query[Le.EXPIRES_QUERY_PARAM]=i.toString(10);let v=(0,mx.getCanonicalHeaders)(y,s,a);return y.query[Le.SIGNED_HEADERS_QUERY_PARAM]=_x(v),y.query[Le.SIGNATURE_QUERY_PARAM]=await this.getSignature(m,g,this.getSigningKey(p,f,h,l),this.createCanonicalRequest(y,v,await(0,vy.getPayloadHash)(t,this.sha256))),y}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:s,signingService:o}){let a=s??await this.regionProvider(),{shortDate:u,longDate:l}=Ku(n),p=(0,Qu.createScope)(u,a,o??this.service),f=await(0,vy.getPayloadHash)({headers:{},body:r},this.sha256),m=new this.sha256;m.update(t);let h=(0,Ju.toHex)(await m.digest()),g=[Le.EVENT_ALGORITHM_IDENTIFIER,l,p,i,h,f].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:o})}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let o=n??await this.regionProvider(),{shortDate:a}=Ku(r),u=new this.sha256(await this.getSigningKey(s,o,a,i));return u.update((0,Ey.toUint8Array)(t)),(0,Ju.toHex)(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:s,signingService:o}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let u=s??await this.regionProvider(),l=(0,hx.prepareRequest)(t),{longDate:p,shortDate:f}=Ku(r),m=(0,Qu.createScope)(f,u,o??this.service);l.headers[Le.AMZ_DATE_HEADER]=p,a.sessionToken&&(l.headers[Le.TOKEN_HEADER]=a.sessionToken);let h=await(0,vy.getPayloadHash)(l,this.sha256);!(0,uz.hasHeader)(Le.SHA256_HEADER,l.headers)&&this.applyChecksum&&(l.headers[Le.SHA256_HEADER]=h);let g=(0,mx.getCanonicalHeaders)(l,i,n),y=await this.getSignature(p,m,this.getSigningKey(a,u,f,o),this.createCanonicalRequest(l,g,h));return l.headers[Le.AUTH_HEADER]=`${Le.ALGORITHM_IDENTIFIER} Credential=${a.accessKeyId}/${m}, SignedHeaders=${_x(g)}, Signature=${y}`,l}createCanonicalRequest(t,r,n){let i=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${(0,dz.getCanonicalQuery)(t)}
${i.map(s=>`${s}:${r[s]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(t,r,n){let i=new this.sha256;i.update((0,Ey.toUint8Array)(n));let s=await i.digest();return`${Le.ALGORITHM_IDENTIFIER}
${t}
${r}
${(0,Ju.toHex)(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,i){let s=await this.createStringToSign(t,r,i),o=new this.sha256(await n);return o.update((0,Ey.toUint8Array)(s)),(0,Ju.toHex)(await o.digest())}getSigningKey(t,r,n,i){return(0,Qu.getSigningKey)(this.sha256,t,n,r,i||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};Yu.SignatureV4=Sy;var Ku=e=>{let t=(0,pz.iso8601)(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},_x=e=>Object.keys(e).sort().join(";")});var wx=d(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.prepareRequest=ct.moveHeadersToQuery=ct.getPayloadHash=ct.getCanonicalQuery=ct.getCanonicalHeaders=void 0;var gx=(b(),S(N));gx.__exportStar(yx(),ct);var fz=py();Object.defineProperty(ct,"getCanonicalHeaders",{enumerable:!0,get:function(){return fz.getCanonicalHeaders}});var mz=hy();Object.defineProperty(ct,"getCanonicalQuery",{enumerable:!0,get:function(){return mz.getCanonicalQuery}});var hz=_y();Object.defineProperty(ct,"getPayloadHash",{enumerable:!0,get:function(){return hz.getPayloadHash}});var _z=gy();Object.defineProperty(ct,"moveHeadersToQuery",{enumerable:!0,get:function(){return _z.moveHeadersToQuery}});var yz=wy();Object.defineProperty(ct,"prepareRequest",{enumerable:!0,get:function(){return yz.prepareRequest}});gx.__exportStar(uy(),ct)});var vx=d(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.resolveSigV4AuthConfig=Fs.resolveAwsAuthConfig=void 0;var gz=Q(),Ny=wx(),Ds=gi(),wz=3e5,Ez=e=>{let t=e.credentials?Ex(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:i}=e,s;return e.signer?s=(0,Ds.normalizeProvider)(e.signer):e.regionInfoProvider?s=()=>(0,Ds.normalizeProvider)(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,a])=>{let{signingRegion:u,signingService:l}=o;e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||l||e.serviceId;let p={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},f=e.signerConstructor||Ny.SignatureV4;return new f(p)}):s=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,Ds.normalizeProvider)(e.region)(),properties:{}},o);let a=o.signingRegion,u=o.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||u||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},p=e.signerConstructor||Ny.SignatureV4;return new p(l)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};Fs.resolveAwsAuthConfig=Ez;var vz=e=>{let t=e.credentials?Ex(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:i}=e,s;return e.signer?s=(0,Ds.normalizeProvider)(e.signer):s=(0,Ds.normalizeProvider)(new Ny.SignatureV4({credentials:t,region:e.region,service:e.signingName,sha256:i,uriEscapePath:r})),{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};Fs.resolveSigV4AuthConfig=vz;var Ex=e=>typeof e=="function"?(0,gz.memoize)(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<wz,t=>t.expiration!==void 0):(0,Ds.normalizeProvider)(e)});var by=d(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.getSkewCorrectedDate=void 0;var Sz=e=>new Date(Date.now()+e);Xu.getSkewCorrectedDate=Sz});var Sx=d(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.isClockSkewed=void 0;var Nz=by(),bz=(e,t)=>Math.abs((0,Nz.getSkewCorrectedDate)(t).getTime()-e)>=3e5;Zu.isClockSkewed=bz});var Nx=d(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.getUpdatedSystemClockOffset=void 0;var xz=Sx(),Az=(e,t)=>{let r=Date.parse(e);return(0,xz.isClockSkewed)(r,t)?r-Date.now():t};el.getUpdatedSystemClockOffset=Az});var Tx=d(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.getSigV4AuthPlugin=St.getAwsAuthPlugin=St.awsAuthMiddlewareOptions=St.awsAuthMiddleware=void 0;var Ax=Ke(),Tz=by(),bx=Nx(),Cz=e=>(t,r)=>async function(n){var i,s,o,a;if(!Ax.HttpRequest.isInstance(n.request))return t(n);let u=(o=(s=(i=r.endpointV2)===null||i===void 0?void 0:i.properties)===null||s===void 0?void 0:s.authSchemes)===null||o===void 0?void 0:o[0],l=u?.name==="sigv4a"?(a=u?.signingRegionSet)===null||a===void 0?void 0:a.join(","):void 0,p=await e.signer(u),f=await t({...n,request:await p.sign(n.request,{signingDate:(0,Tz.getSkewCorrectedDate)(e.systemClockOffset),signingRegion:l||r.signing_region,signingService:r.signing_service})}).catch(h=>{var g;let y=(g=h.ServerTime)!==null&&g!==void 0?g:xx(h.$response);throw y&&(e.systemClockOffset=(0,bx.getUpdatedSystemClockOffset)(y,e.systemClockOffset)),h}),m=xx(f.response);return m&&(e.systemClockOffset=(0,bx.getUpdatedSystemClockOffset)(m,e.systemClockOffset)),f};St.awsAuthMiddleware=Cz;var xx=e=>{var t,r,n;return Ax.HttpResponse.isInstance(e)?(r=(t=e.headers)===null||t===void 0?void 0:t.date)!==null&&r!==void 0?r:(n=e.headers)===null||n===void 0?void 0:n.Date:void 0};St.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var Oz=e=>({applyToStack:t=>{t.addRelativeTo((0,St.awsAuthMiddleware)(e),St.awsAuthMiddlewareOptions)}});St.getAwsAuthPlugin=Oz;St.getSigV4AuthPlugin=St.getAwsAuthPlugin});var Xr=d(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var Cx=(b(),S(N));Cx.__exportStar(vx(),tl);Cx.__exportStar(Tx(),tl)});var Ox=d(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.resolveUserAgentConfig=void 0;function Pz(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}rl.resolveUserAgentConfig=Pz});var Px=d(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.UA_ESCAPE_REGEX=pr.SPACE=pr.X_AMZ_USER_AGENT=pr.USER_AGENT=void 0;pr.USER_AGENT="user-agent";pr.X_AMZ_USER_AGENT="x-amz-user-agent";pr.SPACE=" ";pr.UA_ESCAPE_REGEX=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g});var Ix=d(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.getUserAgentPlugin=fr.getUserAgentMiddlewareOptions=fr.userAgentMiddleware=void 0;var Iz=Ke(),Rn=Px(),Rz=e=>(t,r)=>async n=>{var i,s;let{request:o}=n;if(!Iz.HttpRequest.isInstance(o))return t(n);let{headers:a}=o,u=((i=r?.userAgent)===null||i===void 0?void 0:i.map(xy))||[],l=(await e.defaultUserAgentProvider()).map(xy),p=((s=e?.customUserAgent)===null||s===void 0?void 0:s.map(xy))||[],f=[...l,...u,...p].join(Rn.SPACE),m=[...l.filter(h=>h.startsWith("aws-sdk-")),...p].join(Rn.SPACE);return e.runtime!=="browser"?(m&&(a[Rn.X_AMZ_USER_AGENT]=a[Rn.X_AMZ_USER_AGENT]?`${a[Rn.USER_AGENT]} ${m}`:m),a[Rn.USER_AGENT]=f):a[Rn.X_AMZ_USER_AGENT]=f,t({...n,request:o})};fr.userAgentMiddleware=Rz;var xy=([e,t])=>{let r=e.indexOf("/"),n=e.substring(0,r),i=e.substring(r+1);return n==="api"&&(i=i.toLowerCase()),[n,i,t].filter(s=>s&&s.length>0).map(s=>s?.replace(Rn.UA_ESCAPE_REGEX,"_")).join("/")};fr.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var qz=e=>({applyToStack:t=>{t.add((0,fr.userAgentMiddleware)(e),fr.getUserAgentMiddlewareOptions)}});fr.getUserAgentPlugin=qz});var ma=d(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var Rx=(b(),S(N));Rx.__exportStar(Ox(),nl);Rx.__exportStar(Ix(),nl)});var qx=d(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.resolveClientEndpointParameters=void 0;var Mz=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"rds-data"});il.resolveClientEndpointParameters=Mz});var Mx=d((Kue,kz)=>{kz.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.279.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var ol=d(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.STSServiceException=void 0;var Dz=R(),Ay=class e extends Dz.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};sl.STSServiceException=Ay});var Gt=d(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.GetSessionTokenResponseFilterSensitiveLog=C.GetSessionTokenRequestFilterSensitiveLog=C.GetFederationTokenResponseFilterSensitiveLog=C.FederatedUserFilterSensitiveLog=C.GetFederationTokenRequestFilterSensitiveLog=C.GetCallerIdentityResponseFilterSensitiveLog=C.GetCallerIdentityRequestFilterSensitiveLog=C.GetAccessKeyInfoResponseFilterSensitiveLog=C.GetAccessKeyInfoRequestFilterSensitiveLog=C.DecodeAuthorizationMessageResponseFilterSensitiveLog=C.DecodeAuthorizationMessageRequestFilterSensitiveLog=C.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=C.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=C.AssumeRoleWithSAMLResponseFilterSensitiveLog=C.AssumeRoleWithSAMLRequestFilterSensitiveLog=C.AssumeRoleResponseFilterSensitiveLog=C.CredentialsFilterSensitiveLog=C.AssumeRoleRequestFilterSensitiveLog=C.TagFilterSensitiveLog=C.PolicyDescriptorTypeFilterSensitiveLog=C.AssumedRoleUserFilterSensitiveLog=C.InvalidAuthorizationMessageException=C.IDPCommunicationErrorException=C.InvalidIdentityTokenException=C.IDPRejectedClaimException=C.RegionDisabledException=C.PackedPolicyTooLargeException=C.MalformedPolicyDocumentException=C.ExpiredTokenException=void 0;var qn=ol(),Ty=class e extends qn.STSServiceException{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.ExpiredTokenException=Ty;var Cy=class e extends qn.STSServiceException{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.MalformedPolicyDocumentException=Cy;var Oy=class e extends qn.STSServiceException{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.PackedPolicyTooLargeException=Oy;var Py=class e extends qn.STSServiceException{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.RegionDisabledException=Py;var Iy=class e extends qn.STSServiceException{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.IDPRejectedClaimException=Iy;var Ry=class e extends qn.STSServiceException{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.InvalidIdentityTokenException=Ry;var qy=class e extends qn.STSServiceException{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.IDPCommunicationErrorException=qy;var My=class e extends qn.STSServiceException{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};C.InvalidAuthorizationMessageException=My;var Fz=e=>({...e});C.AssumedRoleUserFilterSensitiveLog=Fz;var Lz=e=>({...e});C.PolicyDescriptorTypeFilterSensitiveLog=Lz;var zz=e=>({...e});C.TagFilterSensitiveLog=zz;var Uz=e=>({...e});C.AssumeRoleRequestFilterSensitiveLog=Uz;var Wz=e=>({...e});C.CredentialsFilterSensitiveLog=Wz;var jz=e=>({...e});C.AssumeRoleResponseFilterSensitiveLog=jz;var Vz=e=>({...e});C.AssumeRoleWithSAMLRequestFilterSensitiveLog=Vz;var Bz=e=>({...e});C.AssumeRoleWithSAMLResponseFilterSensitiveLog=Bz;var $z=e=>({...e});C.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=$z;var Hz=e=>({...e});C.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=Hz;var Gz=e=>({...e});C.DecodeAuthorizationMessageRequestFilterSensitiveLog=Gz;var Jz=e=>({...e});C.DecodeAuthorizationMessageResponseFilterSensitiveLog=Jz;var Qz=e=>({...e});C.GetAccessKeyInfoRequestFilterSensitiveLog=Qz;var Kz=e=>({...e});C.GetAccessKeyInfoResponseFilterSensitiveLog=Kz;var Yz=e=>({...e});C.GetCallerIdentityRequestFilterSensitiveLog=Yz;var Xz=e=>({...e});C.GetCallerIdentityResponseFilterSensitiveLog=Xz;var Zz=e=>({...e});C.GetFederationTokenRequestFilterSensitiveLog=Zz;var eU=e=>({...e});C.FederatedUserFilterSensitiveLog=eU;var tU=e=>({...e});C.GetFederationTokenResponseFilterSensitiveLog=tU;var rU=e=>({...e});C.GetSessionTokenRequestFilterSensitiveLog=rU;var nU=e=>({...e});C.GetSessionTokenResponseFilterSensitiveLog=nU});var ky=d(Zr=>{"use strict";var kx=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",iU=kx+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Dx="["+kx+"]["+iU+"]*",sU=new RegExp("^"+Dx+"$"),oU=function(e,t){let r=[],n=t.exec(e);for(;n;){let i=[];i.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let o=0;o<s;o++)i.push(n[o]);r.push(i),n=t.exec(e)}return r},aU=function(e){let t=sU.exec(e);return!(t===null||typeof t>"u")};Zr.isExist=function(e){return typeof e<"u"};Zr.isEmptyObject=function(e){return Object.keys(e).length===0};Zr.merge=function(e,t,r){if(t){let n=Object.keys(t),i=n.length;for(let s=0;s<i;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Zr.getValue=function(e){return Zr.isExist(e)?e:""};Zr.isName=aU;Zr.getAllMatches=oU;Zr.nameRegexp=Dx});var Fy=d(Wx=>{"use strict";var Dy=ky(),cU={allowBooleanAttributes:!1,unpairedTags:[]};Wx.validate=function(e,t){t=Object.assign({},cU,t);let r=[],n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Lx(e,s),s.err)return s}else if(e[s]==="<"){let o=s;if(s++,e[s]==="!"){s=zx(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let u="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)u+=e[s];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),s--),!_U(u)){let f;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",be("InvalidTag",f,dt(e,s))}let l=lU(e,s);if(l===!1)return be("InvalidAttr","Attributes for '"+u+"' have open quote.",dt(e,s));let p=l.value;if(s=l.index,p[p.length-1]==="/"){let f=s-p.length;p=p.substring(0,p.length-1);let m=Ux(p,t);if(m===!0)n=!0;else return be(m.err.code,m.err.msg,dt(e,f+m.err.line))}else if(a)if(l.tagClosed){if(p.trim().length>0)return be("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",dt(e,o));{let f=r.pop();if(u!==f.tagName){let m=dt(e,f.tagStartPos);return be("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+u+"'.",dt(e,o))}r.length==0&&(i=!0)}}else return be("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",dt(e,s));else{let f=Ux(p,t);if(f!==!0)return be(f.err.code,f.err.msg,dt(e,s-p.length+f.err.line));if(i===!0)return be("InvalidXml","Multiple possible root nodes found.",dt(e,s));t.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=zx(e,s);continue}else if(e[s+1]==="?"){if(s=Lx(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=mU(e,s);if(f==-1)return be("InvalidChar","char '&' is not expected.",dt(e,s));s=f}else if(i===!0&&!Fx(e[s]))return be("InvalidXml","Extra text at the end",dt(e,s));e[s]==="<"&&s--}}else{if(Fx(e[s]))continue;return be("InvalidChar","char '"+e[s]+"' is not expected.",dt(e,s))}if(n){if(r.length==1)return be("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",dt(e,r[0].tagStartPos));if(r.length>0)return be("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return be("InvalidXml","Start tag expected.",1);return!0};function Fx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Lx(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return be("InvalidXml","XML declaration allowed only at the start of the document.",dt(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function zx(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var dU='"',uU="'";function lU(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===dU||e[t]===uU)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}var pU=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ux(e,t){let r=Dy.getAllMatches(e,pU),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return be("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",ha(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return be("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",ha(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return be("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",ha(r[i]));let s=r[i][2];if(!hU(s))return be("InvalidAttr","Attribute '"+s+"' is an invalid name.",ha(r[i]));if(!n.hasOwnProperty(s))n[s]=1;else return be("InvalidAttr","Attribute '"+s+"' is repeated.",ha(r[i]))}return!0}function fU(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function mU(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,fU(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function be(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function hU(e){return Dy.isName(e)}function _U(e){return Dy.isName(e)}function dt(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ha(e){return e.startIndex+e[1].length}});var Vx=d(Ly=>{var jx={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},yU=function(e){return Object.assign({},jx,e)};Ly.buildOptions=yU;Ly.defaultOptions=jx});var $x=d((rle,Bx)=>{"use strict";var zy=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Bx.exports=zy});var Gx=d((nle,Hx)=>{function gU(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,i=!1,s=!1,o=!1,a="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(i&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,s=!0;else if(i&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(i&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(i&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")o=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,n--):(s&&(EU(a,r),s=!1),n--),n===0)break}else e[t]==="["?i=!0:a+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}var wU=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function EU(e,t){let r=wU.exec(e);r&&(t[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}Hx.exports=gU});var Qx=d((ile,Jx)=>{var vU=/^[-+]?0x[a-fA-F0-9]+$/,SU=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var NU={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function bU(e,t={}){if(t=Object.assign({},NU,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&vU.test(r))return Number.parseInt(r,16);{let n=SU.exec(r);if(n){let i=n[1],s=n[2],o=xU(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!i&&r[1]!==".")return e;{let u=Number(r),l=""+u;return l.search(/[eE]/)!==-1||a?t.eNotation?u:e:r.indexOf(".")!==-1?l==="0"&&o===""||l===o||i&&l==="-"+o?u:e:s?o===l||i+o===l?u:e:r===l||r===i+l?u:e}}else return e}}function xU(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Jx.exports=bU});var Yx=d((ole,Kx)=>{"use strict";var Vy=ky(),_a=$x(),AU=Gx(),TU=Qx(),sle="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Vy.nameRegexp),Uy=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=CU,this.parseXml=qU,this.parseTextData=OU,this.resolveNameSpace=PU,this.buildAttributesMap=RU,this.isItStopNode=DU,this.replaceEntitiesValue=MU,this.readStopNodeData=LU,this.saveTextToParentTag=kU}};function CU(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function OU(e,t,r,n,i,s,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,i,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?jy(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?jy(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function PU(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var IU=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function RU(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let r=Vy.getAllMatches(e,IU),n=r.length,i={};for(let s=0;s<n;s++){let o=this.resolveNameSpace(r[s][1]),a=r[s][4],u=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let l=this.options.attributeValueProcessor(o,a,t);l==null?i[u]=a:typeof l!=typeof a||l!==a?i[u]=l:i[u]=jy(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=i,s}return i}}var qU=function(e){e=e.replace(/\r\n?/g,`
`);let t=new _a("!xml"),r=t,n="",i="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Pi(e,">",s,"Closing Tag is not closed."),u=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let l=u.indexOf(":");l!==-1&&(u=u.substr(l+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,i)),i=i.substr(0,i.lastIndexOf(".")),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Wy(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let u=new _a(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,i)),r.addChild(u)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Pi(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let u=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=AU(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Pi(e,"]]>",s,"CDATA is not closed.")-2,u=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,i),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]);else{let l=this.parseTextData(u,r.tagname,i,!0,!1,!0);l==null&&(l=""),r.add(this.options.textNodeName,l)}s=a+2}else{let a=Wy(e,s,this.options.removeNSPrefix),u=a.tagName,l=a.tagExp,p=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1)),u!==t.tagname&&(i+=i?"."+u:u);let m=r;if(m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,i,u)){let h="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)s=a.closeIndex;else{let y=this.readStopNodeData(e,u,f+1);if(!y)throw new Error(`Unexpected end of ${u}`);s=y.i,h=y.tagContent}let g=new _a(u);u!==l&&p&&(g[":@"]=this.buildAttributesMap(l,i)),h&&(h=this.parseTextData(h,u,i,!0,p,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),g.add(this.options.textNodeName,h),r.addChild(g)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),l=u):l=l.substr(0,l.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));let h=new _a(u);u!==l&&p&&(h[":@"]=this.buildAttributesMap(l,i)),i=i.substr(0,i.lastIndexOf(".")),r.addChild(h)}else{let h=new _a(u);this.tagsNodeStack.push(r),u!==l&&p&&(h[":@"]=this.buildAttributesMap(l,i)),r.addChild(h),r=h}n="",s=f}}else n+=e[s];return t.child},MU=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function kU(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function DU(e,t,r){let n="*."+r;for(let i in e){let s=e[i];if(n===s||t===s)return!0}return!1}function FU(e,t,r=">"){let n,i="";for(let s=t;s<e.length;s++){let o=e[s];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(e[s+1]===r[1])return{data:i,index:s}}else return{data:i,index:s};else o==="	"&&(o=" ");i+=o}}function Pi(e,t,r,n){let i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}function Wy(e,t,r,n=">"){let i=FU(e,t+1,n);if(!i)return;let s=i.data,o=i.index,a=s.search(/\s/),u=s,l=!0;if(a!==-1&&(u=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let p=u.indexOf(":");p!==-1&&(u=u.substr(p+1),l=u!==i.data.substr(p+1))}return{tagName:u,tagExp:s,closeIndex:o,attrExpPresent:l}}function LU(e,t,r){let n=r,i=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Pi(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(i--,i===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Pi(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Pi(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Pi(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Wy(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&i++,r=s.closeIndex)}}function jy(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:TU(e,r)}else return Vy.isExist(e)?e:""}Kx.exports=Uy});var e0=d(Zx=>{"use strict";function zU(e,t){return Xx(e,t)}function Xx(e,t,r){let n,i={};for(let s=0;s<e.length;s++){let o=e[s],a=UU(o),u="";if(r===void 0?u=a:u=r+"."+a,a===t.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let l=Xx(o[a],t,u),p=jU(l,t);o[":@"]?WU(l,o[":@"],u,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(l)):t.isArray(a,u,p)?i[a]=[l]:i[a]=l}}}return typeof n=="string"?n.length>0&&(i[t.textNodeName]=n):n!==void 0&&(i[t.textNodeName]=n),i}function UU(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function WU(e,t,r,n){if(t){let i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){let a=i[o];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function jU(e,t){let r=Object.keys(e).length;return!!(r===0||r===1&&e[t.textNodeName])}Zx.prettify=zU});var r0=d((cle,t0)=>{var{buildOptions:VU}=Vx(),BU=Yx(),{prettify:$U}=e0(),HU=Fy(),By=class{constructor(t){this.externalEntities={},this.options=VU(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=HU.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new BU(this.options);n.addExternalEntities(this.externalEntities);let i=n.parseXml(t);return this.options.preserveOrder||i===void 0?i:$U(i,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};t0.exports=By});var a0=d((dle,o0)=>{var GU=`
`;function JU(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=GU),i0(e,t,"",r)}function i0(e,t,r,n){let i="",s=!1;for(let o=0;o<e.length;o++){let a=e[o],u=QU(a),l="";if(r.length===0?l=u:l=`${r}.${u}`,u===t.textNodeName){let g=a[u];KU(l,t)||(g=t.tagValueProcessor(u,g),g=s0(g,t)),s&&(i+=n),i+=g,s=!1;continue}else if(u===t.cdataPropName){s&&(i+=n),i+=`<![CDATA[${a[u][0][t.textNodeName]}]]>`,s=!1;continue}else if(u===t.commentPropName){i+=n+`<!--${a[u][0][t.textNodeName]}-->`,s=!0;continue}else if(u[0]==="?"){let g=n0(a[":@"],t),y=u==="?xml"?"":n,v=a[u][0][t.textNodeName];v=v.length!==0?" "+v:"",i+=y+`<${u}${v}${g}?>`,s=!0;continue}let p=n;p!==""&&(p+=t.indentBy);let f=n0(a[":@"],t),m=n+`<${u}${f}`,h=i0(a[u],t,l,p);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?i+=m+">":i+=m+"/>":(!h||h.length===0)&&t.suppressEmptyNode?i+=m+"/>":h&&h.endsWith(">")?i+=m+`>${h}${n}</${u}>`:(i+=m+">",h&&n!==""&&(h.includes("/>")||h.includes("</"))?i+=n+t.indentBy+h+n:i+=h,i+=`</${u}>`),s=!0}return i}function QU(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function n0(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let i=t.attributeValueProcessor(n,e[n]);i=s0(i,t),i===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${i}"`}return r}function KU(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function s0(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}o0.exports=JU});var d0=d((ule,c0)=>{"use strict";var YU=a0(),XU={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Mn(e){this.options=Object.assign({},XU,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=tW),this.processTextOrObjNode=ZU,this.options.format?(this.indentate=eW,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Mn.prototype.build=function(e){return this.options.preserveOrder?YU(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Mn.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(!(typeof e[i]>"u"))if(e[i]===null)i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextValNode(e[i],i,"",t);else if(typeof e[i]!="object"){let s=this.isAttribute(i);if(s)r+=this.buildAttrPairStr(s,""+e[i]);else if(i===this.options.textNodeName){let o=this.options.tagValueProcessor(i,""+e[i]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){let s=e[i].length;for(let o=0;o<s;o++){let a=e[i][o];typeof a>"u"||(a===null?i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar:typeof a=="object"?n+=this.processTextOrObjNode(a,i,t):n+=this.buildTextValNode(a,i,"",t))}}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let s=Object.keys(e[i]),o=s.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(s[a],""+e[i][s[a]])}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}};Mn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function ZU(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Mn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",i=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+i}};Mn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Mn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+i+"</"+t+this.tagEndChar}};Mn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function eW(e){return this.options.indentBy.repeat(e)}function tW(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}c0.exports=Mn});var l0=d((lle,u0)=>{"use strict";var rW=Fy(),nW=r0(),iW=d0();u0.exports={XMLParser:nW,XMLValidator:rW,XMLBuilder:iW}});var tn=d(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.deserializeAws_queryGetSessionTokenCommand=W.deserializeAws_queryGetFederationTokenCommand=W.deserializeAws_queryGetCallerIdentityCommand=W.deserializeAws_queryGetAccessKeyInfoCommand=W.deserializeAws_queryDecodeAuthorizationMessageCommand=W.deserializeAws_queryAssumeRoleWithWebIdentityCommand=W.deserializeAws_queryAssumeRoleWithSAMLCommand=W.deserializeAws_queryAssumeRoleCommand=W.serializeAws_queryGetSessionTokenCommand=W.serializeAws_queryGetFederationTokenCommand=W.serializeAws_queryGetCallerIdentityCommand=W.serializeAws_queryGetAccessKeyInfoCommand=W.serializeAws_queryDecodeAuthorizationMessageCommand=W.serializeAws_queryAssumeRoleWithWebIdentityCommand=W.serializeAws_queryAssumeRoleWithSAMLCommand=W.serializeAws_queryAssumeRoleCommand=void 0;var sW=Ke(),P=R(),oW=l0(),kn=Gt(),Dn=ol(),aW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...qW(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryAssumeRoleCommand=aW;var cW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...MW(e,t),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryAssumeRoleWithSAMLCommand=cW;var dW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...kW(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryAssumeRoleWithWebIdentityCommand=dW;var uW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...DW(e,t),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryDecodeAuthorizationMessageCommand=uW;var lW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...FW(e,t),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryGetAccessKeyInfoCommand=lW;var pW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...LW(e,t),Action:"GetCallerIdentity",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryGetCallerIdentityCommand=pW;var fW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...zW(e,t),Action:"GetFederationToken",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryGetFederationTokenCommand=fW;var mW=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=zn({...UW(e,t),Action:"GetSessionToken",Version:"2011-06-15"}),Fn(t,r,"/",void 0,n)};W.serializeAws_queryGetSessionTokenCommand=mW;var hW=async(e,t)=>{if(e.statusCode>=300)return _W(e,t);let r=await en(e.body,t),n={};n=BW(r.AssumeRoleResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryAssumeRoleCommand=hW;var _W=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await $y(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await al(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await cl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ya(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},yW=async(e,t)=>{if(e.statusCode>=300)return gW(e,t);let r=await en(e.body,t),n={};n=$W(r.AssumeRoleWithSAMLResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryAssumeRoleWithSAMLCommand=yW;var gW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await $y(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await p0(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await f0(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await al(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await cl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ya(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},wW=async(e,t)=>{if(e.statusCode>=300)return EW(e,t);let r=await en(e.body,t),n={};n=HW(r.AssumeRoleWithWebIdentityResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryAssumeRoleWithWebIdentityCommand=wW;var EW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await $y(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await IW(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await p0(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await f0(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await al(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await cl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ya(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},vW=async(e,t)=>{if(e.statusCode>=300)return SW(e,t);let r=await en(e.body,t),n={};n=GW(r.DecodeAuthorizationMessageResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryDecodeAuthorizationMessageCommand=vW;var SW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await RW(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},NW=async(e,t)=>{if(e.statusCode>=300)return bW(e,t);let r=await en(e.body,t),n={};n=KW(r.GetAccessKeyInfoResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryGetAccessKeyInfoCommand=NW;var bW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body),i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})},xW=async(e,t)=>{if(e.statusCode>=300)return AW(e,t);let r=await en(e.body,t),n={};n=YW(r.GetCallerIdentityResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryGetCallerIdentityCommand=xW;var AW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body),i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})},TW=async(e,t)=>{if(e.statusCode>=300)return CW(e,t);let r=await en(e.body,t),n={};n=XW(r.GetFederationTokenResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryGetFederationTokenCommand=TW;var CW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await al(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await cl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ya(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},OW=async(e,t)=>{if(e.statusCode>=300)return PW(e,t);let r=await en(e.body,t),n={};n=ZW(r.GetSessionTokenResult,t);let i={$metadata:Be(e),...n};return Promise.resolve(i)};W.deserializeAws_queryGetSessionTokenCommand=OW;var PW=async(e,t)=>{let r={...e,body:await Ln(e.body,t)},n=Un(e,r.body);switch(n){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ya(r,t);default:let i=r.body;(0,P.throwDefaultError)({output:e,parsedBody:i.Error,exceptionCtor:Dn.STSServiceException,errorCode:n})}},$y=async(e,t)=>{let r=e.body,n=JW(r.Error,t),i=new kn.ExpiredTokenException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},IW=async(e,t)=>{let r=e.body,n=ej(r.Error,t),i=new kn.IDPCommunicationErrorException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},p0=async(e,t)=>{let r=e.body,n=tj(r.Error,t),i=new kn.IDPRejectedClaimException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},RW=async(e,t)=>{let r=e.body,n=rj(r.Error,t),i=new kn.InvalidAuthorizationMessageException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},f0=async(e,t)=>{let r=e.body,n=nj(r.Error,t),i=new kn.InvalidIdentityTokenException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},al=async(e,t)=>{let r=e.body,n=ij(r.Error,t),i=new kn.MalformedPolicyDocumentException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},cl=async(e,t)=>{let r=e.body,n=sj(r.Error,t),i=new kn.PackedPolicyTooLargeException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},ya=async(e,t)=>{let r=e.body,n=oj(r.Error,t),i=new kn.RegionDisabledException({$metadata:Be(e),...n});return(0,P.decorateServiceException)(i,r)},qW=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let n=dl(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,s])=>{let o=`PolicyArns.${i}`;r[o]=s})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=m0(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,s])=>{let o=`Tags.${i}`;r[o]=s})}if(e.TransitiveTagKeys!=null){let n=VW(e.TransitiveTagKeys,t);e.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([i,s])=>{let o=`TransitiveTagKeys.${i}`;r[o]=s})}return e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),r},MW=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.PrincipalArn!=null&&(r.PrincipalArn=e.PrincipalArn),e.SAMLAssertion!=null&&(r.SAMLAssertion=e.SAMLAssertion),e.PolicyArns!=null){let n=dl(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,s])=>{let o=`PolicyArns.${i}`;r[o]=s})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r},kW=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=dl(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,s])=>{let o=`PolicyArns.${i}`;r[o]=s})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r},DW=(e,t)=>{let r={};return e.EncodedMessage!=null&&(r.EncodedMessage=e.EncodedMessage),r},FW=(e,t)=>{let r={};return e.AccessKeyId!=null&&(r.AccessKeyId=e.AccessKeyId),r},LW=(e,t)=>({}),zW=(e,t)=>{let r={};if(e.Name!=null&&(r.Name=e.Name),e.Policy!=null&&(r.Policy=e.Policy),e.PolicyArns!=null){let n=dl(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([i,s])=>{let o=`PolicyArns.${i}`;r[o]=s})}if(e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=m0(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([i,s])=>{let o=`Tags.${i}`;r[o]=s})}return r},UW=(e,t)=>{let r={};return e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),r},dl=(e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let s=WW(i,t);Object.entries(s).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},WW=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},jW=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},VW=(e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`member.${n}`]=i,n++);return r},m0=(e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let s=jW(i,t);Object.entries(s).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},Hy=(e,t)=>{let r={AssumedRoleId:void 0,Arn:void 0};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,P.expectString)(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},BW=(e,t)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return e.Credentials!==void 0&&(r.Credentials=ga(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Hy(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},$W=(e,t)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Subject:void 0,SubjectType:void 0,Issuer:void 0,Audience:void 0,NameQualifier:void 0,SourceIdentity:void 0};return e.Credentials!==void 0&&(r.Credentials=ga(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Hy(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.Subject!==void 0&&(r.Subject=(0,P.expectString)(e.Subject)),e.SubjectType!==void 0&&(r.SubjectType=(0,P.expectString)(e.SubjectType)),e.Issuer!==void 0&&(r.Issuer=(0,P.expectString)(e.Issuer)),e.Audience!==void 0&&(r.Audience=(0,P.expectString)(e.Audience)),e.NameQualifier!==void 0&&(r.NameQualifier=(0,P.expectString)(e.NameQualifier)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},HW=(e,t)=>{let r={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return e.Credentials!==void 0&&(r.Credentials=ga(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,P.expectString)(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Hy(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=(0,P.expectString)(e.Provider)),e.Audience!==void 0&&(r.Audience=(0,P.expectString)(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=(0,P.expectString)(e.SourceIdentity)),r},ga=(e,t)=>{let r={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return e.AccessKeyId!==void 0&&(r.AccessKeyId=(0,P.expectString)(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,P.expectString)(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=(0,P.expectString)(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=(0,P.expectNonNull)((0,P.parseRfc3339DateTimeWithOffset)(e.Expiration))),r},GW=(e,t)=>{let r={DecodedMessage:void 0};return e.DecodedMessage!==void 0&&(r.DecodedMessage=(0,P.expectString)(e.DecodedMessage)),r},JW=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},QW=(e,t)=>{let r={FederatedUserId:void 0,Arn:void 0};return e.FederatedUserId!==void 0&&(r.FederatedUserId=(0,P.expectString)(e.FederatedUserId)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},KW=(e,t)=>{let r={Account:void 0};return e.Account!==void 0&&(r.Account=(0,P.expectString)(e.Account)),r},YW=(e,t)=>{let r={UserId:void 0,Account:void 0,Arn:void 0};return e.UserId!==void 0&&(r.UserId=(0,P.expectString)(e.UserId)),e.Account!==void 0&&(r.Account=(0,P.expectString)(e.Account)),e.Arn!==void 0&&(r.Arn=(0,P.expectString)(e.Arn)),r},XW=(e,t)=>{let r={Credentials:void 0,FederatedUser:void 0,PackedPolicySize:void 0};return e.Credentials!==void 0&&(r.Credentials=ga(e.Credentials,t)),e.FederatedUser!==void 0&&(r.FederatedUser=QW(e.FederatedUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,P.strictParseInt32)(e.PackedPolicySize)),r},ZW=(e,t)=>{let r={Credentials:void 0};return e.Credentials!==void 0&&(r.Credentials=ga(e.Credentials,t)),r},ej=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},tj=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},rj=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},nj=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},ij=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},sj=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},oj=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=(0,P.expectString)(e.message)),r},Be=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),aj=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),cj=(e,t)=>aj(e,t).then(r=>t.utf8Encoder(r)),Fn=async(e,t,r,n,i)=>{let{hostname:s,protocol:o="https",port:a,path:u}=await e.endpoint(),l={protocol:o,hostname:s,port:a,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:t};return n!==void 0&&(l.hostname=n),i!==void 0&&(l.body=i),new sW.HttpRequest(l)},en=(e,t)=>cj(e,t).then(r=>{if(r.length){let n=new oW.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(u,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i=n.parse(r),s="#text",o=Object.keys(i)[0],a=i[o];return a[s]&&(a[o]=a[s],delete a[s]),(0,P.getValueFromTextNode)(a)}return{}}),Ln=async(e,t)=>{let r=await en(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},zn=e=>Object.entries(e).map(([t,r])=>(0,P.extendedEncodeURIComponent)(t)+"="+(0,P.extendedEncodeURIComponent)(r)).join("&"),Un=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var ll=d(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.AssumeRoleCommand=void 0;var dj=Z(),uj=fe(),lj=Xr(),pj=R(),h0=Gt(),_0=tn(),Gy=class e extends pj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,uj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,dj.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,lj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:h0.AssumeRoleRequestFilterSensitiveLog,outputFilterSensitiveLog:h0.AssumeRoleResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,_0.serializeAws_queryAssumeRoleCommand)(t,r)}deserialize(t,r){return(0,_0.deserializeAws_queryAssumeRoleCommand)(t,r)}};ul.AssumeRoleCommand=Gy});var Qy=d(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.AssumeRoleWithSAMLCommand=void 0;var fj=Z(),mj=fe(),hj=R(),y0=Gt(),g0=tn(),Jy=class e extends hj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,mj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,fj.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:y0.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:y0.AssumeRoleWithSAMLResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,g0.serializeAws_queryAssumeRoleWithSAMLCommand)(t,r)}deserialize(t,r){return(0,g0.deserializeAws_queryAssumeRoleWithSAMLCommand)(t,r)}};pl.AssumeRoleWithSAMLCommand=Jy});var ml=d(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.AssumeRoleWithWebIdentityCommand=void 0;var _j=Z(),yj=fe(),gj=R(),w0=Gt(),E0=tn(),Ky=class e extends gj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,yj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,_j.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:w0.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:w0.AssumeRoleWithWebIdentityResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,E0.serializeAws_queryAssumeRoleWithWebIdentityCommand)(t,r)}deserialize(t,r){return(0,E0.deserializeAws_queryAssumeRoleWithWebIdentityCommand)(t,r)}};fl.AssumeRoleWithWebIdentityCommand=Ky});var Xy=d(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.DecodeAuthorizationMessageCommand=void 0;var wj=Z(),Ej=fe(),vj=Xr(),Sj=R(),v0=Gt(),S0=tn(),Yy=class e extends Sj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,Ej.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,wj.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,vj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:v0.DecodeAuthorizationMessageRequestFilterSensitiveLog,outputFilterSensitiveLog:v0.DecodeAuthorizationMessageResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,S0.serializeAws_queryDecodeAuthorizationMessageCommand)(t,r)}deserialize(t,r){return(0,S0.deserializeAws_queryDecodeAuthorizationMessageCommand)(t,r)}};hl.DecodeAuthorizationMessageCommand=Yy});var eg=d(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.GetAccessKeyInfoCommand=void 0;var Nj=Z(),bj=fe(),xj=Xr(),Aj=R(),N0=Gt(),b0=tn(),Zy=class e extends Aj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,bj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,Nj.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,xj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:N0.GetAccessKeyInfoRequestFilterSensitiveLog,outputFilterSensitiveLog:N0.GetAccessKeyInfoResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,b0.serializeAws_queryGetAccessKeyInfoCommand)(t,r)}deserialize(t,r){return(0,b0.deserializeAws_queryGetAccessKeyInfoCommand)(t,r)}};_l.GetAccessKeyInfoCommand=Zy});var rg=d(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.GetCallerIdentityCommand=void 0;var Tj=Z(),Cj=fe(),Oj=Xr(),Pj=R(),x0=Gt(),A0=tn(),tg=class e extends Pj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,Cj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,Tj.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,Oj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:x0.GetCallerIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:x0.GetCallerIdentityResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,A0.serializeAws_queryGetCallerIdentityCommand)(t,r)}deserialize(t,r){return(0,A0.deserializeAws_queryGetCallerIdentityCommand)(t,r)}};yl.GetCallerIdentityCommand=tg});var ig=d(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.GetFederationTokenCommand=void 0;var Ij=Z(),Rj=fe(),qj=Xr(),Mj=R(),T0=Gt(),C0=tn(),ng=class e extends Mj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,Rj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,Ij.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,qj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:T0.GetFederationTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:T0.GetFederationTokenResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,C0.serializeAws_queryGetFederationTokenCommand)(t,r)}deserialize(t,r){return(0,C0.deserializeAws_queryGetFederationTokenCommand)(t,r)}};gl.GetFederationTokenCommand=ng});var og=d(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.GetSessionTokenCommand=void 0;var kj=Z(),Dj=fe(),Fj=Xr(),Lj=R(),O0=Gt(),P0=tn(),sg=class e extends Lj.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,Dj.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,kj.getEndpointPlugin)(r,e.getEndpointParameterInstructions())),this.middlewareStack.use((0,Fj.getAwsAuthPlugin)(r));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:O0.GetSessionTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:O0.GetSessionTokenResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,P0.serializeAws_queryGetSessionTokenCommand)(t,r)}deserialize(t,r){return(0,P0.deserializeAws_queryGetSessionTokenCommand)(t,r)}};wl.GetSessionTokenCommand=sg});var I0=d(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.resolveStsAuthConfig=void 0;var zj=Xr(),Uj=(e,{stsClientCtor:t})=>(0,zj.resolveAwsAuthConfig)({...e,stsClientCtor:t});El.resolveStsAuthConfig=Uj});var R0=d(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.resolveClientEndpointParameters=void 0;var Wj=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});vl.resolveClientEndpointParameters=Wj});var q0=d((Nle,jj)=>{jj.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-sdk-sts":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0","fast-xml-parser":"4.1.2",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var ag=d(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.decorateDefaultCredentialProvider=mr.getDefaultRoleAssumerWithWebIdentity=mr.getDefaultRoleAssumer=void 0;var Vj=ll(),Bj=ml(),M0="us-east-1",k0=e=>typeof e!="function"?e===void 0?M0:e:async()=>{try{return await e()}catch{return M0}},$j=(e,t)=>{let r,n;return async(i,s)=>{if(n=i,!r){let{logger:a,region:u,requestHandler:l}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:k0(u||e.region),...l?{requestHandler:l}:{}})}let{Credentials:o}=await r.send(new Vj.AssumeRoleCommand(s));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}};mr.getDefaultRoleAssumer=$j;var Hj=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:o,requestHandler:a}=e;r=new t({logger:s,region:k0(o||e.region),...a?{requestHandler:a}:{}})}let{Credentials:i}=await r.send(new Bj.AssumeRoleWithWebIdentityCommand(n));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}};mr.getDefaultRoleAssumerWithWebIdentity=Hj;var Gj=e=>t=>e({roleAssumer:(0,mr.getDefaultRoleAssumer)(t,t.stsClientCtor),roleAssumerWithWebIdentity:(0,mr.getDefaultRoleAssumerWithWebIdentity)(t,t.stsClientCtor),...t});mr.decorateDefaultCredentialProvider=Gj});var D0=d($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.fromEnv=$e.ENV_EXPIRATION=$e.ENV_SESSION=$e.ENV_SECRET=$e.ENV_KEY=void 0;var Jj=Q();$e.ENV_KEY="AWS_ACCESS_KEY_ID";$e.ENV_SECRET="AWS_SECRET_ACCESS_KEY";$e.ENV_SESSION="AWS_SESSION_TOKEN";$e.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var Qj=()=>async()=>{let e=process.env[$e.ENV_KEY],t=process.env[$e.ENV_SECRET],r=process.env[$e.ENV_SESSION],n=process.env[$e.ENV_EXPIRATION];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new Jj.CredentialsProviderError("Unable to find environment variable credentials.")};$e.fromEnv=Qj});var dg=d(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});var Kj=(b(),S(N));Kj.__exportStar(D0(),cg)});var wa=d(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.getHomeDir=void 0;var Yj=z("os"),Xj=z("path"),Zj=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${Xj.sep}`}=process.env;return e||t||(r?`${n}${r}`:(0,Yj.homedir)())};Sl.getHomeDir=Zj});var F0=d(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.getProfileName=hr.DEFAULT_PROFILE=hr.ENV_PROFILE=void 0;hr.ENV_PROFILE="AWS_PROFILE";hr.DEFAULT_PROFILE="default";var eV=e=>e.profile||process.env[hr.ENV_PROFILE]||hr.DEFAULT_PROFILE;hr.getProfileName=eV});var ug=d(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.getSSOTokenFilepath=void 0;var tV=z("crypto"),rV=z("path"),nV=wa(),iV=e=>{let r=(0,tV.createHash)("sha1").update(e).digest("hex");return(0,rV.join)((0,nV.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Nl.getSSOTokenFilepath=iV});var L0=d(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.getSSOTokenFromFile=void 0;var sV=z("fs"),oV=ug(),{readFile:aV}=sV.promises,cV=async e=>{let t=(0,oV.getSSOTokenFilepath)(e),r=await aV(t,"utf8");return JSON.parse(r)};bl.getSSOTokenFromFile=cV});var lg=d(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.getConfigFilepath=Ii.ENV_CONFIG_PATH=void 0;var dV=z("path"),uV=wa();Ii.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var lV=()=>process.env[Ii.ENV_CONFIG_PATH]||(0,dV.join)((0,uV.getHomeDir)(),".aws","config");Ii.getConfigFilepath=lV});var z0=d(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getCredentialsFilepath=Ri.ENV_CREDENTIALS_PATH=void 0;var pV=z("path"),fV=wa();Ri.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var mV=()=>process.env[Ri.ENV_CREDENTIALS_PATH]||(0,pV.join)((0,fV.getHomeDir)(),".aws","credentials");Ri.getCredentialsFilepath=mV});var W0=d(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.getProfileData=void 0;var U0=/^profile\s(["'])?([^\1]+)\1$/,hV=e=>Object.entries(e).filter(([t])=>U0.test(t)).reduce((t,[r,n])=>({...t,[U0.exec(r)[2]]:n}),{...e.default&&{default:e.default}});xl.getProfileData=hV});var pg=d(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.parseIni=void 0;var _V=["__proto__","profile __proto__"],yV=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),_V.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),o=0,a=n.length-1;if(s!==-1&&s!==o&&s!==a){let[l,p]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][l]=p}}return t};Al.parseIni=yV});var mg=d(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.slurpFile=void 0;var gV=z("fs"),{readFile:wV}=gV.promises,fg={},EV=e=>(fg[e]||(fg[e]=wV(e,"utf8")),fg[e]);Tl.slurpFile=EV});var hg=d(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.loadSharedConfigFiles=void 0;var vV=lg(),SV=z0(),NV=W0(),j0=pg(),V0=mg(),B0=()=>({}),bV=async(e={})=>{let{filepath:t=(0,SV.getCredentialsFilepath)(),configFilepath:r=(0,vV.getConfigFilepath)()}=e,n=await Promise.all([(0,V0.slurpFile)(r).then(j0.parseIni).then(NV.getProfileData).catch(B0),(0,V0.slurpFile)(t).then(j0.parseIni).catch(B0)]);return{configFile:n[0],credentialsFile:n[1]}};Cl.loadSharedConfigFiles=bV});var H0=d(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.getSsoSessionData=void 0;var $0=/^sso-session\s(["'])?([^\1]+)\1$/,xV=e=>Object.entries(e).filter(([t])=>$0.test(t)).reduce((t,[r,n])=>({...t,[$0.exec(r)[2]]:n}),{});Ol.getSsoSessionData=xV});var G0=d(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.loadSsoSessionData=void 0;var AV=lg(),TV=H0(),CV=pg(),OV=mg(),PV=()=>({}),IV=async(e={})=>{var t;return(0,OV.slurpFile)((t=e.configFilepath)!==null&&t!==void 0?t:(0,AV.getConfigFilepath)()).then(CV.parseIni).then(TV.getSsoSessionData).catch(PV)};Pl.loadSsoSessionData=IV});var J0=d(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.parseKnownFiles=void 0;var RV=hg(),qV=async e=>{let t=await(0,RV.loadSharedConfigFiles)(e);return{...t.configFile,...t.credentialsFile}};Il.parseKnownFiles=qV});var K0=d(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0})});var yr=d(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});var Wn=(b(),S(N));Wn.__exportStar(wa(),_r);Wn.__exportStar(F0(),_r);Wn.__exportStar(ug(),_r);Wn.__exportStar(L0(),_r);Wn.__exportStar(hg(),_r);Wn.__exportStar(G0(),_r);Wn.__exportStar(J0(),_r);Wn.__exportStar(K0(),_r)});var ql=d(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.httpRequest=void 0;var _g=Q(),MV=z("buffer"),kV=z("http");function DV(e){return new Promise((t,r)=>{var n;let i=(0,kV.request)({method:"GET",...e,hostname:(n=e.hostname)===null||n===void 0?void 0:n.replace(/^\[(.+)\]$/,"$1")});i.on("error",s=>{r(Object.assign(new _g.ProviderError("Unable to connect to instance metadata service"),s)),i.destroy()}),i.on("timeout",()=>{r(new _g.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new _g.ProviderError("Error response received from instance metadata service"),{statusCode:o})),i.destroy());let a=[];s.on("data",u=>{a.push(u)}),s.on("end",()=>{t(MV.Buffer.concat(a)),i.destroy()})}),i.end()})}Rl.httpRequest=DV});var yg=d(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.fromImdsCredentials=Ls.isImdsCredentials=void 0;var FV=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string";Ls.isImdsCredentials=FV;var LV=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});Ls.fromImdsCredentials=LV});var Ml=d(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.providerConfigFromInit=gr.DEFAULT_MAX_RETRIES=gr.DEFAULT_TIMEOUT=void 0;gr.DEFAULT_TIMEOUT=1e3;gr.DEFAULT_MAX_RETRIES=0;var zV=({maxRetries:e=gr.DEFAULT_MAX_RETRIES,timeout:t=gr.DEFAULT_TIMEOUT})=>({maxRetries:e,timeout:t});gr.providerConfigFromInit=zV});var gg=d(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.retry=void 0;var UV=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};kl.retry=UV});var X0=d(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.fromContainerMetadata=Re.ENV_CMDS_AUTH_TOKEN=Re.ENV_CMDS_RELATIVE_URI=Re.ENV_CMDS_FULL_URI=void 0;var Dl=Q(),WV=z("url"),jV=ql(),Y0=yg(),VV=Ml(),BV=gg();Re.ENV_CMDS_FULL_URI="AWS_CONTAINER_CREDENTIALS_FULL_URI";Re.ENV_CMDS_RELATIVE_URI="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";Re.ENV_CMDS_AUTH_TOKEN="AWS_CONTAINER_AUTHORIZATION_TOKEN";var $V=(e={})=>{let{timeout:t,maxRetries:r}=(0,VV.providerConfigFromInit)(e);return()=>(0,BV.retry)(async()=>{let n=await KV(),i=JSON.parse(await HV(t,n));if(!(0,Y0.isImdsCredentials)(i))throw new Dl.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,Y0.fromImdsCredentials)(i)},r)};Re.fromContainerMetadata=$V;var HV=async(e,t)=>(process.env[Re.ENV_CMDS_AUTH_TOKEN]&&(t.headers={...t.headers,Authorization:process.env[Re.ENV_CMDS_AUTH_TOKEN]}),(await(0,jV.httpRequest)({...t,timeout:e})).toString()),GV="169.254.170.2",JV={localhost:!0,"127.0.0.1":!0},QV={"http:":!0,"https:":!0},KV=async()=>{if(process.env[Re.ENV_CMDS_RELATIVE_URI])return{hostname:GV,path:process.env[Re.ENV_CMDS_RELATIVE_URI]};if(process.env[Re.ENV_CMDS_FULL_URI]){let e=(0,WV.parse)(process.env[Re.ENV_CMDS_FULL_URI]);if(!e.hostname||!(e.hostname in JV))throw new Dl.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in QV))throw new Dl.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new Dl.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Re.ENV_CMDS_RELATIVE_URI} or ${Re.ENV_CMDS_FULL_URI} environment variable is set`,!1)}});var Z0=d(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.fromEnv=void 0;var YV=Q(),XV=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new YV.CredentialsProviderError(t.message||`Cannot load config from environment variables with getter: ${e}`)}};Fl.fromEnv=XV});var tA=d(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.fromSharedConfigFiles=void 0;var ZV=Q(),eA=yr(),eB=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=(0,eA.getProfileName)(r),{configFile:i,credentialsFile:s}=await(0,eA.loadSharedConfigFiles)(r),o=s[n]||{},a=i[n]||{},u=t==="config"?{...o,...a}:{...a,...o};try{let l=e(u);if(l===void 0)throw new Error;return l}catch(l){throw new ZV.CredentialsProviderError(l.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};Ll.fromSharedConfigFiles=eB});var rA=d(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.fromStatic=void 0;var tB=Q(),rB=e=>typeof e=="function",nB=e=>rB(e)?async()=>await e():(0,tB.fromStatic)(e);zl.fromStatic=nB});var iA=d(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.loadConfig=void 0;var nA=Q(),iB=Z0(),sB=tA(),oB=rA(),aB=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>(0,nA.memoize)((0,nA.chain)((0,iB.fromEnv)(e),(0,sB.fromSharedConfigFiles)(t,n),(0,oB.fromStatic)(r)));Ul.loadConfig=aB});var jn=d(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});var cB=(b(),S(N));cB.__exportStar(iA(),wg)});var sA=d(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.Endpoint=void 0;var dB;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(dB=Ea.Endpoint||(Ea.Endpoint={}))});var oA=d(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.ENDPOINT_CONFIG_OPTIONS=wr.CONFIG_ENDPOINT_NAME=wr.ENV_ENDPOINT_NAME=void 0;wr.ENV_ENDPOINT_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT";wr.CONFIG_ENDPOINT_NAME="ec2_metadata_service_endpoint";wr.ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:e=>e[wr.ENV_ENDPOINT_NAME],configFileSelector:e=>e[wr.CONFIG_ENDPOINT_NAME],default:void 0}});var Eg=d(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.EndpointMode=void 0;var uB;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(uB=va.EndpointMode||(va.EndpointMode={}))});var aA=d(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.ENDPOINT_MODE_CONFIG_OPTIONS=Er.CONFIG_ENDPOINT_MODE_NAME=Er.ENV_ENDPOINT_MODE_NAME=void 0;var lB=Eg();Er.ENV_ENDPOINT_MODE_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE";Er.CONFIG_ENDPOINT_MODE_NAME="ec2_metadata_service_endpoint_mode";Er.ENDPOINT_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[Er.ENV_ENDPOINT_MODE_NAME],configFileSelector:e=>e[Er.CONFIG_ENDPOINT_MODE_NAME],default:lB.EndpointMode.IPv4}});var Sg=d(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.getInstanceMetadataEndpoint=void 0;var dA=jn(),pB=_i(),cA=sA(),fB=oA(),vg=Eg(),mB=aA(),hB=async()=>(0,pB.parseUrl)(await _B()||await yB());Wl.getInstanceMetadataEndpoint=hB;var _B=async()=>(0,dA.loadConfig)(fB.ENDPOINT_CONFIG_OPTIONS)(),yB=async()=>{let e=await(0,dA.loadConfig)(mB.ENDPOINT_MODE_CONFIG_OPTIONS)();switch(e){case vg.EndpointMode.IPv4:return cA.Endpoint.IPv4;case vg.EndpointMode.IPv6:return cA.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(vg.EndpointMode)}`)}}});var uA=d(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.getExtendedInstanceMetadataCredentials=void 0;var gB=5*60,wB=5*60,EB="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",vB=(e,t)=>{var r;let n=gB+Math.floor(Math.random()*wB),i=new Date(Date.now()+n*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+EB);let s=(r=e.originalExpiration)!==null&&r!==void 0?r:e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:i}};jl.getExtendedInstanceMetadataCredentials=vB});var pA=d(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.staticStabilityProvider=void 0;var lA=uA(),SB=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let i;try{i=await e(),i.expiration&&i.expiration.getTime()<Date.now()&&(i=(0,lA.getExtendedInstanceMetadataCredentials)(i,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),i=(0,lA.getExtendedInstanceMetadataCredentials)(n,r);else throw s}return n=i,i}};Vl.staticStabilityProvider=SB});var _A=d(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.fromInstanceMetadata=void 0;var NB=Q(),Ng=ql(),fA=yg(),bB=Ml(),mA=gg(),xB=Sg(),AB=pA(),hA="/latest/meta-data/iam/security-credentials/",TB="/latest/api/token",CB=(e={})=>(0,AB.staticStabilityProvider)(OB(e),{logger:e.logger});Bl.fromInstanceMetadata=CB;var OB=e=>{let t=!1,{timeout:r,maxRetries:n}=(0,bB.providerConfigFromInit)(e),i=async(s,o)=>{let a=(await(0,mA.retry)(async()=>{let u;try{u=await IB(o)}catch(l){throw l.statusCode===401&&(t=!1),l}return u},s)).trim();return(0,mA.retry)(async()=>{let u;try{u=await RB(a,o)}catch(l){throw l.statusCode===401&&(t=!1),l}return u},s)};return async()=>{let s=await(0,xB.getInstanceMetadataEndpoint)();if(t)return i(n,{...s,timeout:r});{let o;try{o=(await PB({...s,timeout:r})).toString()}catch(a){if(a?.statusCode===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),i(n,{...s,timeout:r})}return i(n,{...s,headers:{"x-aws-ec2-metadata-token":o},timeout:r})}}},PB=async e=>(0,Ng.httpRequest)({...e,path:TB,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),IB=async e=>(await(0,Ng.httpRequest)({...e,path:hA})).toString(),RB=async(e,t)=>{let r=JSON.parse((await(0,Ng.httpRequest)({...t,path:hA+e})).toString());if(!(0,fA.isImdsCredentials)(r))throw new NB.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,fA.fromImdsCredentials)(r)}});var gA=d(yA=>{"use strict";Object.defineProperty(yA,"__esModule",{value:!0})});var Hl=d(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.getInstanceMetadataEndpoint=vr.httpRequest=void 0;var $l=(b(),S(N));$l.__exportStar(X0(),vr);$l.__exportStar(_A(),vr);$l.__exportStar(Ml(),vr);$l.__exportStar(gA(),vr);var qB=ql();Object.defineProperty(vr,"httpRequest",{enumerable:!0,get:function(){return qB.httpRequest}});var MB=Sg();Object.defineProperty(vr,"getInstanceMetadataEndpoint",{enumerable:!0,get:function(){return MB.getInstanceMetadataEndpoint}})});var EA=d(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.resolveCredentialSource=void 0;var kB=dg(),wA=Hl(),DB=Q(),FB=(e,t)=>{let r={EcsContainer:wA.fromContainerMetadata,Ec2InstanceMetadata:wA.fromInstanceMetadata,Environment:kB.fromEnv};if(e in r)return r[e]();throw new DB.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};Gl.resolveCredentialSource=FB});var vA=d(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.resolveAssumeRoleCredentials=zs.isAssumeRoleProfile=void 0;var bg=Q(),LB=yr(),zB=EA(),UB=xg(),WB=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(jB(e)||VB(e));zs.isAssumeRoleProfile=WB;var jB=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",VB=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",BB=async(e,t,r,n={})=>{let i=t[e];if(!r.roleAssumer)throw new bg.CredentialsProviderError(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=i;if(s&&s in n)throw new bg.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,LB.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let o=s?(0,UB.resolveProfileData)(s,t,r,{...n,[s]:!0}):(0,zB.resolveCredentialSource)(i.credential_source,e)(),a={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id},{mfa_serial:u}=i;if(u){if(!r.mfaCodeProvider)throw new bg.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=u,a.TokenCode=await r.mfaCodeProvider(u)}let l=await o;return r.roleAssumer(l,a)};zs.resolveAssumeRoleCredentials=BB});var SA=d(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.getValidatedProcessCredentials=void 0;var $B=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};Jl.getValidatedProcessCredentials=$B});var NA=d(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.resolveProcessCredentials=void 0;var Ag=Q(),HB=z("child_process"),GB=z("util"),JB=SA(),QB=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let i=(0,GB.promisify)(HB.exec);try{let{stdout:s}=await i(n),o;try{o=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return(0,JB.getValidatedProcessCredentials)(e,o)}catch(s){throw new Ag.CredentialsProviderError(s.message)}}else throw new Ag.CredentialsProviderError(`Profile ${e} did not contain credential_process.`)}else throw new Ag.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`)};Ql.resolveProcessCredentials=QB});var xA=d(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.fromProcess=void 0;var bA=yr(),KB=NA(),YB=(e={})=>async()=>{let t=await(0,bA.parseKnownFiles)(e);return(0,KB.resolveProcessCredentials)((0,bA.getProfileName)(e),t)};Kl.fromProcess=YB});var Cg=d(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});var XB=(b(),S(N));XB.__exportStar(xA(),Tg)});var AA=d(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.resolveProcessCredentials=Us.isProcessProfile=void 0;var ZB=Cg(),e2=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string";Us.isProcessProfile=e2;var t2=async(e,t)=>(0,ZB.fromProcess)({...e,profile:t})();Us.resolveProcessCredentials=t2});var Og=d(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.isSsoProfile=void 0;var r2=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");Yl.isSsoProfile=r2});var Zl=d(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.SSOServiceException=void 0;var n2=R(),Pg=class e extends n2.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};Xl.SSOServiceException=Pg});var qi=d(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.LogoutRequestFilterSensitiveLog=B.ListAccountsResponseFilterSensitiveLog=B.ListAccountsRequestFilterSensitiveLog=B.ListAccountRolesResponseFilterSensitiveLog=B.RoleInfoFilterSensitiveLog=B.ListAccountRolesRequestFilterSensitiveLog=B.GetRoleCredentialsResponseFilterSensitiveLog=B.RoleCredentialsFilterSensitiveLog=B.GetRoleCredentialsRequestFilterSensitiveLog=B.AccountInfoFilterSensitiveLog=B.UnauthorizedException=B.TooManyRequestsException=B.ResourceNotFoundException=B.InvalidRequestException=void 0;var Ws=R(),ep=Zl(),Ig=class e extends ep.SSOServiceException{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};B.InvalidRequestException=Ig;var Rg=class e extends ep.SSOServiceException{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};B.ResourceNotFoundException=Rg;var qg=class e extends ep.SSOServiceException{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};B.TooManyRequestsException=qg;var Mg=class e extends ep.SSOServiceException{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};B.UnauthorizedException=Mg;var i2=e=>({...e});B.AccountInfoFilterSensitiveLog=i2;var s2=e=>({...e,...e.accessToken&&{accessToken:Ws.SENSITIVE_STRING}});B.GetRoleCredentialsRequestFilterSensitiveLog=s2;var o2=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Ws.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:Ws.SENSITIVE_STRING}});B.RoleCredentialsFilterSensitiveLog=o2;var a2=e=>({...e,...e.roleCredentials&&{roleCredentials:(0,B.RoleCredentialsFilterSensitiveLog)(e.roleCredentials)}});B.GetRoleCredentialsResponseFilterSensitiveLog=a2;var c2=e=>({...e,...e.accessToken&&{accessToken:Ws.SENSITIVE_STRING}});B.ListAccountRolesRequestFilterSensitiveLog=c2;var d2=e=>({...e});B.RoleInfoFilterSensitiveLog=d2;var u2=e=>({...e});B.ListAccountRolesResponseFilterSensitiveLog=u2;var l2=e=>({...e,...e.accessToken&&{accessToken:Ws.SENSITIVE_STRING}});B.ListAccountsRequestFilterSensitiveLog=l2;var p2=e=>({...e});B.ListAccountsResponseFilterSensitiveLog=p2;var f2=e=>({...e,...e.accessToken&&{accessToken:Ws.SENSITIVE_STRING}});B.LogoutRequestFilterSensitiveLog=f2});var Sa=d(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.deserializeAws_restJson1LogoutCommand=qe.deserializeAws_restJson1ListAccountsCommand=qe.deserializeAws_restJson1ListAccountRolesCommand=qe.deserializeAws_restJson1GetRoleCredentialsCommand=qe.serializeAws_restJson1LogoutCommand=qe.serializeAws_restJson1ListAccountsCommand=qe.serializeAws_restJson1ListAccountRolesCommand=qe.serializeAws_restJson1GetRoleCredentialsCommand=void 0;var tp=Ke(),V=R(),rp=qi(),np=Zl(),m2=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o=Ye({},ap,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,u=Ye({role_name:[,(0,V.expectNonNull)(e.roleName,"roleName")],account_id:[,(0,V.expectNonNull)(e.accountId,"accountId")]}),l;return new tp.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:o,path:a,query:u,body:l})};qe.serializeAws_restJson1GetRoleCredentialsCommand=m2;var h2=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o=Ye({},ap,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/assignment/roles`,u=Ye({next_token:[,e.nextToken],max_result:[()=>e.maxResults!==void 0,()=>e.maxResults.toString()],account_id:[,(0,V.expectNonNull)(e.accountId,"accountId")]}),l;return new tp.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:o,path:a,query:u,body:l})};qe.serializeAws_restJson1ListAccountRolesCommand=h2;var _2=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o=Ye({},ap,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/assignment/accounts`,u=Ye({next_token:[,e.nextToken],max_result:[()=>e.maxResults!==void 0,()=>e.maxResults.toString()]}),l;return new tp.HttpRequest({protocol:n,hostname:r,port:i,method:"GET",headers:o,path:a,query:u,body:l})};qe.serializeAws_restJson1ListAccountsCommand=_2;var y2=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o=Ye({},ap,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/logout`,u;return new tp.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};qe.serializeAws_restJson1LogoutCommand=y2;var g2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return w2(e,t);let r=Ye({$metadata:Vn(e)}),n=(0,V.expectNonNull)((0,V.expectObject)(await cp(e.body,t)),"body");return n.roleCredentials!=null&&(r.roleCredentials=C2(n.roleCredentials,t)),r};qe.deserializeAws_restJson1GetRoleCredentialsCommand=g2;var w2=async(e,t)=>{let r={...e,body:await dp(e.body,t)},n=up(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await ip(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await kg(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await sp(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await op(r,t);default:let i=r.body;(0,V.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:np.SSOServiceException,errorCode:n})}},E2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return v2(e,t);let r=Ye({$metadata:Vn(e)}),n=(0,V.expectNonNull)((0,V.expectObject)(await cp(e.body,t)),"body");return n.nextToken!=null&&(r.nextToken=(0,V.expectString)(n.nextToken)),n.roleList!=null&&(r.roleList=P2(n.roleList,t)),r};qe.deserializeAws_restJson1ListAccountRolesCommand=E2;var v2=async(e,t)=>{let r={...e,body:await dp(e.body,t)},n=up(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await ip(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await kg(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await sp(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await op(r,t);default:let i=r.body;(0,V.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:np.SSOServiceException,errorCode:n})}},S2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return N2(e,t);let r=Ye({$metadata:Vn(e)}),n=(0,V.expectNonNull)((0,V.expectObject)(await cp(e.body,t)),"body");return n.accountList!=null&&(r.accountList=T2(n.accountList,t)),n.nextToken!=null&&(r.nextToken=(0,V.expectString)(n.nextToken)),r};qe.deserializeAws_restJson1ListAccountsCommand=S2;var N2=async(e,t)=>{let r={...e,body:await dp(e.body,t)},n=up(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await ip(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await kg(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await sp(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await op(r,t);default:let i=r.body;(0,V.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:np.SSOServiceException,errorCode:n})}},b2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return x2(e,t);let r=Ye({$metadata:Vn(e)});return await TA(e.body,t),r};qe.deserializeAws_restJson1LogoutCommand=b2;var x2=async(e,t)=>{let r={...e,body:await dp(e.body,t)},n=up(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await ip(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await sp(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await op(r,t);default:let i=r.body;(0,V.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:np.SSOServiceException,errorCode:n})}},Ye=V.map,ip=async(e,t)=>{let r=Ye({}),n=e.body;n.message!=null&&(r.message=(0,V.expectString)(n.message));let i=new rp.InvalidRequestException({$metadata:Vn(e),...r});return(0,V.decorateServiceException)(i,e.body)},kg=async(e,t)=>{let r=Ye({}),n=e.body;n.message!=null&&(r.message=(0,V.expectString)(n.message));let i=new rp.ResourceNotFoundException({$metadata:Vn(e),...r});return(0,V.decorateServiceException)(i,e.body)},sp=async(e,t)=>{let r=Ye({}),n=e.body;n.message!=null&&(r.message=(0,V.expectString)(n.message));let i=new rp.TooManyRequestsException({$metadata:Vn(e),...r});return(0,V.decorateServiceException)(i,e.body)},op=async(e,t)=>{let r=Ye({}),n=e.body;n.message!=null&&(r.message=(0,V.expectString)(n.message));let i=new rp.UnauthorizedException({$metadata:Vn(e),...r});return(0,V.decorateServiceException)(i,e.body)},A2=(e,t)=>({accountId:(0,V.expectString)(e.accountId),accountName:(0,V.expectString)(e.accountName),emailAddress:(0,V.expectString)(e.emailAddress)}),T2=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:A2(n,t)),C2=(e,t)=>({accessKeyId:(0,V.expectString)(e.accessKeyId),expiration:(0,V.expectLong)(e.expiration),secretAccessKey:(0,V.expectString)(e.secretAccessKey),sessionToken:(0,V.expectString)(e.sessionToken)}),O2=(e,t)=>({accountId:(0,V.expectString)(e.accountId),roleName:(0,V.expectString)(e.roleName)}),P2=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:O2(n,t)),Vn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),TA=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),I2=(e,t)=>TA(e,t).then(r=>t.utf8Encoder(r)),ap=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),cp=(e,t)=>I2(e,t).then(r=>r.length?JSON.parse(r):{}),dp=async(e,t)=>{let r=await cp(e,t);return r.message=r.message??r.Message,r},up=(e,t)=>{let r=(s,o)=>Object.keys(s).find(a=>a.toLowerCase()===o.toLowerCase()),n=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var Fg=d(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.GetRoleCredentialsCommand=void 0;var R2=Z(),q2=fe(),M2=R(),CA=qi(),OA=Sa(),Dg=class e extends M2.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,q2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,R2.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:CA.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:CA.GetRoleCredentialsResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,OA.serializeAws_restJson1GetRoleCredentialsCommand)(t,r)}deserialize(t,r){return(0,OA.deserializeAws_restJson1GetRoleCredentialsCommand)(t,r)}};lp.GetRoleCredentialsCommand=Dg});var fp=d(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.ListAccountRolesCommand=void 0;var k2=Z(),D2=fe(),F2=R(),PA=qi(),IA=Sa(),Lg=class e extends F2.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,D2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,k2.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:PA.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:PA.ListAccountRolesResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,IA.serializeAws_restJson1ListAccountRolesCommand)(t,r)}deserialize(t,r){return(0,IA.deserializeAws_restJson1ListAccountRolesCommand)(t,r)}};pp.ListAccountRolesCommand=Lg});var hp=d(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.ListAccountsCommand=void 0;var L2=Z(),z2=fe(),U2=R(),RA=qi(),qA=Sa(),zg=class e extends U2.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,z2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,L2.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:RA.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:RA.ListAccountsResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,qA.serializeAws_restJson1ListAccountsCommand)(t,r)}deserialize(t,r){return(0,qA.deserializeAws_restJson1ListAccountsCommand)(t,r)}};mp.ListAccountsCommand=zg});var Wg=d(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.LogoutCommand=void 0;var W2=Z(),j2=fe(),V2=R(),B2=qi(),MA=Sa(),Ug=class e extends V2.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,j2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,W2.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:B2.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:p=>p},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,MA.serializeAws_restJson1LogoutCommand)(t,r)}deserialize(t,r){return(0,MA.deserializeAws_restJson1LogoutCommand)(t,r)}};_p.LogoutCommand=Ug});var kA=d(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.resolveClientEndpointParameters=void 0;var $2=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});yp.resolveClientEndpointParameters=$2});var DA=d((bpe,H2)=>{H2.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Na=d(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.Hash=void 0;var jg=Ms(),G2=Yr(),J2=z("buffer"),FA=z("crypto"),Vg=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update((0,G2.toUint8Array)(LA(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,FA.createHmac)(this.algorithmIdentifier,LA(this.secret)):(0,FA.createHash)(this.algorithmIdentifier)}};gp.Hash=Vg;function LA(e,t){return J2.Buffer.isBuffer(e)?e:typeof e=="string"?(0,jg.fromString)(e,t):ArrayBuffer.isView(e)?(0,jg.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength):(0,jg.fromArrayBuffer)(e)}});var $g=d(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.buildQueryString=void 0;var Bg=my();function Q2(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,Bg.escapeUri)(r),Array.isArray(n))for(let i=0,s=n.length;i<s;i++)t.push(`${r}=${(0,Bg.escapeUri)(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${(0,Bg.escapeUri)(n)}`),t.push(i)}}return t.join("&")}wp.buildQueryString=Q2});var zA=d(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.NODEJS_TIMEOUT_ERROR_CODES=void 0;Ep.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Hg=d(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.getTransformedHeaders=void 0;var K2=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};vp.getTransformedHeaders=K2});var UA=d(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.setConnectionTimeout=void 0;var Y2=(e,t,r=0)=>{r&&e.on("socket",n=>{if(n.connecting){let i=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);n.on("connect",()=>{clearTimeout(i)})}})};Sp.setConnectionTimeout=Y2});var WA=d(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.setSocketTimeout=void 0;var X2=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};Np.setSocketTimeout=X2});var Gg=d(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.writeRequestBody=void 0;var Z2=z("stream");function e$(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{jA(e,t.body)}):jA(e,t.body)}bp.writeRequestBody=e$;function jA(e,t){t instanceof Z2.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}});var $A=d(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.NodeHttpHandler=void 0;var t$=Ke(),r$=$g(),VA=z("http"),BA=z("https"),n$=zA(),i$=Hg(),s$=UA(),o$=WA(),a$=Gg(),Jg=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(this.resolveDefaultConfig(i))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{connectionTimeout:r,socketTimeout:n,httpAgent:i,httpsAgent:s}=t||{},o=!0,a=50;return{connectionTimeout:r,socketTimeout:n,httpAgent:i||new VA.Agent({keepAlive:o,maxSockets:a}),httpsAgent:s||new BA.Agent({keepAlive:o,maxSockets:a})}}destroy(){var t,r,n,i;(r=(t=this.config)===null||t===void 0?void 0:t.httpAgent)===null||r===void 0||r.destroy(),(i=(n=this.config)===null||n===void 0?void 0:n.httpsAgent)===null||i===void 0||i.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,i)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let p=new Error("Request aborted");p.name="AbortError",i(p);return}let s=t.protocol==="https:",o=(0,r$.buildQueryString)(t.query||{}),a={headers:t.headers,host:t.hostname,method:t.method,path:o?`${t.path}?${o}`:t.path,port:t.port,agent:s?this.config.httpsAgent:this.config.httpAgent},l=(s?BA.request:VA.request)(a,p=>{let f=new t$.HttpResponse({statusCode:p.statusCode||-1,headers:(0,i$.getTransformedHeaders)(p.headers),body:p});n({response:f})});l.on("error",p=>{n$.NODEJS_TIMEOUT_ERROR_CODES.includes(p.code)?i(Object.assign(p,{name:"TimeoutError"})):i(p)}),(0,s$.setConnectionTimeout)(l,i,this.config.connectionTimeout),(0,o$.setSocketTimeout)(l,i,this.config.socketTimeout),r&&(r.onabort=()=>{l.abort();let p=new Error("Request aborted");p.name="AbortError",i(p)}),(0,a$.writeRequestBody)(l,t)})}};xp.NodeHttpHandler=Jg});var HA=d(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.NodeHttp2Handler=void 0;var c$=Ke(),d$=$g(),Qg=z("http2"),u$=Hg(),l$=Gg(),Kg=class{constructor(t){this.metadata={handlerProtocol:"h2"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(i||{})}).catch(n):r(t||{})}),this.sessionCache=new Map}destroy(){for(let t of this.sessionCache.values())t.forEach(r=>this.destroySession(r));this.sessionCache.clear()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let{requestTimeout:n,disableConcurrentStreams:i}=this.config;return new Promise((s,o)=>{let a=!1;if(r?.aborted){a=!0;let Ee=new Error("Request aborted");Ee.name="AbortError",o(Ee);return}let{hostname:u,method:l,port:p,protocol:f,path:m,query:h}=t,g=`${f}//${u}${p?`:${p}`:""}`,y=this.getSession(g,i||!1),v=Ee=>{i&&this.destroySession(y),a=!0,o(Ee)},X=(0,d$.buildQueryString)(h||{}),Oe=y.request({...t.headers,[Qg.constants.HTTP2_HEADER_PATH]:X?`${m}?${X}`:m,[Qg.constants.HTTP2_HEADER_METHOD]:l});y.ref(),Oe.on("response",Ee=>{let gc=new c$.HttpResponse({statusCode:Ee[":status"]||-1,headers:(0,u$.getTransformedHeaders)(Ee),body:Oe});a=!0,s({response:gc}),i&&(y.close(),this.deleteSessionFromCache(g,y))}),n&&Oe.setTimeout(n,()=>{Oe.close();let Ee=new Error(`Stream timed out because of no activity for ${n} ms`);Ee.name="TimeoutError",v(Ee)}),r&&(r.onabort=()=>{Oe.close();let Ee=new Error("Request aborted");Ee.name="AbortError",v(Ee)}),Oe.on("frameError",(Ee,gc,mv)=>{v(new Error(`Frame type id ${Ee} in stream id ${mv} has failed with code ${gc}.`))}),Oe.on("error",v),Oe.on("aborted",()=>{v(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Oe.rstCode}.`))}),Oe.on("close",()=>{y.unref(),i&&y.destroy(),a||v(new Error("Unexpected error: http2 request did not get a response"))}),(0,l$.writeRequestBody)(Oe,t)})}getSession(t,r){var n;let i=this.sessionCache,s=i.get(t)||[];if(s.length>0&&!r)return s[0];let o=(0,Qg.connect)(t);o.unref();let a=()=>{this.destroySession(o),this.deleteSessionFromCache(t,o)};return o.on("goaway",a),o.on("error",a),o.on("frameError",a),o.on("close",()=>this.deleteSessionFromCache(t,o)),!((n=this.config)===null||n===void 0)&&n.sessionTimeout&&o.setTimeout(this.config.sessionTimeout,a),s.push(o),i.set(t,s),o}destroySession(t){t.destroyed||t.destroy()}deleteSessionFromCache(t,r){let n=this.sessionCache.get(t)||[];n.includes(r)&&this.sessionCache.set(t,n.filter(i=>i!==r))}};Ap.NodeHttp2Handler=Kg});var GA=d(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.Collector=void 0;var p$=z("stream"),Yg=class extends p$.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};Tp.Collector=Yg});var JA=d(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.streamCollector=void 0;var f$=GA(),m$=e=>new Promise((t,r)=>{let n=new f$.Collector;e.pipe(n),e.on("error",i=>{n.end(),r(i)}),n.on("error",r),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.bufferedBytes));t(i)})});Cp.streamCollector=m$});var xa=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var Xg=(b(),S(N));Xg.__exportStar($A(),ba);Xg.__exportStar(HA(),ba);Xg.__exportStar(JA(),ba)});var KA=d(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.calculateBodyLength=void 0;var QA=z("fs"),h$=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,QA.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,QA.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};Op.calculateBodyLength=h$});var Aa=d(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});var _$=(b(),S(N));_$.__exportStar(KA(),Zg)});var Pp=d(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.newLiftedPromise=js.makeSelfCleaningPromise=void 0;function y$(e,t){return t?e.finally(()=>{t()}):e}js.makeSelfCleaningPromise=y$;function g$(e){let t,r,n=new Promise((i,s)=>{t=i,r=s});if(!t||!r)throw new Error("Failed to bind resolve and reject when making lifted promise");return e&&e(t,r),{promise:n,resolve:t,reject:r}}js.newLiftedPromise=g$});var XA=d(Me=>{"use strict";var w$=Me&&Me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),E$=Me&&Me.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v$=Me&&Me.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&w$(t,e,r);return E$(t,e),t};Object.defineProperty(Me,"__esModule",{value:!0});Me.newCancellablePromiseFromNextEvent=Me.CancelController=Me.EVENT_NAME=void 0;var S$=z("events"),YA=v$(Pp());Me.EVENT_NAME="cancelled";var ew=class{constructor(t){this.cancelled=!1,t&&t.emitterFactory?this.emitter=t.emitterFactory():this.emitter=new S$.EventEmitter}cancel(){this.cancelled||(this.cancelled=!0,this.emitter.emit(Me.EVENT_NAME),this.emitter.removeAllListeners(Me.EVENT_NAME))}hasBeenCancelled(){return this.cancelled}addListener(t){if(this.cancelled){t();return}return this.emitter.on(Me.EVENT_NAME,t),()=>{this.emitter.removeListener(Me.EVENT_NAME,t)}}};Me.CancelController=ew;function N$(e){let t,r,n=YA.newLiftedPromise();return t=i=>{try{e.eventDataTransformer?n.resolve(e.eventDataTransformer(i)):n.resolve(i)}catch(s){n.reject(s)}},e.emitter.addListener(e.eventName,t),e.cancelController&&(r=e.cancelController.addListener(()=>{n.reject(e.cancelMessage)})),YA.makeSelfCleaningPromise(n.promise,()=>{t&&e.emitter.removeListener(e.eventName,t),r&&r()})}Me.newCancellablePromiseFromNextEvent=N$});var ZA=d((Wpe,b$)=>{b$.exports={name:"aws-crt",version:"1.18.0",description:"NodeJS/browser bindings to the aws-c-* libraries",homepage:"https://github.com/awslabs/aws-crt-nodejs",repository:{type:"git",url:"git+https://github.com/awslabs/aws-crt-nodejs.git"},contributors:["AWS Common Runtime Team <aws-sdk-common-runtime@amazon.com>"],license:"Apache-2.0",main:"./dist/index.js",browser:"./dist.browser/browser.js",types:"./dist/index.d.ts",scripts:{tsc:"node ./scripts/tsc.js",test:"npm run test:native","test:node":"npm run test:native","test:native":"npx jest --runInBand --verbose --config test/native/jest.config.js --forceExit","test:browser":"npx jest --runInBand --verbose --config test/browser/jest.config.js --forceExit","test:browser:ci":"npm run install:puppeteer && npm run test:browser","install:puppeteer":"npm install --save-dev jest-puppeteer puppeteer @types/puppeteer",prepare:"node ./scripts/tsc.js && node ./scripts/install.js",install:"node ./scripts/install.js"},devDependencies:{"@types/crypto-js":"^3.1.43","@types/jest":"^27.0.1","@types/node":"^10.17.54","@types/prettier":"2.6.0","@types/puppeteer":"^5.4.7","@types/uuid":"^3.4.8","@types/ws":"^7.4.7","aws-sdk":"^2.848.0","https-proxy-agent":"^5.0.1",jest:"^27.2.1","jest-puppeteer":"^5.0.4","jest-runtime":"^27.2.1",puppeteer:"^3.3.0","ts-jest":"^27.0.5",typedoc:"^0.22.18","typedoc-plugin-merge-modules":"^3.1.0",typescript:"^4.7.4",uuid:"^8.3.2",yargs:"^17.2.1","cmake-js":"^6.3.2",tar:"^6.1.11"},dependencies:{"@aws-sdk/util-utf8-browser":"^3.109.0","@httptoolkit/websocket-stream":"^6.0.0",axios:"^0.24.0",buffer:"^6.0.3","crypto-js":"^4.0.0",mqtt:"^4.3.7",process:"^0.11.10"}}});var Ip=d(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.crt_version=Sr.package_info=Sr.is_browser=Sr.is_nodejs=void 0;function eT(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}Sr.is_nodejs=eT;function x$(){return!eT()}Sr.is_browser=x$;function tT(){try{return ZA()}catch{return{name:"aws-crt-nodejs",version:"UNKNOWN"}}}Sr.package_info=tT;function A$(){return tT().version}Sr.crt_version=A$});var rT=d(Vs=>{"use strict";var T$=Vs&&Vs.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.using=void 0;function C$(e,t){return T$(this,void 0,void 0,function*(){try{yield t(e)}finally{e.close()}})}Vs.using=C$});var Jt=d(Xe=>{"use strict";var O$=Xe&&Xe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),P$=Xe&&Xe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),I$=Xe&&Xe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&O$(t,e,r);return P$(t,e),t},R$=Xe&&Xe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.cRuntime=Xe.CRuntimeType=void 0;var Rp=I$(z("path")),tw=z("os"),oT=z("fs"),nT=z("process"),q$=R$(z("child_process")),Bs=Object.freeze({NON_LINUX:"cruntime",MUSL:"musl",GLIBC:"glibc"});Xe.CRuntimeType=Bs;function M$(){if((0,tw.platform)()!=="linux")return Bs.NON_LINUX;try{let e=q$.default.spawnSync("ldd",["--version"],{encoding:"utf8"});return(e.stdout+e.stderr).includes(Bs.MUSL)?Bs.MUSL:Bs.GLIBC}catch{return Bs.GLIBC}}var iT="Please upgrade to node >=10.16.0, or use the provided browser implementation.";if("napi"in nT.versions){if(parseInt(nT.versions.napi)<4)throw new Error("The AWS CRT native implementation requires that NAPI version 4 be present. "+iT)}else throw new Error("The current runtime is not reporting an NAPI version. "+iT);var aT=M$();Xe.cRuntime=aT;var k$="aws-crt-nodejs",D$=`${tw.platform}-${tw.arch}-${aT}`,rw=Rp.resolve(__dirname,"..",".."),sT=Rp.join(rw,"dist");(0,oT.existsSync)(sT)&&(rw=sT);var F$=Rp.resolve(rw,"bin"),cT=[Rp.join(F$,D$,k$)],nw;for(let e of cT)if((0,oT.existsSync)(e+".node")){nw=z(e);break}if(nw==null)throw new Error(`AWS CRT binary not present in any of the following locations:
	`+cT.join(`
	`));Xe.default=nw});var Qt=d(Hs=>{"use strict";var L$=Hs&&Hs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.CrtError=void 0;var dT=L$(Jt()),$s=class extends Error{constructor(t){super(z$(t)),this.error=t,this.error_code=U$(t),this.error_name=W$(t)}};Hs.CrtError=$s;function z$(e){return typeof e=="number"?dT.default.error_code_to_string(e):e instanceof $s?e.message:e.toString()}function U$(e){if(typeof e=="number")return e;if(e instanceof $s)return e.error_code}function W$(e){if(typeof e=="number")return dT.default.error_code_to_name(e);if(e instanceof $s)return e.error_name}});var Mi=d(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.NativeResourceMixin=Gs.NativeResource=void 0;var iw=class{constructor(t){this.handle=t}native_handle(){return this.handle}};Gs.NativeResource=iw;function j$(e){return class extends e{constructor(...t){let r=t.shift();super(...t),this._handle=r}_super(t){this._handle=t}native_handle(){return this._handle}}}Gs.NativeResourceMixin=j$});var sw=d(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.SocketDomain=Kt.SocketType=Kt.TlsVersion=void 0;var V$;(function(e){e[e.SSLv3=0]="SSLv3",e[e.TLSv1=1]="TLSv1",e[e.TLSv1_1=2]="TLSv1_1",e[e.TLSv1_2=3]="TLSv1_2",e[e.TLSv1_3=4]="TLSv1_3",e[e.Default=128]="Default"})(V$=Kt.TlsVersion||(Kt.TlsVersion={}));var B$;(function(e){e[e.STREAM=0]="STREAM",e[e.DGRAM=1]="DGRAM"})(B$=Kt.SocketType||(Kt.SocketType={}));var $$;(function(e){e[e.IPV4=0]="IPV4",e[e.IPV6=1]="IPV6",e[e.LOCAL=2]="LOCAL"})($$=Kt.SocketDomain||(Kt.SocketDomain={}))});var rn=d(k=>{"use strict";var H$=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});k.Pkcs11Lib=k.TlsConnectionOptions=k.ServerTlsContext=k.ClientTlsContext=k.TlsContext=k.TlsContextOptions=k.SocketOptions=k.ClientBootstrap=k.InputStream=k.is_alpn_available=k.enable_logging=k.LogLevel=k.error_code_to_name=k.error_code_to_string=k.SocketDomain=k.SocketType=k.TlsVersion=void 0;var Nt=H$(Jt()),Js=Mi(),ow=sw(),fw=sw();Object.defineProperty(k,"TlsVersion",{enumerable:!0,get:function(){return fw.TlsVersion}});Object.defineProperty(k,"SocketType",{enumerable:!0,get:function(){return fw.SocketType}});Object.defineProperty(k,"SocketDomain",{enumerable:!0,get:function(){return fw.SocketDomain}});var uT=Qt();function G$(e){return Nt.default.error_code_to_string(e)}k.error_code_to_string=G$;function J$(e){return Nt.default.error_code_to_name(e)}k.error_code_to_name=J$;var Q$;(function(e){e[e.NONE=0]="NONE",e[e.FATAL=1]="FATAL",e[e.ERROR=2]="ERROR",e[e.WARN=3]="WARN",e[e.INFO=4]="INFO",e[e.DEBUG=5]="DEBUG",e[e.TRACE=6]="TRACE"})(Q$=k.LogLevel||(k.LogLevel={}));function K$(e){Nt.default.io_logging_enable(e)}k.enable_logging=K$;function Y$(){return Nt.default.is_alpn_available()}k.is_alpn_available=Y$;var aw=class extends Js.NativeResource{constructor(t){super(Nt.default.io_input_stream_new(16*1024)),this.source=t,this.source.on("data",r=>{r=Buffer.isBuffer(r)?r:Buffer.from(r.toString()),Nt.default.io_input_stream_append(this.native_handle(),r)}),this.source.on("end",()=>{Nt.default.io_input_stream_append(this.native_handle(),void 0)})}};k.InputStream=aw;var cw=class extends Js.NativeResource{constructor(){super(Nt.default.io_client_bootstrap_new())}};k.ClientBootstrap=cw;var dw=class extends Js.NativeResource{constructor(t=ow.SocketType.STREAM,r=ow.SocketDomain.IPV6,n=5e3,i=!1,s=0,o=0,a=0){super(Nt.default.io_socket_options_new(t,r,n,s,o,a,i))}};k.SocketOptions=dw;var Ta=class e{constructor(){this.min_tls_version=ow.TlsVersion.Default,this.alpn_list=[],this.verify_peer=!0}override_default_trust_store_from_path(t,r){this.ca_dirpath=t,this.ca_filepath=r}override_default_trust_store(t){this.certificate_authority=t}static create_client_with_mtls(t,r){let n=new e;return n.certificate=t,n.private_key=r,n.verify_peer=!0,n}static create_client_with_mtls_from_path(t,r){let n=new e;return n.certificate_filepath=t,n.private_key_filepath=r,n.verify_peer=!0,n}static create_client_with_mtls_pkcs12_from_path(t,r){let n=new e;return n.pkcs12_filepath=t,n.pkcs12_password=r,n.verify_peer=!0,n}static create_client_with_mtls_pkcs_from_path(t,r){return this.create_client_with_mtls_pkcs12_from_path(t,r)}static create_client_with_mtls_pkcs11(t){let r=new e;return r.pkcs11_options=t,r.verify_peer=!0,r}static create_client_with_mtls_windows_cert_store_path(t){let r=new e;return r.windows_cert_store_path=t,r.verify_peer=!0,r}static create_server_with_mtls_from_path(t,r){let n=new e;return n.certificate_filepath=t,n.private_key_filepath=r,n.verify_peer=!1,n}static create_server_with_mtls_pkcs_from_path(t,r){let n=new e;return n.pkcs12_filepath=t,n.pkcs12_password=r,n.verify_peer=!1,n}};k.TlsContextOptions=Ta;var Ca=class extends Js.NativeResource{constructor(t){if(t==null||t==null)throw new uT.CrtError("TlsContext constructor: ctx_opt not defined");super(Nt.default.io_tls_ctx_new(t.min_tls_version,t.ca_filepath,t.ca_dirpath,t.certificate_authority,t.alpn_list&&t.alpn_list.length>0?t.alpn_list.join(";"):void 0,t.certificate_filepath,t.certificate,t.private_key_filepath,t.private_key,t.pkcs12_filepath,t.pkcs12_password,t.pkcs11_options,t.windows_cert_store_path,t.verify_peer))}};k.TlsContext=Ca;var uw=class extends Ca{constructor(t){t||(t=new Ta,t.verify_peer=!0),super(t)}};k.ClientTlsContext=uw;var lw=class extends Ca{constructor(t){t||(t=new Ta,t.verify_peer=!1),super(t)}};k.ServerTlsContext=lw;var pw=class extends Js.NativeResource{constructor(t,r,n=[]){if(t==null||t==null)throw new uT.CrtError("TlsConnectionOptions constructor: tls_ctx not defined");super(Nt.default.io_tls_connection_options_new(t.native_handle(),r,n&&n.length>0?n.join(";"):void 0)),this.tls_ctx=t,this.server_name=r,this.alpn_list=n}};k.TlsConnectionOptions=pw;var qp=class e extends Js.NativeResource{constructor(t,r=e.InitializeFinalizeBehavior.DEFAULT){super(Nt.default.io_pkcs11_lib_new(t,r))}close(){Nt.default.io_pkcs11_lib_close(this.native_handle())}};k.Pkcs11Lib=qp;(function(e){let t;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.OMIT=1]="OMIT",r[r.STRICT=2]="STRICT"})(t=e.InitializeFinalizeBehavior||(e.InitializeFinalizeBehavior={}))})(qp=k.Pkcs11Lib||(k.Pkcs11Lib={}))});var Mp=d(ae=>{"use strict";var X$=ae&&ae.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},Z$=ae&&ae.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});ae.aws_verify_sigv4a_signing=ae.aws_sign_request=ae.AwsSignedBodyHeaderType=ae.AwsSignedBodyValue=ae.AwsSignatureType=ae.AwsSigningAlgorithm=ae.AwsCredentialsProvider=void 0;var _w=Z$(Jt()),mw=Qt(),eH=rn(),hw=class extends _w.default.AwsCredentialsProvider{static newDefault(t=void 0){return super.newDefault(t!=null?t.native_handle():null)}static newStatic(t,r,n){return super.newStatic(t,r,n)}static newCognito(t){if(t==null||t==null)throw new mw.CrtError("AwsCredentialsProvider newCognito: Cognito config not defined");return super.newCognito(t,t.tlsContext!=null?t.tlsContext.native_handle():new eH.ClientTlsContext().native_handle(),t.bootstrap!=null?t.bootstrap.native_handle():null,t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null)}static newX509(t){if(t==null||t==null)throw new mw.CrtError("AwsCredentialsProvider newX509: X509 config not defined");return super.newX509(t,t.tlsContext.native_handle(),t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null)}};ae.AwsCredentialsProvider=hw;var tH;(function(e){e[e.SigV4=0]="SigV4",e[e.SigV4Asymmetric=1]="SigV4Asymmetric"})(tH=ae.AwsSigningAlgorithm||(ae.AwsSigningAlgorithm={}));var rH;(function(e){e[e.HttpRequestViaHeaders=0]="HttpRequestViaHeaders",e[e.HttpRequestViaQueryParams=1]="HttpRequestViaQueryParams",e[e.HttpRequestChunk=2]="HttpRequestChunk",e[e.HttpRequestEvent=3]="HttpRequestEvent"})(rH=ae.AwsSignatureType||(ae.AwsSignatureType={}));var nH;(function(e){e.EmptySha256="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",e.UnsignedPayload="UNSIGNED-PAYLOAD",e.StreamingAws4HmacSha256Payload="STREAMING-AWS4-HMAC-SHA256-PAYLOAD",e.StreamingAws4HmacSha256Events="STREAMING-AWS4-HMAC-SHA256-EVENTS"})(nH=ae.AwsSignedBodyValue||(ae.AwsSignedBodyValue={}));var iH;(function(e){e[e.None=0]="None",e[e.XAmzContentSha256=1]="XAmzContentSha256"})(iH=ae.AwsSignedBodyHeaderType||(ae.AwsSignedBodyHeaderType={}));function sH(e,t){return X$(this,void 0,void 0,function*(){return new Promise((r,n)=>{try{_w.default.aws_sign_request(e,t,i=>{i==0?r(e):n(new mw.CrtError(i))})}catch(i){n(i)}})})}ae.aws_sign_request=sH;function oH(e,t,r,n,i,s){return _w.default.aws_verify_sigv4a_signing(e,t,r,n,i,s)}ae.aws_verify_sigv4a_signing=oH});var pT=d(Bn=>{"use strict";var aH=Bn&&Bn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.crc32c=Bn.crc32=void 0;var lT=aH(Jt());function cH(e,t){return lT.default.checksums_crc32(e,t)}Bn.crc32=cH;function dH(e,t){return lT.default.checksums_crc32c(e,t)}Bn.crc32c=dH});var mT=d($n=>{"use strict";var uH=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.native_memory_dump=$n.native_memory=void 0;var fT=uH(Jt());function lH(){return fT.default.native_memory()}$n.native_memory=lH;function pH(){return fT.default.native_memory_dump()}$n.native_memory_dump=pH});var _T=d(xe=>{"use strict";var fH=xe&&xe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xe,"__esModule",{value:!0});xe.hmac_sha256=xe.Sha256Hmac=xe.hash_sha1=xe.Sha1Hash=xe.hash_sha256=xe.Sha256Hash=xe.hash_md5=xe.Md5Hash=void 0;var kt=fH(Jt()),hT=Mi(),Oa=class extends hT.NativeResource{update(t){kt.default.hash_update(this.native_handle(),t)}finalize(t){return kt.default.hash_digest(this.native_handle(),t)}constructor(t){super(t)}},yw=class extends Oa{constructor(){super(kt.default.hash_md5_new())}};xe.Md5Hash=yw;function mH(e,t){return kt.default.hash_md5_compute(e,t)}xe.hash_md5=mH;var gw=class extends Oa{constructor(){super(kt.default.hash_sha256_new())}};xe.Sha256Hash=gw;function hH(e,t){return kt.default.hash_sha256_compute(e,t)}xe.hash_sha256=hH;var ww=class extends Oa{constructor(){super(kt.default.hash_sha1_new())}};xe.Sha1Hash=ww;function _H(e,t){return kt.default.hash_sha1_compute(e,t)}xe.hash_sha1=_H;var Ew=class extends hT.NativeResource{update(t){kt.default.hmac_update(this.native_handle(),t)}finalize(t){return kt.default.hmac_digest(this.native_handle(),t)}constructor(t){super(t)}},vw=class extends Ew{constructor(t){super(kt.default.hmac_sha256_new(t))}};xe.Sha256Hmac=vw;function yH(e,t,r){return kt.default.hmac_sha256_compute(e,t,r)}xe.hmac_sha256=yH});var Pa=d(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.BufferedEventEmitter=void 0;var gH=z("events"),Sw=class{constructor(t,r){this.event=t,this.args=r}},Nw=class extends gH.EventEmitter{constructor(){super(),this.corked=!1}cork(){this.corked=!0}uncork(){for(this.corked=!1;this.eventQueue;){let t=this.eventQueue;super.emit(t.event,...t.args),this.eventQueue=this.eventQueue.next}}emit(t,...r){if(this.corked){let n=this.lastQueuedEvent;return this.lastQueuedEvent=new Sw(t,r),n?n.next=this.lastQueuedEvent:this.eventQueue=this.lastQueuedEvent,this.listeners(t).length>0}return super.emit(t,...r)}};kp.BufferedEventEmitter=Nw});var gT=d(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.unmarshalInt64BigintFromBuffer=ce.marshalInt64BigintAsBuffer=ce.MIN_INT64=ce.MAX_INT64=ce.MIN_INT32=ce.MAX_INT32=ce.MIN_INT16=ce.MAX_INT16=ce.MIN_INT8=ce.MAX_INT8=void 0;var yT=Qt();ce.MAX_INT8=127;ce.MIN_INT8=-128;ce.MAX_INT16=32767;ce.MIN_INT16=-32768;ce.MAX_INT32=2147483647;ce.MIN_INT32=-2147483648;ce.MAX_INT64=BigInt("9223372036854775807");ce.MIN_INT64=BigInt("-9223372036854775808");var Qs=BigInt("256");function wH(e){if(e<ce.MIN_INT64||e>ce.MAX_INT64)throw new yT.CrtError("marshalInt64BigintAsBuffer expects a value that can fit in 8 bytes");let t=new Uint8Array(8);if(e<0){e=-e-BigInt(1);for(let r=0;r<8;++r)t[r]=255-Number(e%Qs),e/=Qs}else for(let r=0;r<8;++r)t[r]=Number(e%Qs),e/=Qs;return t}ce.marshalInt64BigintAsBuffer=wH;function EH(e){let t=BigInt(0),r=new Uint8Array(e);if(r.length!=8)throw new yT.CrtError("unmarshalInt64BigintFromBuffer expects a byte buffer of length 8");let n=BigInt(1);if((r[7]&128)!=0){for(let s=0;s<r.length;++s){let o=BigInt(255-r[s]);t+=o*n,n*=Qs}t+=BigInt(1),t=-t}else for(let s=0;s<r.length;++s){let o=BigInt(r[s]);t+=o*n,n*=Qs}return t}ce.unmarshalInt64BigintFromBuffer=EH});var ST=d(K=>{"use strict";var vH=K&&K.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),SH=K&&K.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bw=K&&K.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&vH(t,e,r);return SH(t,e),t},Dp=K&&K.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},NH=K&&K.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(K,"__esModule",{value:!0});K.ClientStream=K.ClientConnection=K.MessageType=K.MessageFlags=K.Header=K.HeaderType=void 0;var wT=Mi(),ET=Pa(),ne=Qt(),Fp=bw(rn()),Yt=bw(gT()),Lp=bw(Pp()),Hn=NH(Jt()),me;(function(e){e[e.BooleanTrue=0]="BooleanTrue",e[e.BooleanFalse=1]="BooleanFalse",e[e.Byte=2]="Byte",e[e.Int16=3]="Int16",e[e.Int32=4]="Int32",e[e.Int64=5]="Int64",e[e.ByteBuffer=6]="ByteBuffer",e[e.String=7]="String",e[e.Timestamp=8]="Timestamp",e[e.UUID=9]="UUID"})(me=K.HeaderType||(K.HeaderType={}));var bH=127,zp=class e{constructor(t,r,n){this.name=t,this.type=r,this.value=n}static validateHeaderName(t){if(t.length==0||t.length>bH)throw new ne.CrtError(`Event stream header name (${t}) is not valid`)}static newBoolean(t,r){return e.validateHeaderName(t),r?new e(t,me.BooleanTrue):new e(t,me.BooleanFalse)}static newByte(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT8&&r<=Yt.MAX_INT8&&Number.isSafeInteger(r))return new e(t,me.Byte,r);throw new ne.CrtError(`Illegal value for eventstream byte-valued header: ${r}`)}static newInt16(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT16&&r<=Yt.MAX_INT16&&Number.isSafeInteger(r))return new e(t,me.Int16,r);throw new ne.CrtError(`Illegal value for eventstream int16-valued header: ${r}`)}static newInt32(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT32&&r<=Yt.MAX_INT32&&Number.isSafeInteger(r))return new e(t,me.Int32,r);throw new ne.CrtError(`Illegal value for eventstream int32-valued header: ${r}`)}static newInt64FromNumber(t,r){if(e.validateHeaderName(t),Number.isSafeInteger(r))return new e(t,me.Int64,Yt.marshalInt64BigintAsBuffer(BigInt(r)));throw new ne.CrtError(`Illegal value for eventstream int64-valued header: ${r}`)}static newInt64FromBigint(t,r){if(e.validateHeaderName(t),r>=Yt.MIN_INT64&&r<=Yt.MAX_INT64)return new e(t,me.Int64,Yt.marshalInt64BigintAsBuffer(r));throw new ne.CrtError(`Illegal value for eventstream int64-valued header: ${r}`)}static newByteBuffer(t,r){return e.validateHeaderName(t),new e(t,me.ByteBuffer,r)}static newString(t,r){return e.validateHeaderName(t),new e(t,me.String,r)}static newTimeStampFromSecondsSinceEpoch(t,r){if(e.validateHeaderName(t),Number.isSafeInteger(r)&&r>=0)return new e(t,me.Timestamp,r);throw new ne.CrtError(`Illegal value for eventstream timestamp-valued header: ${r}`)}static newTimeStampFromDate(t,r){e.validateHeaderName(t);let n=r.getTime();if(Number.isSafeInteger(n))return new e(t,me.Timestamp,n);throw new ne.CrtError(`Illegal value for eventstream timestamp-valued header: ${r}`)}static newUUID(t,r){if(e.validateHeaderName(t),r.byteLength==16)return new e(t,me.UUID,r);throw new ne.CrtError(`Illegal value for eventstream uuid-valued header: ${r}`)}toValue(t){if(t!=this.type)throw new ne.CrtError(`Header of type (${this.type}) cannot be converted to type (${t})`);return this.value}asBoolean(){switch(this.type){case me.BooleanFalse:return!1;case me.BooleanTrue:return!0;default:throw new ne.CrtError(`Header of type (${this.type}) cannot be converted to type (boolean)`)}}asByte(){return this.toValue(me.Byte)}asInt16(){return this.toValue(me.Int16)}asInt32(){return this.toValue(me.Int32)}asInt64(){return Yt.unmarshalInt64BigintFromBuffer(this.toValue(me.Int64))}asByteBuffer(){return this.toValue(me.ByteBuffer)}asString(){return this.toValue(me.String)}asTimestamp(){return this.toValue(me.Timestamp)}asUUID(){return this.toValue(me.UUID)}};K.Header=zp;var xH;(function(e){e[e.None=0]="None",e[e.ConnectionAccepted=1]="ConnectionAccepted",e[e.TerminateStream=2]="TerminateStream"})(xH=K.MessageFlags||(K.MessageFlags={}));var AH;(function(e){e[e.ApplicationMessage=0]="ApplicationMessage",e[e.ApplicationError=1]="ApplicationError",e[e.Ping=2]="Ping",e[e.PingResponse=3]="PingResponse",e[e.Connect=4]="Connect",e[e.ConnectAck=5]="ConnectAck",e[e.ProtocolError=6]="ProtocolError",e[e.InternalError=7]="InternalError"})(AH=K.MessageType||(K.MessageType={}));function TH(e){return Array.from(e,t=>new zp(t.name,t.type,t.value))}function vT(e){let t={type:e.type,flags:e.flags,payload:e.payload};return e.headers&&(t.headers=TH(e.headers)),t}var Ze;(function(e){e[e.None=0]="None",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Disconnected=3]="Disconnected",e[e.Closed=4]="Closed"})(Ze||(Ze={}));var Ia=class e extends(0,wT.NativeResourceMixin)(ET.BufferedEventEmitter){constructor(t){if(t===void 0)throw new ne.CrtError("Invalid configuration passed to eventstream ClientConnection constructor");super(),this.state=Ze.None,this._super(Hn.default.event_stream_client_connection_new(this,t,(r,n)=>{e._s_on_disconnect(r,n)},(r,n)=>{e._s_on_protocol_message(r,n)},t.socketOptions?t.socketOptions.native_handle():null,t.tlsCtx?t.tlsCtx.native_handle():null))}close(){this.state!=Ze.Closed&&(this.state=Ze.Closed,Hn.default.event_stream_client_connection_close(this.native_handle()))}connect(t){return Dp(this,void 0,void 0,function*(){let r,n=new Promise((i,s)=>{if(!t){s(new ne.CrtError("Invalid options passed to event stream ClientConnection.connect"));return}if(this.state!=Ze.None){s(new ne.CrtError(`Event stream connection in a state (${this.state}) where connect() is not allowed.`));return}if(this.state=Ze.Connecting,t.cancelController){let a=()=>{s(new ne.CrtError("Event stream connection connect() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}function o(a,u){return e._s_on_connection_setup(i,s,a,u)}try{Hn.default.event_stream_client_connection_connect(this.native_handle(),o)}catch(a){this.state=Ze.Disconnected,s(a)}});return Lp.makeSelfCleaningPromise(n,r)})}sendProtocolMessage(t){return Dp(this,void 0,void 0,function*(){let r,n=new Promise((i,s)=>{try{let o=function(a){return e._s_on_connection_send_protocol_message_completion(i,s,a)};if(!t){s(new ne.CrtError("Invalid options passed to event stream ClientConnection.sendProtocolMessage"));return}if(!this.isConnected()){s(new ne.CrtError(`Event stream connection in a state (${this.state}) where sending protocol messages is not allowed.`));return}if(t.cancelController){let a=()=>{s(new ne.CrtError("Event stream connection sendProtocolMessage() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}Hn.default.event_stream_client_connection_send_protocol_message(this.native_handle(),t,o)}catch(o){s(o)}});return Lp.makeSelfCleaningPromise(n,r)})}isConnected(){return this.state==Ze.Connected}newStream(){if(!this.isConnected())throw new ne.CrtError(`Event stream connection in a state (${this.state}) where creating new streams is forbidden.`);return new Ks(this)}on(t,r){return super.on(t,r),this}static _s_on_connection_setup(t,r,n,i){i==0&&n.state==Ze.Connecting?(n.state=Ze.Connected,t()):(n.state!=Ze.Closed&&(n.state=Ze.Disconnected),r(Fp.error_code_to_string(i)))}static _s_on_disconnect(t,r){t.state!=Ze.Closed&&(t.state=Ze.Disconnected),process.nextTick(()=>{t.emit("disconnection",{errorCode:r})})}static _s_on_protocol_message(t,r){process.nextTick(()=>{t.emit("protocolMessage",{message:vT(r)})})}static _s_on_connection_send_protocol_message_completion(t,r,n){n==0?t():r(Fp.error_code_to_string(n))}};K.ClientConnection=Ia;Ia.DISCONNECTION="disconnection";Ia.PROTOCOL_MESSAGE="protocolMessage";var et;(function(e){e[e.None=0]="None",e[e.Activating=1]="Activating",e[e.Activated=2]="Activated",e[e.Ended=3]="Ended",e[e.Closed=4]="Closed"})(et||(et={}));var Ks=class e extends(0,wT.NativeResourceMixin)(ET.BufferedEventEmitter){constructor(t){super(),this._super(Hn.default.event_stream_client_stream_new(this,t.native_handle(),r=>{e._s_on_stream_ended(r)},(r,n)=>{e._s_on_stream_message(r,n)})),this.state=et.None}close(){this.state!=et.Closed&&(this.state=et.Closed,Hn.default.event_stream_client_stream_close(this.native_handle()))}activate(t){return Dp(this,void 0,void 0,function*(){let r,n=new Promise((i,s)=>{try{let o=function(a,u){return e._s_on_stream_activated(i,s,a,u)};if(this.state!=et.None){s(new ne.CrtError(`Event stream in a state (${this.state}) where activation is not allowed.`));return}if(t===void 0){this.state=et.Ended,s(new ne.CrtError("Invalid options passed to ClientStream.activate"));return}if(this.state=et.Activating,t.cancelController){let a=()=>{s(new ne.CrtError("Event stream activate() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}Hn.default.event_stream_client_stream_activate(this.native_handle(),t,o)}catch(o){this.state=et.Ended,s(o)}});return Lp.makeSelfCleaningPromise(n,r)})}sendMessage(t){return Dp(this,void 0,void 0,function*(){let r,n=new Promise((i,s)=>{try{let o=function(a){return e._s_on_stream_send_message_completion(i,s,a)};if(!t){s(new ne.CrtError("Invalid options passed to ClientStream.sendMessage"));return}if(this.state!=et.Activated){s(new ne.CrtError(`Event stream in a state (${this.state}) where sending messages is not allowed.`));return}if(t.cancelController){let a=()=>{s(new ne.CrtError("Event stream sendMessage() cancelled by external request.")),setImmediate(()=>{this.close()})};if(r=t.cancelController.addListener(a),!r)return}Hn.default.event_stream_client_stream_send_message(this.native_handle(),t,o)}catch(o){s(o)}});return Lp.makeSelfCleaningPromise(n,r)})}isActive(){return this.state==et.Activated}on(t,r){return super.on(t,r),this}static _s_on_stream_activated(t,r,n,i){i==0&&n.state==et.Activating?(n.state=et.Activated,t()):(n.state!=et.Closed&&(n.state=et.Ended),r(Fp.error_code_to_string(i)))}static _s_on_stream_send_message_completion(t,r,n){n==0?t():r(Fp.error_code_to_string(n))}static _s_on_stream_ended(t){process.nextTick(()=>{t.emit(e.ENDED,{})})}static _s_on_stream_message(t,r){process.nextTick(()=>{t.emit(e.MESSAGE,{message:vT(r)})})}};K.ClientStream=Ks;Ks.ENDED="ended";Ks.MESSAGE="message"});var Aw=d(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.CommonHttpProxyOptions=Nr.HttpProxyAuthenticationType=Nr.HttpVersion=void 0;var CH;(function(e){e[e.Unknown=0]="Unknown",e[e.Http1_0=1]="Http1_0",e[e.Http1_1=2]="Http1_1",e[e.Http2=3]="Http2"})(CH=Nr.HttpVersion||(Nr.HttpVersion={}));var NT;(function(e){e[e.None=0]="None",e[e.Basic=1]="Basic"})(NT=Nr.HttpProxyAuthenticationType||(Nr.HttpProxyAuthenticationType={}));var xw=class{constructor(t,r,n=NT.None,i,s){this.host_name=t,this.port=r,this.auth_method=n,this.auth_username=i,this.auth_password=s}};Nr.CommonHttpProxyOptions=xw});var jp=d(te=>{"use strict";var OH=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.HttpClientConnectionManager=te.HttpClientStream=te.HttpStream=te.HttpClientConnection=te.HttpProxyOptions=te.HttpProxyConnectionType=te.HttpConnection=te.HttpRequest=te.HttpHeaders=te.HttpProxyAuthenticationType=void 0;var Dt=OH(Jt()),Pw=Mi(),ki=Qt(),bT=Aw(),PH=Aw();Object.defineProperty(te,"HttpProxyAuthenticationType",{enumerable:!0,get:function(){return PH.HttpProxyAuthenticationType}});var xT=Pa();te.HttpHeaders=Dt.default.HttpHeaders;var IH=Dt.default.HttpRequest,Tw=class extends IH{constructor(t,r,n,i){super(t,r,n,i?.native_handle())}};te.HttpRequest=Tw;var Di=class extends(0,Pw.NativeResourceMixin)(xT.BufferedEventEmitter){constructor(t){super(),this._super(t)}close(){Dt.default.http_connection_close(this.native_handle())}on(t,r){return super.on(t,r),t=="connect"&&process.nextTick(()=>{this.uncork()}),this}};te.HttpConnection=Di;Di.CONNECT="connect";Di.ERROR="error";Di.CLOSE="close";var AT;(function(e){e[e.Legacy=0]="Legacy",e[e.Forwarding=1]="Forwarding",e[e.Tunneling=2]="Tunneling"})(AT=te.HttpProxyConnectionType||(te.HttpProxyConnectionType={}));var Cw=class extends bT.CommonHttpProxyOptions{constructor(t,r,n=bT.HttpProxyAuthenticationType.None,i,s,o,a){super(t,r,n,i,s),this.tls_opts=o,this.connection_type=a}create_native_handle(){return Dt.default.http_proxy_options_new(this.host_name,this.port,this.auth_method,this.auth_username,this.auth_password,this.tls_opts?this.tls_opts.native_handle():void 0,this.connection_type?this.connection_type:AT.Legacy)}};te.HttpProxyOptions=Cw;var Up=class extends Di{constructor(t,r,n,i,s,o,a){if(i==null||i==null)throw new ki.CrtError("HttpClientConnection constructor: socket_options not defined");super(a||Dt.default.http_connection_new(t!=null?t.native_handle():null,(u,l)=>{this._on_setup(u,l)},(u,l)=>{this._on_shutdown(u,l)},r,n,i.native_handle(),s?s.native_handle():void 0,o?o.create_native_handle():void 0)),this.bootstrap=t,this.socket_options=i,this.tls_opts=s}_on_setup(t,r){if(r){this.emit("error",new ki.CrtError(r));return}this.emit("connect")}_on_shutdown(t,r){if(r){this.emit("error",new ki.CrtError(r));return}this.emit("close")}request(t){let r,n=(a,u)=>{r._on_response(a,u)},i=a=>{r._on_body(a)},s=a=>{r._on_complete(a)},o=Dt.default.http_stream_new(this.native_handle(),t,s,n,i);return r=new nn(o,this,t)}};te.HttpClientConnection=Up;var Wp=class extends(0,Pw.NativeResourceMixin)(xT.BufferedEventEmitter){constructor(t,r){super(),this.connection=r,this._super(t),this.cork()}activate(){Dt.default.http_stream_activate(this.native_handle())}close(){Dt.default.http_stream_close(this.native_handle())}_on_body(t){this.emit("data",t)}_on_complete(t){if(t){this.emit("error",new ki.CrtError(t)),this.close();return}this.on("end",()=>{this.close()}),this.emit("end")}};te.HttpStream=Wp;var nn=class extends Wp{constructor(t,r,n){super(t,r),this.request=n}status_code(){return this.response_status_code}on(t,r){return super.on(t,r),t=="response"&&process.nextTick(()=>{this.uncork()}),this}_on_response(t,r){this.response_status_code=t;let n=new te.HttpHeaders(r);this.emit("response",t,n)}};te.HttpClientStream=nn;nn.RESPONSE="response";nn.DATA="data";nn.ERROR="error";nn.END="end";nn.HEADERS="headers";var Ow=class extends Pw.NativeResource{constructor(t,r,n,i,s,o,a,u){if(o==null||o==null)throw new ki.CrtError("HttpClientConnectionManager constructor: socket_options not defined");super(Dt.default.http_connection_manager_new(t!=null?t.native_handle():null,r,n,i,s,o.native_handle(),a?a.native_handle():void 0,u?u.create_native_handle():void 0,void 0)),this.bootstrap=t,this.host=r,this.port=n,this.max_connections=i,this.initial_window_size=s,this.socket_options=o,this.tls_opts=a,this.proxy_options=u,this.connections=new Map}acquire(){return new Promise((t,r)=>{let n=(i,s)=>{if(s){r(new ki.CrtError(s));return}let o=this.connections.get(i);o||(o=new Up(this.bootstrap,this.host,this.port,this.socket_options,this.tls_opts,this.proxy_options,i),this.connections.set(i,o),o.on("close",()=>{this.connections.delete(i)})),t(o)};Dt.default.http_connection_manager_acquire(this.native_handle(),n)})}release(t){if(t==null||t==null)throw new ki.CrtError("HttpClientConnectionManager release: connection not defined");Dt.default.http_connection_manager_release(this.native_handle(),t.native_handle())}close(){Dt.default.http_connection_manager_close(this.native_handle())}};te.HttpClientConnectionManager=Ow});var Vp=d(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DEFAULT_RECONNECT_MIN_SEC=Xt.DEFAULT_RECONNECT_MAX_SEC=Xt.MqttWill=Xt.QoS=void 0;var RH;(function(e){e[e.AtMostOnce=0]="AtMostOnce",e[e.AtLeastOnce=1]="AtLeastOnce",e[e.ExactlyOnce=2]="ExactlyOnce"})(RH=Xt.QoS||(Xt.QoS={}));var Iw=class{constructor(t,r,n,i=!1){this.topic=t,this.qos=r,this.payload=n,this.retain=i}};Xt.MqttWill=Iw;Xt.DEFAULT_RECONNECT_MAX_SEC=128;Xt.DEFAULT_RECONNECT_MIN_SEC=1});var qw=d(ke=>{"use strict";var qH=ke&&ke.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),MH=ke&&ke.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kH=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&qH(t,e,r);return MH(t,e),t};Object.defineProperty(ke,"__esModule",{value:!0});ke.extractRegionFromEndpoint=ke.buildMqtt5FinalUsername=ke.populate_username_string_with_custom_authorizer=ke.is_string_and_not_empty=ke.add_to_username_parameter=void 0;var DH=kH(Ip());function Bp(e,t,r){let n=e;return n.indexOf("?")!=-1?n+="&":n+="?",t.indexOf(r)!=-1?n+t:n+r+t}ke.add_to_username_parameter=Bp;function br(e){return e!=null&&typeof e=="string"&&e!=""}ke.is_string_and_not_empty=br;function FH(e,t,r,n,i,s,o){let a="";if(e&&(a+=e),br(t)==!1?br(i)&&i&&(a+=i):a+=t,br(r)&&r&&(a=Bp(a,r,"x-amz-customauthorizer-name=")),br(n)&&n&&(a=Bp(a,n,"x-amz-customauthorizer-signature="),(br(s)&&s||br(o)&&o)&&console.log("Warning: Signed custom authorizers with signature will not work without a token key name and token value. Your connection may be rejected/stalled on the IoT Core side due to this. Please set the token key name and token value to connect to a signed custom authorizer.")),br(n)||br(o)||br(s)){if(!o||!s)throw new Error("Token-based custom authentication requires all token-related properties to be set");a=Bp(a,o,s+"=")}return a}ke.populate_username_string_with_custom_authorizer=FH;function Rw(e,t,r){t&&r.push([e,t])}function LH(e){let t="",r=[];if(e){let n=!1;if((e.tokenValue||e.tokenKeyName||e.tokenSignature)&&(n=!0,!e.tokenValue||!e.tokenKeyName||!e.tokenSignature))throw new Error("Token-based custom authentication requires all token-related properties to be set");let i=e.username,s=(i??"").split("?"),o=s.slice(1);if(t=s[0],o.length>1)throw new Error("Custom auth username property value is invalid");o.length==1&&o[0].split("&").forEach((a,u,l)=>{var p;let f=a.split("=");r.push([f[0],(p=f[1])!==null&&p!==void 0?p:""])}),Rw("x-amz-customauthorizer-name",e.authorizerName,r),n&&(Rw(e.tokenKeyName,e.tokenValue,r),Rw("x-amz-customauthorizer-signature",e.tokenSignature,r))}return r.push(["SDK","NodeJSv2"]),r.push(["Version",DH.crt_version()]),(t??"")+"?"+r.map(n=>`${n[0]}=${n[1]}`).join("&")}ke.buildMqtt5FinalUsername=LH;function zH(e){let t=/^[\w\-]+\.[\w\-]+\.([\w+\-]+)\./,r=e.match(t);if(r)return r[1];throw new Error("AWS region could not be extracted from endpoint.  Use 'region' property on WebsocketConfig to set manually.")}ke.extractRegionFromEndpoint=zH});var OT=d(Ft=>{"use strict";var UH=Ft&&Ft.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WH=Ft&&Ft.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Dw=Ft&&Ft.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&UH(t,e,r);return WH(t,e),t},jH=Ft&&Ft.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.AwsIotMqttConnectionConfigBuilder=void 0;var TT=Vp(),Gn=Dw(rn()),Ys=rn(),VH=Dw(Ip()),CT=Qt(),Ra=Mp(),Mw=Dw(qw()),kw=class e{constructor(t){this.tls_ctx_options=t,this.params={client_id:"",host_name:"",socket_options:new Gn.SocketOptions,port:8883,use_websocket:!1,clean_session:!1,keep_alive:void 0,will:void 0,username:"",password:void 0,tls_ctx:void 0,reconnect_min_sec:TT.DEFAULT_RECONNECT_MIN_SEC,reconnect_max_sec:TT.DEFAULT_RECONNECT_MAX_SEC},this.is_using_custom_authorizer=!1}static new_mtls_builder_from_path(t,r){let n=new e(Ys.TlsContextOptions.create_client_with_mtls_from_path(t,r));return n.params.port=8883,Gn.is_alpn_available()&&n.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),n}static new_mtls_builder(t,r){let n=new e(Ys.TlsContextOptions.create_client_with_mtls(t,r));return n.params.port=8883,Gn.is_alpn_available()&&n.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),n}static new_mtls_pkcs11_builder(t){let r=new e(Ys.TlsContextOptions.create_client_with_mtls_pkcs11(t));return r.params.port=8883,Gn.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_pkcs12_builder(t){let r=new e(Ys.TlsContextOptions.create_client_with_mtls_pkcs12_from_path(t.pkcs12_file,t.pkcs12_password));return r.params.port=8883,Gn.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_windows_cert_store_path_builder(t){let r=new e(Ys.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(t));return r.params.port=8883,Gn.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_default_builder(){let t=new Gn.TlsContextOptions;return new e(t)}static new_websocket_builder(...t){return this.new_with_websockets(...t)}static configure_websocket_handshake(t,r){if(r){if(t==null||t==null)throw new CT.CrtError("AwsIotMqttConnectionConfigBuilder configure_websocket_handshake: builder not defined");t.params.websocket_handshake_transform=(n,i)=>jH(this,void 0,void 0,function*(){var s,o,a;let u=(o=(s=r.create_signing_config)===null||s===void 0?void 0:s.call(r))!==null&&o!==void 0?o:{algorithm:Ra.AwsSigningAlgorithm.SigV4,signature_type:Ra.AwsSignatureType.HttpRequestViaQueryParams,provider:r.credentials_provider,region:r.region,service:(a=r.service)!==null&&a!==void 0?a:"iotdevicegateway",signed_body_value:Ra.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};try{yield(0,Ra.aws_sign_request)(n,u),i()}catch(l){l instanceof CT.CrtError?i(l.error_code):i(3)}})}return t}static new_with_websockets(t){let r=t?.tls_ctx_options;r||(r=new Ys.TlsContextOptions,r.alpn_list=[]);let n=new e(r);return n.params.use_websocket=!0,n.params.proxy_options=t?.proxy_options,n.tls_ctx_options&&(n.params.port=443),this.configure_websocket_handshake(n,t),n}static new_builder_for_websocket(){return this.new_with_websockets()}with_certificate_authority_from_path(t,r){return this.tls_ctx_options.override_default_trust_store_from_path(t,r),this}with_certificate_authority(t){return this.tls_ctx_options.override_default_trust_store(t),this}with_endpoint(t){return this.params.host_name=t,this}with_port(t){return this.params.port=t,this}with_client_id(t){return this.params.client_id=t,this}with_clean_session(t){return this.params.clean_session=t,this}with_keep_alive_seconds(t){return this.params.keep_alive=t,this}with_timeout_ms(t){return this.with_ping_timeout_ms(t),this}with_ping_timeout_ms(t){return this.params.ping_timeout=t,this}with_protocol_operation_timeout_ms(t){return this.params.protocol_operation_timeout=t,this}with_will(t){return this.params.will=t,this}with_socket_options(t){return this.params.socket_options=t,this}with_credentials(t,r,n,i){return e.configure_websocket_handshake(this,{credentials_provider:Ra.AwsCredentialsProvider.newStatic(r,n,i),region:t,service:"iotdevicegateway"})}with_http_proxy_options(t){return this.params.proxy_options=t,this}with_custom_authorizer(t,r,n,i,s,o){this.is_using_custom_authorizer=!0;let a=Mw.populate_username_string_with_custom_authorizer("",t,r,n,this.params.username,s,o);return this.params.username=a,this.params.password=i,this.params.use_websocket||(this.tls_ctx_options.alpn_list=["mqtt"]),this.params.port=443,this}with_username(t){return this.params.username=t,this}with_password(t){return this.params.password=t,this}with_reconnect_max_sec(t){return this.params.reconnect_max_sec=t,this}with_reconnect_min_sec(t){return this.params.reconnect_min_sec=t,this}build(){var t,r,n;if(this.params.client_id===void 0||this.params.host_name===void 0)throw"client_id and endpoint are required";return this.is_using_custom_authorizer==!1&&Mw.is_string_and_not_empty(this.params.username)&&(((t=this.params.username)===null||t===void 0?void 0:t.indexOf("x-amz-customauthorizer-name="))!=-1||((r=this.params.username)===null||r===void 0?void 0:r.indexOf("x-amz-customauthorizer-signature="))!=-1)&&(this.is_using_custom_authorizer=!0),this.is_using_custom_authorizer==!0&&this.params.port!=443&&console.log("Warning: Attempting to connect to authorizer with unsupported port. Port is not 443..."),this.params.tls_ctx===void 0&&(this.params.tls_ctx=new Gn.ClientTlsContext(this.tls_ctx_options)),Mw.is_string_and_not_empty(this.params.username)==!1?this.params.username="?SDK=NodeJSv2&Version=":((n=this.params.username)===null||n===void 0?void 0:n.indexOf("?"))!=-1?this.params.username+="&SDK=NodeJSv2&Version=":this.params.username+="?SDK=NodeJSv2&Version=",this.params.username+=VH.crt_version(),this.params}};Ft.AwsIotMqttConnectionConfigBuilder=kw});var $p=d(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.DEFAULT_KEEP_ALIVE=Xs.normalize_payload=void 0;function BH(e){if(e instanceof Buffer||typeof e=="string")return e;if(ArrayBuffer.isView(e)){let t=e;return Buffer.from(t.buffer,t.byteOffset,t.byteLength)}if(e instanceof ArrayBuffer)return Buffer.from(e);if(typeof e=="object")return JSON.stringify(e);if(!e)return"";throw new TypeError("payload parameter must be a string, object, or DataView.")}Xs.normalize_payload=BH;Xs.DEFAULT_KEEP_ALIVE=1200});var PT=d(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.RetryJitterType=Jn.ClientSessionBehavior=void 0;var $H;(function(e){e[e.Default=0]="Default",e[e.Clean=1]="Clean",e[e.RejoinPostSuccess=2]="RejoinPostSuccess",e[e.RejoinAlways=3]="RejoinAlways"})($H=Jn.ClientSessionBehavior||(Jn.ClientSessionBehavior={}));var HH;(function(e){e[e.Default=0]="Default",e[e.None=1]="None",e[e.Full=2]="Full",e[e.Decorrelated=3]="Decorrelated"})(HH=Jn.RetryJitterType||(Jn.RetryJitterType={}))});var IT=d(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.PacketType=D.RetainHandlingType=D.QoS=D.PayloadFormatIndicator=D.isSuccessfulPubackReasonCode=D.PubackReasonCode=D.isSuccessfulUnsubackReasonCode=D.UnsubackReasonCode=D.isSuccessfulSubackReasonCode=D.SubackReasonCode=D.isSuccessfulDisconnectReasonCode=D.DisconnectReasonCode=D.isSuccessfulConnectReasonCode=D.ConnectReasonCode=void 0;var GH;(function(e){e[e.Success=0]="Success",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.MalformedPacket=129]="MalformedPacket",e[e.ProtocolError=130]="ProtocolError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.UnsupportedProtocolVersion=132]="UnsupportedProtocolVersion",e[e.ClientIdentifierNotValid=133]="ClientIdentifierNotValid",e[e.BadUsernameOrPassword=134]="BadUsernameOrPassword",e[e.NotAuthorized=135]="NotAuthorized",e[e.ServerUnavailable=136]="ServerUnavailable",e[e.ServerBusy=137]="ServerBusy",e[e.Banned=138]="Banned",e[e.BadAuthenticationMethod=140]="BadAuthenticationMethod",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.PacketTooLarge=149]="PacketTooLarge",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid",e[e.RetainNotSupported=154]="RetainNotSupported",e[e.QosNotSupported=155]="QosNotSupported",e[e.UseAnotherServer=156]="UseAnotherServer",e[e.ServerMoved=157]="ServerMoved",e[e.ConnectionRateExceeded=159]="ConnectionRateExceeded"})(GH=D.ConnectReasonCode||(D.ConnectReasonCode={}));function JH(e){return e<128}D.isSuccessfulConnectReasonCode=JH;var QH;(function(e){e[e.NormalDisconnection=0]="NormalDisconnection",e[e.DisconnectWithWillMessage=4]="DisconnectWithWillMessage",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.MalformedPacket=129]="MalformedPacket",e[e.ProtocolError=130]="ProtocolError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.ServerBusy=137]="ServerBusy",e[e.ServerShuttingDown=139]="ServerShuttingDown",e[e.KeepAliveTimeout=141]="KeepAliveTimeout",e[e.SessionTakenOver=142]="SessionTakenOver",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.ReceiveMaximumExceeded=147]="ReceiveMaximumExceeded",e[e.TopicAliasInvalid=148]="TopicAliasInvalid",e[e.PacketTooLarge=149]="PacketTooLarge",e[e.MessageRateTooHigh=150]="MessageRateTooHigh",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.AdministrativeAction=152]="AdministrativeAction",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid",e[e.RetainNotSupported=154]="RetainNotSupported",e[e.QosNotSupported=155]="QosNotSupported",e[e.UseAnotherServer=156]="UseAnotherServer",e[e.ServerMoved=157]="ServerMoved",e[e.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",e[e.ConnectionRateExceeded=159]="ConnectionRateExceeded",e[e.MaximumConnectTime=160]="MaximumConnectTime",e[e.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",e[e.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(QH=D.DisconnectReasonCode||(D.DisconnectReasonCode={}));function KH(e){return e<128}D.isSuccessfulDisconnectReasonCode=KH;var YH;(function(e){e[e.GrantedQoS0=0]="GrantedQoS0",e[e.GrantedQoS1=1]="GrantedQoS1",e[e.GrantedQoS2=2]="GrantedQoS2",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",e[e.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",e[e.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(YH=D.SubackReasonCode||(D.SubackReasonCode={}));function XH(e){return e<128}D.isSuccessfulSubackReasonCode=XH;var ZH;(function(e){e[e.Success=0]="Success",e[e.NoSubscriptionExisted=17]="NoSubscriptionExisted",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicFilterInvalid=143]="TopicFilterInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse"})(ZH=D.UnsubackReasonCode||(D.UnsubackReasonCode={}));function e3(e){return e<128}D.isSuccessfulUnsubackReasonCode=e3;var t3;(function(e){e[e.Success=0]="Success",e[e.NoMatchingSubscribers=16]="NoMatchingSubscribers",e[e.UnspecifiedError=128]="UnspecifiedError",e[e.ImplementationSpecificError=131]="ImplementationSpecificError",e[e.NotAuthorized=135]="NotAuthorized",e[e.TopicNameInvalid=144]="TopicNameInvalid",e[e.PacketIdentifierInUse=145]="PacketIdentifierInUse",e[e.QuotaExceeded=151]="QuotaExceeded",e[e.PayloadFormatInvalid=153]="PayloadFormatInvalid"})(t3=D.PubackReasonCode||(D.PubackReasonCode={}));function r3(e){return e<128}D.isSuccessfulPubackReasonCode=r3;var n3;(function(e){e[e.Bytes=0]="Bytes",e[e.Utf8=1]="Utf8"})(n3=D.PayloadFormatIndicator||(D.PayloadFormatIndicator={}));var i3;(function(e){e[e.AtMostOnce=0]="AtMostOnce",e[e.AtLeastOnce=1]="AtLeastOnce",e[e.ExactlyOnce=2]="ExactlyOnce"})(i3=D.QoS||(D.QoS={}));var s3;(function(e){e[e.SendOnSubscribe=0]="SendOnSubscribe",e[e.SendOnSubscribeIfNew=1]="SendOnSubscribeIfNew",e[e.DontSend=2]="DontSend"})(s3=D.RetainHandlingType||(D.RetainHandlingType={}));var o3;(function(e){e[e.Connect=1]="Connect",e[e.Connack=2]="Connack",e[e.Publish=3]="Publish",e[e.Puback=4]="Puback",e[e.Pubrec=5]="Pubrec",e[e.Pubrel=6]="Pubrel",e[e.Pubcomp=7]="Pubcomp",e[e.Subscribe=8]="Subscribe",e[e.Suback=9]="Suback",e[e.Unsubscribe=10]="Unsubscribe",e[e.Unsuback=11]="Unsuback",e[e.Pingreq=12]="Pingreq",e[e.Pingresp=13]="Pingresp",e[e.Disconnect=14]="Disconnect",e[e.Auth=15]="Auth"})(o3=D.PacketType||(D.PacketType={}))});var zw=d(re=>{"use strict";var qT=re&&re.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),a3=re&&re.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),MT=re&&re.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&qT(t,e,r);return a3(t,e),t},kT=re&&re.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qT(t,e,r)},Fw=re&&re.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},c3=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0});re.Mqtt5Client=re.ClientExtendedValidationAndFlowControl=re.ClientOperationQueueBehavior=re.HttpProxyOptions=void 0;var Qn=c3(Jt()),d3=Mi(),u3=Pa(),Lw=MT(rn()),l3=MT($p()),RT=Qt(),p3=jp();Object.defineProperty(re,"HttpProxyOptions",{enumerable:!0,get:function(){return p3.HttpProxyOptions}});kT(PT(),re);kT(IT(),re);var f3;(function(e){e[e.Default=0]="Default",e[e.FailNonQos1PublishOnDisconnect=1]="FailNonQos1PublishOnDisconnect",e[e.FailQos0PublishOnDisconnect=2]="FailQos0PublishOnDisconnect",e[e.FailAllOnDisconnect=3]="FailAllOnDisconnect"})(f3=re.ClientOperationQueueBehavior||(re.ClientOperationQueueBehavior={}));var m3;(function(e){e[e.None=0]="None",e[e.AwsIotCoreDefaults=1]="AwsIotCoreDefaults"})(m3=re.ClientExtendedValidationAndFlowControl||(re.ClientExtendedValidationAndFlowControl={}));var xr=class e extends(0,d3.NativeResourceMixin)(u3.BufferedEventEmitter){constructor(t){super(),this._super(Qn.default.mqtt5_client_new(this,t,r=>{e._s_on_stopped(r)},r=>{e._s_on_attempting_connect(r)},(r,n,i)=>{e._s_on_connection_success(r,n,i)},(r,n,i)=>{e._s_on_connection_failure(r,new RT.CrtError(n),i)},(r,n,i)=>{e._s_on_disconnection(r,new RT.CrtError(n),i)},(r,n)=>{e._s_on_message_received(r,n)},t.clientBootstrap?t.clientBootstrap.native_handle():null,t.socketOptions?t.socketOptions.native_handle():null,t.tlsCtx?t.tlsCtx.native_handle():null,t.httpProxyOptions?t.httpProxyOptions.create_native_handle():null))}close(){Qn.default.mqtt5_client_close(this.native_handle())}start(){Qn.default.mqtt5_client_start(this.native_handle())}stop(t){Qn.default.mqtt5_client_stop(this.native_handle(),t)}subscribe(t){return Fw(this,void 0,void 0,function*(){return new Promise((r,n)=>{function i(s,o,a){return e._s_on_suback_callback(r,n,s,o,a)}try{Qn.default.mqtt5_client_subscribe(this.native_handle(),t,i)}catch(s){n(s)}})})}unsubscribe(t){return Fw(this,void 0,void 0,function*(){return new Promise((r,n)=>{function i(s,o,a){return e._s_on_unsuback_callback(r,n,s,o,a)}try{Qn.default.mqtt5_client_unsubscribe(this.native_handle(),t,i)}catch(s){n(s)}})})}publish(t){return Fw(this,void 0,void 0,function*(){return new Promise((r,n)=>{t&&t.payload&&(t.payload=l3.normalize_payload(t.payload));function i(s,o,a){return e._s_on_puback_callback(r,n,s,o,a)}try{Qn.default.mqtt5_client_publish(this.native_handle(),t,i)}catch(s){n(s)}})})}getQueueStatistics(){return Qn.default.mqtt5_client_get_queue_statistics(this.native_handle())}on(t,r){return super.on(t,r),this}static _s_on_stopped(t){process.nextTick(()=>{let r={};t.emit(e.STOPPED,r)})}static _s_on_attempting_connect(t){process.nextTick(()=>{let r={};t.emit(e.ATTEMPTING_CONNECT,r)})}static _s_on_connection_success(t,r,n){let i={connack:r,settings:n};process.nextTick(()=>{t.emit(e.CONNECTION_SUCCESS,i)})}static _s_on_connection_failure(t,r,n){let i={error:r};n!=null&&(i.connack=n),process.nextTick(()=>{t.emit(e.CONNECTION_FAILURE,i)})}static _s_on_disconnection(t,r,n){let i={error:r};n!=null&&(i.disconnect=n),process.nextTick(()=>{t.emit(e.DISCONNECTION,i)})}static _s_on_suback_callback(t,r,n,i,s){i==0&&s!==void 0?t(s):r(Lw.error_code_to_string(i))}static _s_on_unsuback_callback(t,r,n,i,s){i==0&&s!==void 0?t(s):r(Lw.error_code_to_string(i))}static _s_on_puback_callback(t,r,n,i,s){i==0?t(s):r(Lw.error_code_to_string(i))}static _s_on_message_received(t,r){let n={message:r};process.nextTick(()=>{t.emit(e.MESSAGE_RECEIVED,n)})}};re.Mqtt5Client=xr;xr.ERROR="error";xr.MESSAGE_RECEIVED="messageReceived";xr.ATTEMPTING_CONNECT="attemptingConnect";xr.CONNECTION_SUCCESS="connectionSuccess";xr.CONNECTION_FAILURE="connectionFailure";xr.DISCONNECTION="disconnection";xr.STOPPED="stopped"});var LT=d(Lt=>{"use strict";var h3=Lt&&Lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_3=Lt&&Lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ka=Lt&&Lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&h3(t,e,r);return _3(t,e),t},DT=Lt&&Lt.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.AwsIotMqtt5ClientConfigBuilder=void 0;var y3=ka(zw()),ut=ka(rn()),qa=ka(Mp()),g3=Qt(),FT=ka(qw()),w3=ka($p()),Ma=class e{constructor(t,r,n){this.tlsContextOptions=n,this.config={hostName:t,port:r,connectProperties:{keepAliveIntervalSeconds:w3.DEFAULT_KEEP_ALIVE},extendedValidationAndFlowControlOptions:y3.ClientExtendedValidationAndFlowControl.AwsIotCoreDefaults}}static newDirectMqttBuilderWithMtlsFromPath(t,r,n){let i=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ut.TlsContextOptions.create_client_with_mtls_from_path(r,n));return ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromMemory(t,r,n){let i=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ut.TlsContextOptions.create_client_with_mtls(r,n));return ut.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromPkcs11(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ut.TlsContextOptions.create_client_with_mtls_pkcs11(r));return ut.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithMtlsFromPkcs12(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ut.TlsContextOptions.create_client_with_mtls_pkcs12_from_path(r.pkcs12_file,r.pkcs12_password));return ut.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithMtlsFromWindowsCertStorePath(t,r){let n=new e(t,e.DEFAULT_DIRECT_MQTT_PORT,ut.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(r));return ut.is_alpn_available()&&n.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),n}static newDirectMqttBuilderWithCustomAuth(t,r){let n=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,new ut.TlsContextOptions);return n.customAuthConfig=r,n.tlsContextOptions.alpn_list=["mqtt"],n}static newWebsocketMqttBuilderWithSigv4Auth(t,r){let n=new ut.TlsContextOptions;n.alpn_list=[];let i=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,n),s=r?.credentialsProvider;return s||(s=qa.AwsCredentialsProvider.newDefault()),i.config.websocketHandshakeTransform=(o,a)=>DT(this,void 0,void 0,function*(){var u;try{let l={algorithm:qa.AwsSigningAlgorithm.SigV4,signature_type:qa.AwsSignatureType.HttpRequestViaQueryParams,provider:s,region:(u=r?.region)!==null&&u!==void 0?u:FT.extractRegionFromEndpoint(t),service:"iotdevicegateway",signed_body_value:qa.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};yield qa.aws_sign_request(o,l),a()}catch(l){l instanceof g3.CrtError?a(l.error_code):a(3)}}),i}static newWebsocketMqttBuilderWithCustomAuth(t,r){let n=new e(t,e.DEFAULT_WEBSOCKET_MQTT_PORT,new ut.TlsContextOptions);return n.customAuthConfig=r,n.config.websocketHandshakeTransform=(i,s)=>DT(this,void 0,void 0,function*(){s(0)}),n}withCertificateAuthorityFromPath(t,r){return this.tlsContextOptions.override_default_trust_store_from_path(t,r),this}withCertificateAuthority(t){return this.tlsContextOptions.override_default_trust_store(t),this}withPort(t){return this.config.port=t,this}withConnectProperties(t){return this.config.connectProperties=t,this}withSessionBehavior(t){return this.config.sessionBehavior=t,this}withRetryJitterMode(t){return this.config.retryJitterMode=t,this}withMinReconnectDelayMs(t){return this.config.minReconnectDelayMs=t,this}withMaxReconnectDelayMs(t){return this.config.maxReconnectDelayMs=t,this}withMinConnectedTimeToResetReconnectDelayMs(t){return this.config.minConnectedTimeToResetReconnectDelayMs=t,this}withConnackTimeoutMs(t){return this.config.connackTimeoutMs=t,this}withOfflineQueueBehavior(t){return this.config.offlineQueueBehavior=t,this}withPingTimeoutMs(t){return this.config.pingTimeoutMs=t,this}withAckTimeoutSeconds(t){return this.config.ackTimeoutSeconds=t,this}withSocketOptions(t){return this.config.socketOptions=t,this}withHttpProxyOptions(t){return this.config.httpProxyOptions=t,this}withExtendedValidationAndFlowControlOptions(t){return this.config.extendedValidationAndFlowControlOptions=t,this}build(){var t,r;return this.config.tlsCtx===void 0&&(this.config.tlsCtx=new ut.ClientTlsContext(this.tlsContextOptions)),this.config.connectProperties&&(this.config.connectProperties.username=FT.buildMqtt5FinalUsername(this.customAuthConfig),!((t=this.customAuthConfig)===null||t===void 0)&&t.password&&(this.config.connectProperties.password=(r=this.customAuthConfig)===null||r===void 0?void 0:r.password)),this.config}};Lt.AwsIotMqtt5ClientConfigBuilder=Ma;Ma.DEFAULT_WEBSOCKET_MQTT_PORT=443;Ma.DEFAULT_DIRECT_MQTT_PORT=8883});var UT=d(Kn=>{"use strict";var E3=Kn&&Kn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),zT=Kn&&Kn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&E3(t,e,r)};Object.defineProperty(Kn,"__esModule",{value:!0});zT(OT(),Kn);zT(LT(),Kn)});var HT=d(ge=>{"use strict";var v3=ge&&ge.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),S3=ge&&ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),VT=ge&&ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&v3(t,e,r);return S3(t,e),t},Zs=ge&&ge.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(p){try{l(n.next(p))}catch(f){o(f)}}function u(p){try{l(n.throw(p))}catch(f){o(f)}}function l(p){p.done?s(p.value):i(p.value).then(a,u)}l((n=n.apply(e,t||[])).next())})},N3=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});ge.MqttClientConnection=ge.MqttClient=ge.MqttWill=ge.QoS=ge.HttpProxyOptions=void 0;var zt=N3(Jt()),BT=Mi(),b3=Pa(),WT=VT($p()),Yn=Qt(),Hp=VT(rn()),x3=jp();Object.defineProperty(ge,"HttpProxyOptions",{enumerable:!0,get:function(){return x3.HttpProxyOptions}});var jT=Vp(),$T=Vp();Object.defineProperty(ge,"QoS",{enumerable:!0,get:function(){return $T.QoS}});Object.defineProperty(ge,"MqttWill",{enumerable:!0,get:function(){return $T.MqttWill}});var Uw=class extends BT.NativeResource{constructor(t=void 0){super(zt.default.mqtt_client_new(t!=null?t.native_handle():null)),this.bootstrap=t}new_connection(t){return new bt(this,t)}};ge.MqttClient=Uw;var bt=class extends(0,BT.NativeResourceMixin)(b3.BufferedEventEmitter){constructor(t,r){if(super(),this.client=t,this.config=r,r==null||r==null)throw new Yn.CrtError("MqttClientConnection constructor: config not defined");let n=r.will?{topic:r.will.topic,qos:r.will.qos,payload:WT.normalize_payload(r.will.payload),retain:r.will.retain}:void 0;var i=jT.DEFAULT_RECONNECT_MIN_SEC,s=jT.DEFAULT_RECONNECT_MAX_SEC;if(r.reconnect_min_sec&&(i=r.reconnect_min_sec,s=Math.max(i,s)),r.reconnect_max_sec&&(s=r.reconnect_max_sec,i=Math.min(i,s)),t==null||t==null)throw new Yn.CrtError("MqttClientConnection constructor: client not defined");if(r.socket_options==null||r.socket_options==null)throw new Yn.CrtError("MqttClientConnection constructor: socket_options in configuration not defined");this._super(zt.default.mqtt_client_connection_new(t.native_handle(),o=>{this._on_connection_interrupted(o)},(o,a)=>{this._on_connection_resumed(o,a)},r.tls_ctx?r.tls_ctx.native_handle():null,n,r.username,r.password,r.use_websocket,r.proxy_options?r.proxy_options.create_native_handle():void 0,r.websocket_handshake_transform,i,s)),this.tls_ctx=r.tls_ctx,zt.default.mqtt_client_connection_on_message(this.native_handle(),this._on_any_publish.bind(this)),zt.default.mqtt_client_connection_on_closed(this.native_handle(),this._on_connection_closed.bind(this)),this.on("error",o=>{})}close(){zt.default.mqtt_client_connection_close(this.native_handle())}on(t,r){return super.on(t,r),t=="connect"&&process.nextTick(()=>{this.uncork()}),this}connect(){return Zs(this,void 0,void 0,function*(){return new Promise((t,r)=>{if(r=this._reject(r),this.config.socket_options==null||this.config.socket_options==null)throw new Yn.CrtError("MqttClientConnection connect: socket_options in configuration not defined");try{zt.default.mqtt_client_connection_connect(this.native_handle(),this.config.client_id,this.config.host_name,this.config.port,this.config.socket_options.native_handle(),this.config.keep_alive,this.config.ping_timeout,this.config.protocol_operation_timeout,this.config.clean_session,this._on_connect_callback.bind(this,t,r))}catch(n){r(n)}})})}reconnect(){return Zs(this,void 0,void 0,function*(){return new Promise((t,r)=>{r=this._reject(r);try{zt.default.mqtt_client_connection_reconnect(this.native_handle(),this._on_connect_callback.bind(this,t,r))}catch(n){r(n)}})})}publish(t,r,n,i=!1){return Zs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):typeof n!="number"?Promise.reject("qos is not a number"):typeof i!="boolean"?Promise.reject("retain is not a boolean"):new Promise((s,o)=>{o=this._reject(o);try{zt.default.mqtt_client_connection_publish(this.native_handle(),t,WT.normalize_payload(r),n,i,this._on_puback_callback.bind(this,s,o))}catch(a){o(a)}})})}subscribe(t,r,n){return Zs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):typeof r!="number"?Promise.reject("qos is not a number"):new Promise((i,s)=>{s=this._reject(s);try{zt.default.mqtt_client_connection_subscribe(this.native_handle(),t,r,n,this._on_suback_callback.bind(this,i,s))}catch(o){s(o)}})})}unsubscribe(t){return Zs(this,void 0,void 0,function*(){return typeof t!="string"?Promise.reject("topic is not a string"):new Promise((r,n)=>{n=this._reject(n);try{zt.default.mqtt_client_connection_unsubscribe(this.native_handle(),t,this._on_unsuback_callback.bind(this,r,n))}catch(i){n(i)}})})}disconnect(){return Zs(this,void 0,void 0,function*(){return new Promise((t,r)=>{r=this._reject(r);try{zt.default.mqtt_client_connection_disconnect(this.native_handle(),this._on_disconnect_callback.bind(this,t))}catch(n){r(n)}})})}getQueueStatistics(){return zt.default.mqtt_client_connection_get_queue_statistics(this.native_handle())}_reject(t){return r=>{t(r),process.nextTick(()=>{this.emit("error",new Yn.CrtError(r))})}}_on_connection_interrupted(t){this.emit("interrupt",new Yn.CrtError(t))}_on_connection_resumed(t,r){this.emit("resume",t,r);let n={session_present:r,reason_code:t};this.emit("connection_success",n)}_on_any_publish(t,r,n,i,s){this.emit("message",t,r,n,i,s)}_on_connection_closed(){let t={};this.emit("closed",t),this.close()}_on_connect_callback(t,r,n,i,s){if(n==0&&i==0){t(s),this.emit("connect",s);let o={session_present:s,reason_code:i};this.emit("connection_success",o)}else if(n!=0){r("Failed to connect: "+Hp.error_code_to_string(n));let o={error:new Yn.CrtError(n)};this.emit("connection_failure",o)}else{r("Server rejected connection.");let o={error:new Yn.CrtError(5134)};this.emit("connection_failure",o)}}_on_puback_callback(t,r,n,i){i==0?t({packet_id:n}):r("Failed to publish: "+Hp.error_code_to_string(i))}_on_suback_callback(t,r,n,i,s,o){o==0?t({packet_id:n,topic:i,qos:s,error_code:o}):r("Failed to subscribe: "+Hp.error_code_to_string(o))}_on_unsuback_callback(t,r,n,i){i==0?t({packet_id:n}):r("Failed to unsubscribe: "+Hp.error_code_to_string(i))}_on_disconnect_callback(t){t(),this.emit("disconnect")}};ge.MqttClientConnection=bt;bt.CONNECT="connect";bt.DISCONNECT="disconnect";bt.ERROR="error";bt.INTERRUPT="interrupt";bt.RESUME="resume";bt.MESSAGE="message";bt.CONNECTION_SUCCESS="connection_success";bt.CONNECTION_FAILURE="connection_failure";bt.CLOSED="closed"});var GT=d(F=>{"use strict";var A3=F&&F.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),T3=F&&F.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lt=F&&F.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&A3(t,e,r);return T3(t,e),t};Object.defineProperty(F,"__esModule",{value:!0});F.CrtError=F.resource_safety=F.promise=F.platform=F.mqtt5=F.mqtt=F.iot=F.io=F.http=F.eventstream=F.crt=F.crypto=F.checksums=F.cancel=F.auth=void 0;var C3=lt(XA());F.cancel=C3;var O3=lt(Ip());F.platform=O3;var P3=lt(Pp());F.promise=P3;var I3=lt(rT());F.resource_safety=I3;var R3=lt(Mp());F.auth=R3;var q3=lt(pT());F.checksums=q3;var M3=lt(mT());F.crt=M3;var k3=lt(_T());F.crypto=k3;var D3=lt(ST());F.eventstream=D3;var F3=lt(jp());F.http=F3;var L3=lt(rn());F.io=L3;var z3=lt(UT());F.iot=z3;var U3=lt(HT());F.mqtt=U3;var W3=lt(zw());F.mqtt5=W3;var j3=Qt();Object.defineProperty(F,"CrtError",{enumerable:!0,get:function(){return j3.CrtError}})});var JT=d((Gp,Ww)=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.isCrtAvailable=void 0;var V3=()=>{try{return typeof z=="function"&&typeof Ww<"u"&&Ww.require&&GT()?["md/crt-avail"]:null}catch{return null}};Gp.isCrtAvailable=V3});var Da=d(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.defaultUserAgent=Ar.UA_APP_ID_INI_NAME=Ar.UA_APP_ID_ENV_NAME=void 0;var B3=jn(),QT=z("os"),jw=z("process"),$3=JT();Ar.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";Ar.UA_APP_ID_INI_NAME="sdk-ua-app-id";var H3=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],[`os/${(0,QT.platform)()}`,(0,QT.release)()],["lang/js"],["md/nodejs",`${jw.versions.node}`]],n=(0,$3.isCrtAvailable)();n&&r.push(n),e&&r.push([`api/${e}`,t]),jw.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${jw.env.AWS_EXECUTION_ENV}`]);let i=(0,B3.loadConfig)({environmentVariableSelector:o=>o[Ar.UA_APP_ID_ENV_NAME],configFileSelector:o=>o[Ar.UA_APP_ID_INI_NAME],default:void 0})(),s;return async()=>{if(!s){let o=await i;s=o?[...r,[`app/${o}`]]:[...r]}return s}};Ar.defaultUserAgent=H3});var KT=d(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.fromBase64=void 0;var G3=Ms(),J3=/^[A-Za-z0-9+/]*={0,2}$/,Q3=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!J3.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,G3.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Jp.fromBase64=Q3});var YT=d(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.toBase64=void 0;var K3=Ms(),Y3=e=>(0,K3.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64");Qp.toBase64=Y3});var Fa=d(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});var XT=(b(),S(N));XT.__exportStar(KT(),Kp);XT.__exportStar(YT(),Kp)});var ZT=d((Sfe,X3)=>{X3.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"}});var Bw=d(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.partition=void 0;var Z3=(b(),S(N)),eG=Z3.__importDefault(ZT()),{partitions:Vw}=eG.default,eC=Vw.find(e=>e.id==="aws"),tG=e=>{for(let t of Vw){let{regions:r,outputs:n}=t;for(let[i,s]of Object.entries(r))if(i===e)return{...n,...s}}for(let t of Vw){let{regionRegex:r,outputs:n}=t;if(new RegExp(r).test(e))return{...n}}if(!eC)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...eC.outputs}};Yp.partition=tG});var tC=d(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.debugId=void 0;Xp.debugId="endpoints"});var rC=d(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.toDebugString=void 0;function $w(e){return typeof e!="object"||e==null?e:"ref"in e?`$${$w(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map($w).join(", ")})`:JSON.stringify(e,null,2)}Zp.toDebugString=$w});var La=d(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var nC=(b(),S(N));nC.__exportStar(tC(),ef);nC.__exportStar(rC(),ef)});var iC=d(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.EndpointError=void 0;var Hw=class extends Error{constructor(t){super(t),this.name="EndpointError"}};tf.EndpointError=Hw});var oC=d(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0})});var cC=d(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0})});var uC=d(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0})});var pC=d(lC=>{"use strict";Object.defineProperty(lC,"__esModule",{value:!0})});var mC=d(fC=>{"use strict";Object.defineProperty(fC,"__esModule",{value:!0})});var Ut=d(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});var eo=(b(),S(N));eo.__exportStar(iC(),Xn);eo.__exportStar(oC(),Xn);eo.__exportStar(cC(),Xn);eo.__exportStar(uC(),Xn);eo.__exportStar(pC(),Xn);eo.__exportStar(mC(),Xn)});var Gw=d(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.isIpAddress=void 0;var rG=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),nG=e=>rG.test(e)||e.startsWith("[")&&e.endsWith("]");rf.isIpAddress=nG});var Jw=d(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.isValidHostLabel=void 0;var iG=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),sG=(e,t=!1)=>{if(!t)return iG.test(e);let r=e.split(".");for(let n of r)if(!(0,za.isValidHostLabel)(n))return!1;return!0};za.isValidHostLabel=sG});var hC=d(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.isVirtualHostableS3Bucket=void 0;var oG=Gw(),aG=Jw(),cG=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!(0,Ua.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,aG.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,oG.isIpAddress)(e))};Ua.isVirtualHostableS3Bucket=cG});var _C=d(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.parseArn=void 0;var dG=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,i,s,o,...a]=t;return r!=="arn"||n===""||i===""||a[0]===""?null:{partition:n,service:i,region:s,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}};nf.parseArn=dG});var yC=d(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var Qw=(b(),S(N));Qw.__exportStar(hC(),Wa);Qw.__exportStar(_C(),Wa);Qw.__exportStar(Bw(),Wa)});var gC=d(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.booleanEquals=void 0;var uG=(e,t)=>e===t;sf.booleanEquals=uG});var EC=d(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.getAttrPathList=void 0;var wC=Ut(),lG=e=>{let t=e.split("."),r=[];for(let n of t){let i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new wC.EndpointError(`Path: '${e}' does not end with ']'`);let s=n.slice(i+1,-1);if(Number.isNaN(parseInt(s)))throw new wC.EndpointError(`Invalid array index: '${s}' in path: '${e}'`);i!==0&&r.push(n.slice(0,i)),r.push(s)}else r.push(n)}return r};of.getAttrPathList=lG});var vC=d(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.getAttr=void 0;var pG=Ut(),fG=EC(),mG=(e,t)=>(0,fG.getAttrPathList)(t).reduce((r,n)=>{if(typeof r!="object")throw new pG.EndpointError(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);af.getAttr=mG});var SC=d(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.isSet=void 0;var hG=e=>e!=null;cf.isSet=hG});var NC=d(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.not=void 0;var _G=e=>!e;df.not=_G});var xC=d(bC=>{"use strict";Object.defineProperty(bC,"__esModule",{value:!0})});var AC=d(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.HttpAuthLocation=void 0;var yG;(function(e){e.HEADER="header",e.QUERY="query"})(yG=ja.HttpAuthLocation||(ja.HttpAuthLocation={}))});var CC=d(TC=>{"use strict";Object.defineProperty(TC,"__esModule",{value:!0})});var PC=d(OC=>{"use strict";Object.defineProperty(OC,"__esModule",{value:!0})});var RC=d(IC=>{"use strict";Object.defineProperty(IC,"__esModule",{value:!0})});var MC=d(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0})});var DC=d(kC=>{"use strict";Object.defineProperty(kC,"__esModule",{value:!0})});var FC=d(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.HostAddressType=void 0;var gG;(function(e){e.AAAA="AAAA",e.A="A"})(gG=Va.HostAddressType||(Va.HostAddressType={}))});var LC=d(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.EndpointURLScheme=void 0;var wG;(function(e){e.HTTP="http",e.HTTPS="https"})(wG=Ba.EndpointURLScheme||(Ba.EndpointURLScheme={}))});var UC=d(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0})});var jC=d(WC=>{"use strict";Object.defineProperty(WC,"__esModule",{value:!0})});var BC=d(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0})});var HC=d($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0})});var JC=d(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0})});var KC=d(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0})});var XC=d(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0})});var ZC=d(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var $a=(b(),S(N));$a.__exportStar(BC(),Fi);$a.__exportStar(HC(),Fi);$a.__exportStar(JC(),Fi);$a.__exportStar(KC(),Fi);$a.__exportStar(XC(),Fi)});var tO=d(eO=>{"use strict";Object.defineProperty(eO,"__esModule",{value:!0})});var nO=d(rO=>{"use strict";Object.defineProperty(rO,"__esModule",{value:!0})});var sO=d(iO=>{"use strict";Object.defineProperty(iO,"__esModule",{value:!0})});var aO=d(oO=>{"use strict";Object.defineProperty(oO,"__esModule",{value:!0})});var dO=d(cO=>{"use strict";Object.defineProperty(cO,"__esModule",{value:!0})});var lO=d(uO=>{"use strict";Object.defineProperty(uO,"__esModule",{value:!0})});var fO=d(pO=>{"use strict";Object.defineProperty(pO,"__esModule",{value:!0})});var hO=d(mO=>{"use strict";Object.defineProperty(mO,"__esModule",{value:!0})});var yO=d(_O=>{"use strict";Object.defineProperty(_O,"__esModule",{value:!0})});var wO=d(gO=>{"use strict";Object.defineProperty(gO,"__esModule",{value:!0})});var vO=d(EO=>{"use strict";Object.defineProperty(EO,"__esModule",{value:!0})});var NO=d(SO=>{"use strict";Object.defineProperty(SO,"__esModule",{value:!0})});var xO=d(bO=>{"use strict";Object.defineProperty(bO,"__esModule",{value:!0})});var TO=d(AO=>{"use strict";Object.defineProperty(AO,"__esModule",{value:!0})});var OO=d(CO=>{"use strict";Object.defineProperty(CO,"__esModule",{value:!0})});var PO=d(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});var Y=(b(),S(N));Y.__exportStar(xC(),G);Y.__exportStar(AC(),G);Y.__exportStar(CC(),G);Y.__exportStar(PC(),G);Y.__exportStar(RC(),G);Y.__exportStar(MC(),G);Y.__exportStar(DC(),G);Y.__exportStar(FC(),G);Y.__exportStar(LC(),G);Y.__exportStar(UC(),G);Y.__exportStar(jC(),G);Y.__exportStar(ZC(),G);Y.__exportStar(tO(),G);Y.__exportStar(nO(),G);Y.__exportStar(sO(),G);Y.__exportStar(aO(),G);Y.__exportStar(dO(),G);Y.__exportStar(lO(),G);Y.__exportStar(fO(),G);Y.__exportStar(hO(),G);Y.__exportStar(yO(),G);Y.__exportStar(wO(),G);Y.__exportStar(vO(),G);Y.__exportStar(NO(),G);Y.__exportStar(xO(),G);Y.__exportStar(TO(),G);Y.__exportStar(OO(),G)});var IO=d(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.parseURL=void 0;var Yw=PO(),EG=Gw(),Kw={[Yw.EndpointURLScheme.HTTP]:80,[Yw.EndpointURLScheme.HTTPS]:443},vG=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:m,port:h,protocol:g="",path:y="",query:v={}}=e,X=new URL(`${g}//${m}${h?`:${h}`:""}${y}`);return X.search=Object.entries(v).map(([Oe,Ee])=>`${Oe}=${Ee}`).join("&"),X}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:i,pathname:s,protocol:o,search:a}=t;if(a)return null;let u=o.slice(0,-1);if(!Object.values(Yw.EndpointURLScheme).includes(u))return null;let l=(0,EG.isIpAddress)(i),p=r.includes(`${n}:${Kw[u]}`)||typeof e=="string"&&e.includes(`${n}:${Kw[u]}`),f=`${n}${p?`:${Kw[u]}`:""}`;return{scheme:u,authority:f,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}};uf.parseURL=vG});var RO=d(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.stringEquals=void 0;var SG=(e,t)=>e===t;lf.stringEquals=SG});var qO=d(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});pf.substring=void 0;var NG=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);pf.substring=NG});var MO=d(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.uriEncode=void 0;var bG=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);ff.uriEncode=bG});var Xw=d(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.aws=void 0;var Tr=(b(),S(N));xt.aws=Tr.__importStar(yC());Tr.__exportStar(gC(),xt);Tr.__exportStar(vC(),xt);Tr.__exportStar(SC(),xt);Tr.__exportStar(Jw(),xt);Tr.__exportStar(NC(),xt);Tr.__exportStar(IO(),xt);Tr.__exportStar(RO(),xt);Tr.__exportStar(qO(),xt);Tr.__exportStar(MO(),xt)});var Zw=d(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.evaluateTemplate=void 0;var xG=Xw(),AG=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let s=e.indexOf("{",i);if(s===-1){r.push(e.slice(i));break}r.push(e.slice(i,s));let o=e.indexOf("}",s);if(o===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(s+1,o)),i=o+2);let a=e.substring(s+1,o);if(a.includes("#")){let[u,l]=a.split("#");r.push((0,xG.getAttr)(n[u],l))}else r.push(n[a]);i=o+1}return r.join("")};mf.evaluateTemplate=AG});var kO=d(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.getReferenceValue=void 0;var TG=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];hf.getReferenceValue=TG});var Ha=d(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.evaluateExpression=void 0;var CG=Ut(),OG=eE(),PG=Zw(),IG=kO(),RG=(e,t,r)=>{if(typeof e=="string")return(0,PG.evaluateTemplate)(e,r);if(e.fn)return(0,OG.callFunction)(e,r);if(e.ref)return(0,IG.getReferenceValue)(e,r);throw new CG.EndpointError(`'${t}': ${String(e)} is not a string, function or reference.`)};_f.evaluateExpression=RG});var eE=d(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.callFunction=void 0;var qG=(b(),S(N)),MG=qG.__importStar(Xw()),kG=Ha(),DG=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:(0,kG.evaluateExpression)(i,"arg",r));return e.split(".").reduce((i,s)=>i[s],MG)(...n)};yf.callFunction=DG});var DO=d(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.evaluateCondition=void 0;var tE=La(),FG=Ut(),LG=eE(),zG=({assign:e,...t},r)=>{var n,i;if(e&&e in r.referenceRecord)throw new FG.EndpointError(`'${e}' is already defined in Reference Record.`);let s=(0,LG.callFunction)(t,r);return(i=(n=r.logger)===null||n===void 0?void 0:n.debug)===null||i===void 0||i.call(n,tE.debugId,`evaluateCondition: ${(0,tE.toDebugString)(t)} = ${(0,tE.toDebugString)(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}};gf.evaluateCondition=zG});var Ef=d(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.evaluateConditions=void 0;var FO=La(),UG=DO(),WG=(e=[],t)=>{var r,n;let i={};for(let s of e){let{result:o,toAssign:a}=(0,UG.evaluateCondition)(s,{...t,referenceRecord:{...t.referenceRecord,...i}});if(!o)return{result:o};a&&(i[a.name]=a.value,(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,FO.debugId,`assign: ${a.name} := ${(0,FO.toDebugString)(a.value)}`))}return{result:!0,referenceRecord:i}};wf.evaluateConditions=WG});var LO=d(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.getEndpointHeaders=void 0;var jG=Ut(),VG=Ha(),BG=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:i.map(s=>{let o=(0,VG.evaluateExpression)(s,"Header value entry",t);if(typeof o!="string")throw new jG.EndpointError(`Header '${n}' value '${o}' is not a string`);return o})}),{});vf.getEndpointHeaders=BG});var UO=d(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.getEndpointProperty=void 0;var zO=Ut(),$G=Zw(),HG=rE(),GG=(e,t)=>{if(Array.isArray(e))return e.map(r=>(0,Ga.getEndpointProperty)(r,t));switch(typeof e){case"string":return(0,$G.evaluateTemplate)(e,t);case"object":if(e===null)throw new zO.EndpointError(`Unexpected endpoint property: ${e}`);return(0,HG.getEndpointProperties)(e,t);case"boolean":return e;default:throw new zO.EndpointError(`Unexpected endpoint property type: ${typeof e}`)}};Ga.getEndpointProperty=GG});var rE=d(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.getEndpointProperties=void 0;var JG=UO(),QG=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:(0,JG.getEndpointProperty)(i,t)}),{});Sf.getEndpointProperties=QG});var WO=d(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.getEndpointUrl=void 0;var KG=Ut(),YG=Ha(),XG=(e,t)=>{let r=(0,YG.evaluateExpression)(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new KG.EndpointError(`Endpoint URL must be a string, got ${typeof r}`)};Nf.getEndpointUrl=XG});var VO=d(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.evaluateEndpointRule=void 0;var jO=La(),ZG=Ef(),eJ=LO(),tJ=rE(),rJ=WO(),nJ=(e,t)=>{var r,n;let{conditions:i,endpoint:s}=e,{result:o,referenceRecord:a}=(0,ZG.evaluateConditions)(i,t);if(!o)return;let u={...t,referenceRecord:{...t.referenceRecord,...a}},{url:l,properties:p,headers:f}=s;return(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,jO.debugId,`Resolving endpoint from template: ${(0,jO.toDebugString)(s)}`),{...f!=null&&{headers:(0,eJ.getEndpointHeaders)(f,u)},...p!=null&&{properties:(0,tJ.getEndpointProperties)(p,u)},url:(0,rJ.getEndpointUrl)(l,u)}};bf.evaluateEndpointRule=nJ});var BO=d(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.evaluateErrorRule=void 0;var iJ=Ut(),sJ=Ef(),oJ=Ha(),aJ=(e,t)=>{let{conditions:r,error:n}=e,{result:i,referenceRecord:s}=(0,sJ.evaluateConditions)(r,t);if(i)throw new iJ.EndpointError((0,oJ.evaluateExpression)(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};xf.evaluateErrorRule=aJ});var $O=d(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.evaluateTreeRule=void 0;var cJ=Ef(),dJ=nE(),uJ=(e,t)=>{let{conditions:r,rules:n}=e,{result:i,referenceRecord:s}=(0,cJ.evaluateConditions)(r,t);if(i)return(0,dJ.evaluateRules)(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};Af.evaluateTreeRule=uJ});var nE=d(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.evaluateRules=void 0;var HO=Ut(),lJ=VO(),pJ=BO(),fJ=$O(),mJ=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=(0,lJ.evaluateEndpointRule)(r,t);if(n)return n}else if(r.type==="error")(0,pJ.evaluateErrorRule)(r,t);else if(r.type==="tree"){let n=(0,fJ.evaluateTreeRule)(r,t);if(n)return n}else throw new HO.EndpointError(`Unknown endpoint rule: ${r}`);throw new HO.EndpointError("Rules evaluation failed")};Tf.evaluateRules=mJ});var GO=d(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});var hJ=(b(),S(N));hJ.__exportStar(nE(),iE)});var JO=d(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.resolveEndpoint=void 0;var Cf=La(),_J=Ut(),yJ=GO(),gJ=(e,t)=>{var r,n,i,s,o,a;let{endpointParams:u,logger:l}=t,{parameters:p,rules:f}=e;(n=(r=t.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,Cf.debugId,`Initial EndpointParams: ${(0,Cf.toDebugString)(u)}`);let m=Object.entries(p).filter(([,y])=>y.default!=null).map(([y,v])=>[y,v.default]);if(m.length>0)for(let[y,v]of m)u[y]=(i=u[y])!==null&&i!==void 0?i:v;let h=Object.entries(p).filter(([,y])=>y.required).map(([y])=>y);for(let y of h)if(u[y]==null)throw new _J.EndpointError(`Missing required parameter: '${y}'`);let g=(0,yJ.evaluateRules)(f,{endpointParams:u,logger:l,referenceRecord:{}});if(!((s=t.endpointParams)===null||s===void 0)&&s.Endpoint)try{let y=new URL(t.endpointParams.Endpoint),{protocol:v,port:X}=y;g.url.protocol=v,g.url.port=X}catch{}return(a=(o=t.logger)===null||o===void 0?void 0:o.debug)===null||a===void 0||a.call(o,Cf.debugId,`Resolved endpoint: ${(0,Cf.toDebugString)(g)}`),g};Of.resolveEndpoint=gJ});var Qa=d(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var sE=(b(),S(N));sE.__exportStar(Bw(),Ja);sE.__exportStar(JO(),Ja);sE.__exportStar(Ut(),Ja)});var oP=d(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.ruleSet=void 0;var rP="required",sn="fn",on="argv",to="ref",oE="PartitionResult",Cr="tree",Ka="error",Ya="endpoint",QO={[rP]:!1,type:"String"},KO={[rP]:!0,default:!1,type:"Boolean"},nP={[to]:"Endpoint"},iP={[sn]:"booleanEquals",[on]:[{[to]:"UseFIPS"},!0]},sP={[sn]:"booleanEquals",[on]:[{[to]:"UseDualStack"},!0]},Or={},YO={[sn]:"booleanEquals",[on]:[!0,{[sn]:"getAttr",[on]:[{[to]:oE},"supportsFIPS"]}]},XO={[sn]:"booleanEquals",[on]:[!0,{[sn]:"getAttr",[on]:[{[to]:oE},"supportsDualStack"]}]},ZO=[nP],eP=[iP],tP=[sP],wJ={version:"1.0",parameters:{Region:QO,UseDualStack:KO,UseFIPS:KO,Endpoint:QO},rules:[{conditions:[{[sn]:"aws.partition",[on]:[{[to]:"Region"}],assign:oE}],type:Cr,rules:[{conditions:[{[sn]:"isSet",[on]:ZO},{[sn]:"parseURL",[on]:ZO,assign:"url"}],type:Cr,rules:[{conditions:eP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ka},{type:Cr,rules:[{conditions:tP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ka},{endpoint:{url:nP,properties:Or,headers:Or},type:Ya}]}]},{conditions:[iP,sP],type:Cr,rules:[{conditions:[YO,XO],type:Cr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Or,headers:Or},type:Ya}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ka}]},{conditions:eP,type:Cr,rules:[{conditions:[YO],type:Cr,rules:[{type:Cr,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Or,headers:Or},type:Ya}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ka}]},{conditions:tP,type:Cr,rules:[{conditions:[XO],type:Cr,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Or,headers:Or},type:Ya}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ka}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Or,headers:Or},type:Ya}]}]};Pf.ruleSet=wJ});var aP=d(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.defaultEndpointResolver=void 0;var EJ=Qa(),vJ=oP(),SJ=(e,t={})=>(0,EJ.resolveEndpoint)(vJ.ruleSet,{endpointParams:e,logger:t.logger});If.defaultEndpointResolver=SJ});var uP=d(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.getRuntimeConfig=void 0;var NJ=R(),bJ=_i(),cP=Fa(),dP=Yr(),xJ=aP(),AJ=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??cP.fromBase64,base64Encoder:e?.base64Encoder??cP.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??xJ.defaultEndpointResolver,logger:e?.logger??new NJ.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??bJ.parseUrl,utf8Decoder:e?.utf8Decoder??dP.fromUtf8,utf8Encoder:e?.utf8Encoder??dP.toUtf8});Rf.getRuntimeConfig=AJ});var lP=d(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.IMDS_REGION_PATH=pt.DEFAULTS_MODE_OPTIONS=pt.ENV_IMDS_DISABLED=pt.AWS_DEFAULT_REGION_ENV=pt.AWS_REGION_ENV=pt.AWS_EXECUTION_ENV=void 0;pt.AWS_EXECUTION_ENV="AWS_EXECUTION_ENV";pt.AWS_REGION_ENV="AWS_REGION";pt.AWS_DEFAULT_REGION_ENV="AWS_DEFAULT_REGION";pt.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";pt.DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"];pt.IMDS_REGION_PATH="/latest/meta-data/placement/region"});var pP=d(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.NODE_DEFAULTS_MODE_CONFIG_OPTIONS=void 0;var TJ="AWS_DEFAULTS_MODE",CJ="defaults_mode";qf.NODE_DEFAULTS_MODE_CONFIG_OPTIONS={environmentVariableSelector:e=>e[TJ],configFileSelector:e=>e[CJ],default:"legacy"}});var hP=d(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.resolveDefaultsModeConfig=void 0;var OJ=cr(),fP=Hl(),mP=jn(),PJ=Q(),Zn=lP(),IJ=pP(),RJ=({region:e=(0,mP.loadConfig)(OJ.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=(0,mP.loadConfig)(IJ.NODE_DEFAULTS_MODE_CONFIG_OPTIONS)}={})=>(0,PJ.memoize)(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return qJ(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Zn.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${r}`)}});Mf.resolveDefaultsModeConfig=RJ;var qJ=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await MJ();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},MJ=async()=>{var e;if(process.env[Zn.AWS_EXECUTION_ENV]&&(process.env[Zn.AWS_REGION_ENV]||process.env[Zn.AWS_DEFAULT_REGION_ENV]))return(e=process.env[Zn.AWS_REGION_ENV])!==null&&e!==void 0?e:process.env[Zn.AWS_DEFAULT_REGION_ENV];if(!process.env[Zn.ENV_IMDS_DISABLED])try{let t=await(0,fP.getInstanceMetadataEndpoint)();return(await(0,fP.httpRequest)({...t,path:Zn.IMDS_REGION_PATH})).toString()}catch{}}});var Xa=d(aE=>{"use strict";Object.defineProperty(aE,"__esModule",{value:!0});var kJ=(b(),S(N));kJ.__exportStar(hP(),aE)});var gP=d(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.getRuntimeConfig=void 0;var DJ=(b(),S(N)),FJ=DJ.__importDefault(DA()),kf=cr(),LJ=Na(),_P=Kr(),Za=jn(),yP=xa(),zJ=Aa(),UJ=Mt(),WJ=Da(),jJ=uP(),VJ=R(),BJ=Xa(),$J=R(),HJ=e=>{(0,$J.emitWarningIfUnsupportedVersion)(process.version);let t=(0,BJ.resolveDefaultsModeConfig)(e),r=()=>t().then(VJ.loadConfigsForDefaultMode),n=(0,jJ.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??zJ.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,WJ.defaultUserAgent)({serviceId:n.serviceId,clientVersion:FJ.default.version}),maxAttempts:e?.maxAttempts??(0,Za.loadConfig)(_P.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,Za.loadConfig)(kf.NODE_REGION_CONFIG_OPTIONS,kf.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new yP.NodeHttpHandler(r),retryMode:e?.retryMode??(0,Za.loadConfig)({..._P.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||UJ.DEFAULT_RETRY_MODE}),sha256:e?.sha256??LJ.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??yP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Za.loadConfig)(kf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,Za.loadConfig)(kf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Df.getRuntimeConfig=HJ});var ec=d(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.SSOClient=void 0;var GJ=cr(),JJ=ra(),QJ=Z(),wP=na(),KJ=ia(),YJ=sa(),EP=Kr(),vP=ma(),XJ=R(),ZJ=kA(),e4=gP(),cE=class extends XJ.Client{constructor(t){let r=(0,e4.getRuntimeConfig)(t),n=(0,ZJ.resolveClientEndpointParameters)(r),i=(0,GJ.resolveRegionConfig)(n),s=(0,QJ.resolveEndpointConfig)(i),o=(0,EP.resolveRetryConfig)(s),a=(0,wP.resolveHostHeaderConfig)(o),u=(0,vP.resolveUserAgentConfig)(a);super(u),this.config=u,this.middlewareStack.use((0,EP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,JJ.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,wP.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,KJ.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,YJ.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,vP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};Ff.SSOClient=cE});var zf=d(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.SSO=void 0;var t4=Fg(),r4=fp(),n4=hp(),i4=Wg(),s4=ec(),dE=class extends s4.SSOClient{getRoleCredentials(t,r,n){let i=new t4.GetRoleCredentialsCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}listAccountRoles(t,r,n){let i=new r4.ListAccountRolesCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}listAccounts(t,r,n){let i=new n4.ListAccountsCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}logout(t,r,n){let i=new i4.LogoutCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}};Lf.SSO=dE});var SP=d(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var Uf=(b(),S(N));Uf.__exportStar(Fg(),ro);Uf.__exportStar(fp(),ro);Uf.__exportStar(hp(),ro);Uf.__exportStar(Wg(),ro)});var NP=d(uE=>{"use strict";Object.defineProperty(uE,"__esModule",{value:!0});var o4=(b(),S(N));o4.__exportStar(qi(),uE)});var xP=d(bP=>{"use strict";Object.defineProperty(bP,"__esModule",{value:!0})});var AP=d(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.paginateListAccountRoles=void 0;var a4=fp(),c4=zf(),d4=ec(),u4=async(e,t,...r)=>await e.send(new a4.ListAccountRolesCommand(t),...r),l4=async(e,t,...r)=>await e.listAccountRoles(t,...r);async function*p4(e,t,...r){let n=e.startingToken||void 0,i=!0,s;for(;i;){if(t.nextToken=n,t.maxResults=e.pageSize,e.client instanceof c4.SSO)s=await l4(e.client,t,...r);else if(e.client instanceof d4.SSOClient)s=await u4(e.client,t,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield s;let o=n;n=s.nextToken,i=!!(n&&(!e.stopOnSameToken||n!==o))}return void 0}Wf.paginateListAccountRoles=p4});var TP=d(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.paginateListAccounts=void 0;var f4=hp(),m4=zf(),h4=ec(),_4=async(e,t,...r)=>await e.send(new f4.ListAccountsCommand(t),...r),y4=async(e,t,...r)=>await e.listAccounts(t,...r);async function*g4(e,t,...r){let n=e.startingToken||void 0,i=!0,s;for(;i;){if(t.nextToken=n,t.maxResults=e.pageSize,e.client instanceof m4.SSO)s=await y4(e.client,t,...r);else if(e.client instanceof h4.SSOClient)s=await _4(e.client,t,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield s;let o=n;n=s.nextToken,i=!!(n&&(!e.stopOnSameToken||n!==o))}return void 0}jf.paginateListAccounts=g4});var CP=d(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var lE=(b(),S(N));lE.__exportStar(xP(),tc);lE.__exportStar(AP(),tc);lE.__exportStar(TP(),tc)});var OP=d(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.SSOServiceException=void 0;var rc=(b(),S(N));rc.__exportStar(zf(),an);rc.__exportStar(ec(),an);rc.__exportStar(SP(),an);rc.__exportStar(NP(),an);rc.__exportStar(CP(),an);var w4=Zl();Object.defineProperty(an,"SSOServiceException",{enumerable:!0,get:function(){return w4.SSOServiceException}})});var Vf=d(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.REFRESH_MESSAGE=no.EXPIRE_WINDOW_MS=void 0;no.EXPIRE_WINDOW_MS=5*60*1e3;no.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var $f=d(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.SSOOIDCServiceException=void 0;var E4=R(),pE=class e extends E4.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};Bf.SSOOIDCServiceException=pE});var io=d(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.StartDeviceAuthorizationResponseFilterSensitiveLog=L.StartDeviceAuthorizationRequestFilterSensitiveLog=L.RegisterClientResponseFilterSensitiveLog=L.RegisterClientRequestFilterSensitiveLog=L.CreateTokenResponseFilterSensitiveLog=L.CreateTokenRequestFilterSensitiveLog=L.InvalidClientMetadataException=L.UnsupportedGrantTypeException=L.UnauthorizedClientException=L.SlowDownException=L.InvalidScopeException=L.InvalidRequestException=L.InvalidGrantException=L.InvalidClientException=L.InternalServerException=L.ExpiredTokenException=L.AuthorizationPendingException=L.AccessDeniedException=void 0;var Wt=$f(),fE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.AccessDeniedException=fE;var mE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.AuthorizationPendingException=mE;var hE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.ExpiredTokenException=hE;var _E=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InternalServerException=_E;var yE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InvalidClientException=yE;var gE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InvalidGrantException=gE;var wE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InvalidRequestException=wE;var EE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InvalidScopeException=EE;var vE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.SlowDownException=vE;var SE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.UnauthorizedClientException=SE;var NE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.UnsupportedGrantTypeException=NE;var bE=class e extends Wt.SSOOIDCServiceException{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}};L.InvalidClientMetadataException=bE;var v4=e=>({...e});L.CreateTokenRequestFilterSensitiveLog=v4;var S4=e=>({...e});L.CreateTokenResponseFilterSensitiveLog=S4;var N4=e=>({...e});L.RegisterClientRequestFilterSensitiveLog=N4;var b4=e=>({...e});L.RegisterClientResponseFilterSensitiveLog=b4;var x4=e=>({...e});L.StartDeviceAuthorizationRequestFilterSensitiveLog=x4;var A4=e=>({...e});L.StartDeviceAuthorizationResponseFilterSensitiveLog=A4});var Gf=d(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.deserializeAws_restJson1StartDeviceAuthorizationCommand=ft.deserializeAws_restJson1RegisterClientCommand=ft.deserializeAws_restJson1CreateTokenCommand=ft.serializeAws_restJson1StartDeviceAuthorizationCommand=ft.serializeAws_restJson1RegisterClientCommand=ft.serializeAws_restJson1CreateTokenCommand=void 0;var xE=Ke(),x=R(),jt=io(),AE=$f(),T4=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/token`,u;return u=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:MP(e.scope,t)}}),new xE.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ft.serializeAws_restJson1CreateTokenCommand=T4;var C4=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/client/register`,u;return u=JSON.stringify({...e.clientName!=null&&{clientName:e.clientName},...e.clientType!=null&&{clientType:e.clientType},...e.scopes!=null&&{scopes:MP(e.scopes,t)}}),new xE.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ft.serializeAws_restJson1RegisterClientCommand=C4;var O4=async(e,t)=>{let{hostname:r,protocol:n="https",port:i,path:s}=await t.endpoint(),o={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,u;return u=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.startUrl!=null&&{startUrl:e.startUrl}}),new xE.HttpRequest({protocol:n,hostname:r,port:i,method:"POST",headers:o,path:a,body:u})};ft.serializeAws_restJson1StartDeviceAuthorizationCommand=O4;var P4=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return I4(e,t);let r=tt({$metadata:rt(e)}),n=(0,x.expectNonNull)((0,x.expectObject)(await Hf(e.body,t)),"body");return n.accessToken!=null&&(r.accessToken=(0,x.expectString)(n.accessToken)),n.expiresIn!=null&&(r.expiresIn=(0,x.expectInt32)(n.expiresIn)),n.idToken!=null&&(r.idToken=(0,x.expectString)(n.idToken)),n.refreshToken!=null&&(r.refreshToken=(0,x.expectString)(n.refreshToken)),n.tokenType!=null&&(r.tokenType=(0,x.expectString)(n.tokenType)),r};ft.deserializeAws_restJson1CreateTokenCommand=P4;var I4=async(e,t)=>{let r={...e,body:await OE(e.body,t)},n=PE(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await D4(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await F4(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await L4(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await TE(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await PP(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await U4(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await CE(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await IP(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await RP(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await qP(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await W4(r,t);default:let i=r.body;(0,x.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:AE.SSOOIDCServiceException,errorCode:n})}},R4=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return q4(e,t);let r=tt({$metadata:rt(e)}),n=(0,x.expectNonNull)((0,x.expectObject)(await Hf(e.body,t)),"body");return n.authorizationEndpoint!=null&&(r.authorizationEndpoint=(0,x.expectString)(n.authorizationEndpoint)),n.clientId!=null&&(r.clientId=(0,x.expectString)(n.clientId)),n.clientIdIssuedAt!=null&&(r.clientIdIssuedAt=(0,x.expectLong)(n.clientIdIssuedAt)),n.clientSecret!=null&&(r.clientSecret=(0,x.expectString)(n.clientSecret)),n.clientSecretExpiresAt!=null&&(r.clientSecretExpiresAt=(0,x.expectLong)(n.clientSecretExpiresAt)),n.tokenEndpoint!=null&&(r.tokenEndpoint=(0,x.expectString)(n.tokenEndpoint)),r};ft.deserializeAws_restJson1RegisterClientCommand=R4;var q4=async(e,t)=>{let r={...e,body:await OE(e.body,t)},n=PE(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await TE(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await z4(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await CE(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await IP(r,t);default:let i=r.body;(0,x.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:AE.SSOOIDCServiceException,errorCode:n})}},M4=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return k4(e,t);let r=tt({$metadata:rt(e)}),n=(0,x.expectNonNull)((0,x.expectObject)(await Hf(e.body,t)),"body");return n.deviceCode!=null&&(r.deviceCode=(0,x.expectString)(n.deviceCode)),n.expiresIn!=null&&(r.expiresIn=(0,x.expectInt32)(n.expiresIn)),n.interval!=null&&(r.interval=(0,x.expectInt32)(n.interval)),n.userCode!=null&&(r.userCode=(0,x.expectString)(n.userCode)),n.verificationUri!=null&&(r.verificationUri=(0,x.expectString)(n.verificationUri)),n.verificationUriComplete!=null&&(r.verificationUriComplete=(0,x.expectString)(n.verificationUriComplete)),r};ft.deserializeAws_restJson1StartDeviceAuthorizationCommand=M4;var k4=async(e,t)=>{let r={...e,body:await OE(e.body,t)},n=PE(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await TE(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await PP(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await CE(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await RP(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await qP(r,t);default:let i=r.body;(0,x.throwDefaultError)({output:e,parsedBody:i,exceptionCtor:AE.SSOOIDCServiceException,errorCode:n})}},tt=x.map,D4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.AccessDeniedException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},F4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.AuthorizationPendingException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},L4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.ExpiredTokenException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},TE=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InternalServerException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},PP=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InvalidClientException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},z4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InvalidClientMetadataException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},U4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InvalidGrantException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},CE=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InvalidRequestException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},IP=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.InvalidScopeException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},RP=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.SlowDownException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},qP=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.UnauthorizedClientException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},W4=async(e,t)=>{let r=tt({}),n=e.body;n.error!=null&&(r.error=(0,x.expectString)(n.error)),n.error_description!=null&&(r.error_description=(0,x.expectString)(n.error_description));let i=new jt.UnsupportedGrantTypeException({$metadata:rt(e),...r});return(0,x.decorateServiceException)(i,e.body)},MP=(e,t)=>e.filter(r=>r!=null).map(r=>r),rt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),j4=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),V4=(e,t)=>j4(e,t).then(r=>t.utf8Encoder(r)),Hf=(e,t)=>V4(e,t).then(r=>r.length?JSON.parse(r):{}),OE=async(e,t)=>{let r=await Hf(e,t);return r.message=r.message??r.Message,r},PE=(e,t)=>{let r=(s,o)=>Object.keys(s).find(a=>a.toLowerCase()===o.toLowerCase()),n=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)}});var RE=d(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.CreateTokenCommand=void 0;var B4=Z(),$4=fe(),H4=R(),kP=io(),DP=Gf(),IE=class e extends H4.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,$4.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,B4.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:kP.CreateTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:kP.CreateTokenResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,DP.serializeAws_restJson1CreateTokenCommand)(t,r)}deserialize(t,r){return(0,DP.deserializeAws_restJson1CreateTokenCommand)(t,r)}};Jf.CreateTokenCommand=IE});var ME=d(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.RegisterClientCommand=void 0;var G4=Z(),J4=fe(),Q4=R(),FP=io(),LP=Gf(),qE=class e extends Q4.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,J4.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,G4.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:FP.RegisterClientRequestFilterSensitiveLog,outputFilterSensitiveLog:FP.RegisterClientResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,LP.serializeAws_restJson1RegisterClientCommand)(t,r)}deserialize(t,r){return(0,LP.deserializeAws_restJson1RegisterClientCommand)(t,r)}};Qf.RegisterClientCommand=qE});var DE=d(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.StartDeviceAuthorizationCommand=void 0;var K4=Z(),Y4=fe(),X4=R(),zP=io(),UP=Gf(),kE=class e extends X4.Command{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use((0,Y4.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,K4.getEndpointPlugin)(r,e.getEndpointParameterInstructions()));let i=t.concat(this.middlewareStack),{logger:s}=r,u={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:zP.StartDeviceAuthorizationRequestFilterSensitiveLog,outputFilterSensitiveLog:zP.StartDeviceAuthorizationResponseFilterSensitiveLog},{requestHandler:l}=r;return i.resolve(p=>l.handle(p.request,n||{}),u)}serialize(t,r){return(0,UP.serializeAws_restJson1StartDeviceAuthorizationCommand)(t,r)}deserialize(t,r){return(0,UP.deserializeAws_restJson1StartDeviceAuthorizationCommand)(t,r)}};Kf.StartDeviceAuthorizationCommand=kE});var WP=d(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.resolveClientEndpointParameters=void 0;var Z4=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});Yf.resolveClientEndpointParameters=Z4});var jP=d((_he,e6)=>{e6.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var eI=d(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.ruleSet=void 0;var KP="required",cn="fn",dn="argv",so="ref",FE="PartitionResult",Pr="tree",nc="error",ic="endpoint",VP={[KP]:!1,type:"String"},BP={[KP]:!0,default:!1,type:"Boolean"},YP={[so]:"Endpoint"},XP={[cn]:"booleanEquals",[dn]:[{[so]:"UseFIPS"},!0]},ZP={[cn]:"booleanEquals",[dn]:[{[so]:"UseDualStack"},!0]},Ir={},$P={[cn]:"booleanEquals",[dn]:[!0,{[cn]:"getAttr",[dn]:[{[so]:FE},"supportsFIPS"]}]},HP={[cn]:"booleanEquals",[dn]:[!0,{[cn]:"getAttr",[dn]:[{[so]:FE},"supportsDualStack"]}]},GP=[YP],JP=[XP],QP=[ZP],t6={version:"1.0",parameters:{Region:VP,UseDualStack:BP,UseFIPS:BP,Endpoint:VP},rules:[{conditions:[{[cn]:"aws.partition",[dn]:[{[so]:"Region"}],assign:FE}],type:Pr,rules:[{conditions:[{[cn]:"isSet",[dn]:GP},{[cn]:"parseURL",[dn]:GP,assign:"url"}],type:Pr,rules:[{conditions:JP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:nc},{type:Pr,rules:[{conditions:QP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:nc},{endpoint:{url:YP,properties:Ir,headers:Ir},type:ic}]}]},{conditions:[XP,ZP],type:Pr,rules:[{conditions:[$P,HP],type:Pr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:ic}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:nc}]},{conditions:JP,type:Pr,rules:[{conditions:[$P],type:Pr,rules:[{type:Pr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:ic}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:nc}]},{conditions:QP,type:Pr,rules:[{conditions:[HP],type:Pr,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:ic}]},{error:"DualStack is enabled but this partition does not support DualStack",type:nc}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:ic}]}]};Xf.ruleSet=t6});var tI=d(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.defaultEndpointResolver=void 0;var r6=Qa(),n6=eI(),i6=(e,t={})=>(0,r6.resolveEndpoint)(n6.ruleSet,{endpointParams:e,logger:t.logger});Zf.defaultEndpointResolver=i6});var iI=d(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.getRuntimeConfig=void 0;var s6=R(),o6=_i(),rI=Fa(),nI=Yr(),a6=tI(),c6=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??rI.fromBase64,base64Encoder:e?.base64Encoder??rI.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??a6.defaultEndpointResolver,logger:e?.logger??new s6.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??o6.parseUrl,utf8Decoder:e?.utf8Decoder??nI.fromUtf8,utf8Encoder:e?.utf8Encoder??nI.toUtf8});em.getRuntimeConfig=c6});var aI=d(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.getRuntimeConfig=void 0;var d6=(b(),S(N)),u6=d6.__importDefault(jP()),tm=cr(),l6=Na(),sI=Kr(),sc=jn(),oI=xa(),p6=Aa(),f6=Mt(),m6=Da(),h6=iI(),_6=R(),y6=Xa(),g6=R(),w6=e=>{(0,g6.emitWarningIfUnsupportedVersion)(process.version);let t=(0,y6.resolveDefaultsModeConfig)(e),r=()=>t().then(_6.loadConfigsForDefaultMode),n=(0,h6.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??p6.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,m6.defaultUserAgent)({serviceId:n.serviceId,clientVersion:u6.default.version}),maxAttempts:e?.maxAttempts??(0,sc.loadConfig)(sI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,sc.loadConfig)(tm.NODE_REGION_CONFIG_OPTIONS,tm.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new oI.NodeHttpHandler(r),retryMode:e?.retryMode??(0,sc.loadConfig)({...sI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||f6.DEFAULT_RETRY_MODE}),sha256:e?.sha256??l6.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??oI.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,sc.loadConfig)(tm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,sc.loadConfig)(tm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};rm.getRuntimeConfig=w6});var zE=d(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.SSOOIDCClient=void 0;var E6=cr(),v6=ra(),S6=Z(),cI=na(),N6=ia(),b6=sa(),dI=Kr(),uI=ma(),x6=R(),A6=WP(),T6=aI(),LE=class extends x6.Client{constructor(t){let r=(0,T6.getRuntimeConfig)(t),n=(0,A6.resolveClientEndpointParameters)(r),i=(0,E6.resolveRegionConfig)(n),s=(0,S6.resolveEndpointConfig)(i),o=(0,dI.resolveRetryConfig)(s),a=(0,cI.resolveHostHeaderConfig)(o),u=(0,uI.resolveUserAgentConfig)(a);super(u),this.config=u,this.middlewareStack.use((0,dI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,v6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,cI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,N6.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,b6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,uI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};nm.SSOOIDCClient=LE});var lI=d(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.SSOOIDC=void 0;var C6=RE(),O6=ME(),P6=DE(),I6=zE(),UE=class extends I6.SSOOIDCClient{createToken(t,r,n){let i=new C6.CreateTokenCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}registerClient(t,r,n){let i=new O6.RegisterClientCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}startDeviceAuthorization(t,r,n){let i=new P6.StartDeviceAuthorizationCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}};im.SSOOIDC=UE});var pI=d(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var WE=(b(),S(N));WE.__exportStar(RE(),oc);WE.__exportStar(ME(),oc);WE.__exportStar(DE(),oc)});var fI=d(jE=>{"use strict";Object.defineProperty(jE,"__esModule",{value:!0});var R6=(b(),S(N));R6.__exportStar(io(),jE)});var VE=d(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.SSOOIDCServiceException=void 0;var sm=(b(),S(N));sm.__exportStar(lI(),ei);sm.__exportStar(zE(),ei);sm.__exportStar(pI(),ei);sm.__exportStar(fI(),ei);var q6=$f();Object.defineProperty(ei,"SSOOIDCServiceException",{enumerable:!0,get:function(){return q6.SSOOIDCServiceException}})});var mI=d(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.getSsoOidcClient=void 0;var M6=VE(),BE={},k6=e=>{if(BE[e])return BE[e];let t=new M6.SSOOIDCClient({region:e});return BE[e]=t,t};om.getSsoOidcClient=k6});var hI=d(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.getNewSsoOidcToken=void 0;var D6=VE(),F6=mI(),L6=(e,t)=>(0,F6.getSsoOidcClient)(t).send(new D6.CreateTokenCommand({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));am.getNewSsoOidcToken=L6});var _I=d(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.validateTokenExpiry=void 0;var z6=Q(),U6=Vf(),W6=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new z6.TokenProviderError(`Token is expired. ${U6.REFRESH_MESSAGE}`,!1)};cm.validateTokenExpiry=W6});var yI=d(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.validateTokenKey=void 0;var j6=Q(),V6=Vf(),B6=(e,t,r=!1)=>{if(typeof t>"u")throw new j6.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${V6.REFRESH_MESSAGE}`,!1)};dm.validateTokenKey=B6});var gI=d(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.writeSSOTokenToFile=void 0;var $6=yr(),H6=z("fs"),{writeFile:G6}=H6.promises,J6=(e,t)=>{let r=(0,$6.getSSOTokenFilepath)(e),n=JSON.stringify(t,null,2);return G6(r,n)};um.writeSSOTokenToFile=J6});var $E=d(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.fromSso=void 0;var ac=Q(),lm=yr(),wI=Vf(),Q6=hI(),EI=_I(),Li=yI(),K6=gI(),vI=new Date(0),Y6=(e={})=>async()=>{let t=await(0,lm.parseKnownFiles)(e),r=(0,lm.getProfileName)(e),n=t[r];if(n){if(!n.sso_session)throw new ac.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new ac.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let i=n.sso_session,o=(await(0,lm.loadSsoSessionData)(e))[i];if(!o)throw new ac.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let h of["sso_start_url","sso_region"])if(!o[h])throw new ac.TokenProviderError(`Sso session '${i}' is missing required property '${h}'.`,!1);let a=o.sso_start_url,u=o.sso_region,l;try{l=await(0,lm.getSSOTokenFromFile)(i)}catch{throw new ac.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${wI.REFRESH_MESSAGE}`,!1)}(0,Li.validateTokenKey)("accessToken",l.accessToken),(0,Li.validateTokenKey)("expiresAt",l.expiresAt);let{accessToken:p,expiresAt:f}=l,m={token:p,expiration:new Date(f)};if(m.expiration.getTime()-Date.now()>wI.EXPIRE_WINDOW_MS)return m;if(Date.now()-vI.getTime()<30*1e3)return(0,EI.validateTokenExpiry)(m),m;(0,Li.validateTokenKey)("clientId",l.clientId,!0),(0,Li.validateTokenKey)("clientSecret",l.clientSecret,!0),(0,Li.validateTokenKey)("refreshToken",l.refreshToken,!0);try{vI.setTime(Date.now());let h=await(0,Q6.getNewSsoOidcToken)(l,u);(0,Li.validateTokenKey)("accessToken",h.accessToken),(0,Li.validateTokenKey)("expiresIn",h.expiresIn);let g=new Date(Date.now()+h.expiresIn*1e3);try{await(0,K6.writeSSOTokenToFile)(i,{...l,accessToken:h.accessToken,expiresAt:g.toISOString(),refreshToken:h.refreshToken})}catch{}return{token:h.accessToken,expiration:g}}catch{return(0,EI.validateTokenExpiry)(m),m}};pm.fromSso=Y6});var SI=d(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.fromStatic=void 0;var X6=Q(),Z6=({token:e})=>async()=>{if(!e||!e.token)throw new X6.TokenProviderError("Please pass a valid token to fromStatic",!1);return e};fm.fromStatic=Z6});var NI=d(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.nodeProvider=void 0;var HE=Q(),eQ=$E(),tQ=(e={})=>(0,HE.memoize)((0,HE.chain)((0,eQ.fromSso)(e),async()=>{throw new HE.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);mm.nodeProvider=tQ});var bI=d(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var GE=(b(),S(N));GE.__exportStar($E(),cc);GE.__exportStar(SI(),cc);GE.__exportStar(NI(),cc)});var AI=d(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.resolveSSOCredentials=void 0;var xI=OP(),dc=Q(),rQ=yr(),nQ=bI(),iQ=15*60*1e3,uc=!1,sQ=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,profile:o})=>{let a,u="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let v=await(0,nQ.fromSso)({profile:o})();a={accessToken:v.token,expiresAt:new Date(v.expiration).toISOString()}}catch(v){throw new dc.CredentialsProviderError(v.message,uc)}else try{a=await(0,rQ.getSSOTokenFromFile)(e)}catch{throw new dc.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${u}`,uc)}if(new Date(a.expiresAt).getTime()-Date.now()<=iQ)throw new dc.CredentialsProviderError(`The SSO session associated with this profile has expired. ${u}`,uc);let{accessToken:l}=a,p=s||new xI.SSOClient({region:n}),f;try{f=await p.send(new xI.GetRoleCredentialsCommand({accountId:r,roleName:i,accessToken:l}))}catch(v){throw dc.CredentialsProviderError.from(v,uc)}let{roleCredentials:{accessKeyId:m,secretAccessKey:h,sessionToken:g,expiration:y}={}}=f;if(!m||!h||!g||!y)throw new dc.CredentialsProviderError("SSO returns an invalid temporary credential.",uc);return{accessKeyId:m,secretAccessKey:h,sessionToken:g,expiration:new Date(y)}};hm.resolveSSOCredentials=sQ});var JE=d(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.validateSsoProfile=void 0;var oQ=Q(),aQ=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:i}=e;if(!t||!r||!n||!i)throw new oQ.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};_m.validateSsoProfile=aQ});var CI=d(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.fromSSO=void 0;var lc=Q(),QE=yr(),cQ=Og(),TI=AI(),dQ=JE(),uQ=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,ssoSession:o}=e,a=(0,QE.getProfileName)(e);if(!t&&!r&&!n&&!i&&!o){let l=(await(0,QE.parseKnownFiles)(e))[a];if(!l)throw new lc.CredentialsProviderError(`Profile ${a} was not found.`);if(!(0,cQ.isSsoProfile)(l))throw new lc.CredentialsProviderError(`Profile ${a} is not configured with SSO credentials.`);if(l?.sso_session){let v=(await(0,QE.loadSsoSessionData)(e))[l.sso_session],X=` configurations in profile ${a} and sso-session ${l.sso_session}`;if(n&&n!==v.sso_region)throw new lc.CredentialsProviderError("Conflicting SSO region"+X,!1);if(t&&t!==v.sso_start_url)throw new lc.CredentialsProviderError("Conflicting SSO start_url"+X,!1);l.sso_region=v.sso_region,l.sso_start_url=v.sso_start_url}let{sso_start_url:p,sso_account_id:f,sso_region:m,sso_role_name:h,sso_session:g}=(0,dQ.validateSsoProfile)(l);return(0,TI.resolveSSOCredentials)({ssoStartUrl:p,ssoSession:g,ssoAccountId:f,ssoRegion:m,ssoRoleName:h,ssoClient:s,profile:a})}else{if(!t||!r||!n||!i)throw new lc.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,TI.resolveSSOCredentials)({ssoStartUrl:t,ssoSession:o,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:s,profile:a})}};ym.fromSSO=uQ});var PI=d(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0})});var wm=d(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});var gm=(b(),S(N));gm.__exportStar(CI(),oo);gm.__exportStar(Og(),oo);gm.__exportStar(PI(),oo);gm.__exportStar(JE(),oo)});var RI=d(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.resolveSsoCredentials=ao.isSsoProfile=void 0;var II=wm(),lQ=wm();Object.defineProperty(ao,"isSsoProfile",{enumerable:!0,get:function(){return lQ.isSsoProfile}});var pQ=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:i,sso_role_name:s}=(0,II.validateSsoProfile)(e);return(0,II.fromSSO)({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:i,ssoRoleName:s})()};ao.resolveSsoCredentials=pQ});var qI=d(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.resolveStaticCredentials=co.isStaticCredsProfile=void 0;var fQ=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1;co.isStaticCredsProfile=fQ;var mQ=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});co.resolveStaticCredentials=mQ});var KE=d(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.fromWebToken=void 0;var hQ=Q(),_Q=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:s,policy:o,durationSeconds:a,roleAssumerWithWebIdentity:u}=e;if(!u)throw new hQ.CredentialsProviderError(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return u({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:s,Policy:o,DurationSeconds:a})};Em.fromWebToken=_Q});var MI=d(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.fromTokenFile=void 0;var yQ=Q(),gQ=z("fs"),wQ=KE(),EQ="AWS_WEB_IDENTITY_TOKEN_FILE",vQ="AWS_ROLE_ARN",SQ="AWS_ROLE_SESSION_NAME",NQ=(e={})=>async()=>bQ(e);vm.fromTokenFile=NQ;var bQ=e=>{var t,r,n;let i=(t=e?.webIdentityTokenFile)!==null&&t!==void 0?t:process.env[EQ],s=(r=e?.roleArn)!==null&&r!==void 0?r:process.env[vQ],o=(n=e?.roleSessionName)!==null&&n!==void 0?n:process.env[SQ];if(!i||!s)throw new yQ.CredentialsProviderError("Web identity configuration not specified");return(0,wQ.fromWebToken)({...e,webIdentityToken:(0,gQ.readFileSync)(i,{encoding:"ascii"}),roleArn:s,roleSessionName:o})()}});var YE=d(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});var kI=(b(),S(N));kI.__exportStar(MI(),Sm);kI.__exportStar(KE(),Sm)});var DI=d(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.resolveWebIdentityCredentials=uo.isWebIdentityProfile=void 0;var xQ=YE(),AQ=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1;uo.isWebIdentityProfile=AQ;var TQ=async(e,t)=>(0,xQ.fromTokenFile)({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();uo.resolveWebIdentityCredentials=TQ});var xg=d(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.resolveProfileData=void 0;var CQ=Q(),FI=vA(),LI=AA(),zI=RI(),Nm=qI(),UI=DI(),OQ=async(e,t,r,n={})=>{let i=t[e];if(Object.keys(n).length>0&&(0,Nm.isStaticCredsProfile)(i))return(0,Nm.resolveStaticCredentials)(i);if((0,FI.isAssumeRoleProfile)(i))return(0,FI.resolveAssumeRoleCredentials)(e,t,r,n);if((0,Nm.isStaticCredsProfile)(i))return(0,Nm.resolveStaticCredentials)(i);if((0,UI.isWebIdentityProfile)(i))return(0,UI.resolveWebIdentityCredentials)(i,r);if((0,LI.isProcessProfile)(i))return(0,LI.resolveProcessCredentials)(r,e);if((0,zI.isSsoProfile)(i))return(0,zI.resolveSsoCredentials)(i);throw new CQ.CredentialsProviderError(`Profile ${e} could not be found or parsed in shared credentials file.`)};bm.resolveProfileData=OQ});var jI=d(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.fromIni=void 0;var WI=yr(),PQ=xg(),IQ=(e={})=>async()=>{let t=await(0,WI.parseKnownFiles)(e);return(0,PQ.resolveProfileData)((0,WI.getProfileName)(e),t,e)};xm.fromIni=IQ});var VI=d(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});var RQ=(b(),S(N));RQ.__exportStar(jI(),XE)});var BI=d(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.remoteProvider=zi.ENV_IMDS_DISABLED=void 0;var Am=Hl(),qQ=Q();zi.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var MQ=e=>process.env[Am.ENV_CMDS_RELATIVE_URI]||process.env[Am.ENV_CMDS_FULL_URI]?(0,Am.fromContainerMetadata)(e):process.env[zi.ENV_IMDS_DISABLED]?async()=>{throw new qQ.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,Am.fromInstanceMetadata)(e);zi.remoteProvider=MQ});var $I=d(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.defaultProvider=void 0;var kQ=dg(),DQ=VI(),FQ=Cg(),LQ=wm(),zQ=YE(),ZE=Q(),UQ=yr(),WQ=BI(),jQ=(e={})=>(0,ZE.memoize)((0,ZE.chain)(...e.profile||process.env[UQ.ENV_PROFILE]?[]:[(0,kQ.fromEnv)()],(0,LQ.fromSSO)(e),(0,DQ.fromIni)(e),(0,FQ.fromProcess)(e),(0,zQ.fromTokenFile)(e),(0,WQ.remoteProvider)(e),async()=>{throw new ZE.CredentialsProviderError("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Tm.defaultProvider=jQ});var tv=d(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});var VQ=(b(),S(N));VQ.__exportStar($I(),ev)});var pR=d(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.ruleSet=void 0;var tR="required",M="type",$="fn",H="argv",ti="ref",Ui="properties",Wi="headers",HI=!1,BQ=!0,nv="PartitionResult",Vt="tree",ji="booleanEquals",ze="stringEquals",rR="sigv4",nR="us-east-1",iR="sts",de="endpoint",sR="https://sts.{Region}.{PartitionResult#dnsSuffix}",pc="error",iv="getAttr",GI={[tR]:!1,[M]:"String"},rv={[tR]:!0,default:!1,[M]:"Boolean"},Ue={[ti]:"Region"},oR={[ti]:"UseFIPS"},aR={[ti]:"UseDualStack"},JI={[$]:"isSet",[H]:[{[ti]:"Endpoint"}]},cR={[ti]:"Endpoint"},He={url:"https://sts.amazonaws.com",[Ui]:{authSchemes:[{name:rR,signingRegion:nR,signingName:iR}]},[Wi]:{}},un={},QI={conditions:[{[$]:ze,[H]:[Ue,"aws-global"]}],[de]:He,[M]:de},dR={[$]:ji,[H]:[oR,!0]},uR={[$]:ji,[H]:[aR,!0]},KI={[$]:ji,[H]:[!0,{[$]:iv,[H]:[{[ti]:nv},"supportsFIPS"]}]},lR={[ti]:nv},YI={[$]:ji,[H]:[!0,{[$]:iv,[H]:[lR,"supportsDualStack"]}]},XI={url:sR,[Ui]:{},[Wi]:{}},$Q=[cR],ZI=[dR],eR=[uR],HQ={version:"1.0",parameters:{Region:GI,UseDualStack:rv,UseFIPS:rv,Endpoint:GI,UseGlobalEndpoint:rv},rules:[{conditions:[{[$]:"aws.partition",[H]:[Ue],assign:nv}],[M]:Vt,rules:[{conditions:[{[$]:ji,[H]:[{[ti]:"UseGlobalEndpoint"},BQ]},{[$]:ji,[H]:[oR,HI]},{[$]:ji,[H]:[aR,HI]},{[$]:"not",[H]:[JI]}],[M]:Vt,rules:[{conditions:[{[$]:ze,[H]:[Ue,"ap-northeast-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"ap-south-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"ap-southeast-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"ap-southeast-2"]}],endpoint:He,[M]:de},QI,{conditions:[{[$]:ze,[H]:[Ue,"ca-central-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"eu-central-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"eu-north-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"eu-west-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"eu-west-2"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"eu-west-3"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"sa-east-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,nR]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"us-east-2"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"us-west-1"]}],endpoint:He,[M]:de},{conditions:[{[$]:ze,[H]:[Ue,"us-west-2"]}],endpoint:He,[M]:de},{endpoint:{url:sR,[Ui]:{authSchemes:[{name:rR,signingRegion:"{Region}",signingName:iR}]},[Wi]:un},[M]:de}]},{conditions:[JI,{[$]:"parseURL",[H]:$Q,assign:"url"}],[M]:Vt,rules:[{conditions:ZI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:pc},{[M]:Vt,rules:[{conditions:eR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:pc},{endpoint:{url:cR,[Ui]:un,[Wi]:un},[M]:de}]}]},{conditions:[dR,uR],[M]:Vt,rules:[{conditions:[KI,YI],[M]:Vt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ui]:un,[Wi]:un},[M]:de}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:pc}]},{conditions:ZI,[M]:Vt,rules:[{conditions:[KI],[M]:Vt,rules:[{[M]:Vt,rules:[{conditions:[{[$]:ze,[H]:["aws-us-gov",{[$]:iv,[H]:[lR,"name"]}]}],endpoint:XI,[M]:de},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Ui]:un,[Wi]:un},[M]:de}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[M]:pc}]},{conditions:eR,[M]:Vt,rules:[{conditions:[YI],[M]:Vt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ui]:un,[Wi]:un},[M]:de}]},{error:"DualStack is enabled but this partition does not support DualStack",[M]:pc}]},{[M]:Vt,rules:[QI,{endpoint:XI,[M]:de}]}]}]};Cm.ruleSet=HQ});var fR=d(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.defaultEndpointResolver=void 0;var GQ=Qa(),JQ=pR(),QQ=(e,t={})=>(0,GQ.resolveEndpoint)(JQ.ruleSet,{endpointParams:e,logger:t.logger});Om.defaultEndpointResolver=QQ});var _R=d(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.getRuntimeConfig=void 0;var KQ=R(),YQ=_i(),mR=Fa(),hR=Yr(),XQ=fR(),ZQ=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??mR.fromBase64,base64Encoder:e?.base64Encoder??mR.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??XQ.defaultEndpointResolver,logger:e?.logger??new KQ.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??YQ.parseUrl,utf8Decoder:e?.utf8Decoder??hR.fromUtf8,utf8Encoder:e?.utf8Encoder??hR.toUtf8});Pm.getRuntimeConfig=ZQ});var wR=d(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.getRuntimeConfig=void 0;var eK=(b(),S(N)),tK=eK.__importDefault(q0()),rK=ag(),Im=cr(),nK=tv(),iK=Na(),yR=Kr(),fc=jn(),gR=xa(),sK=Aa(),oK=Mt(),aK=Da(),cK=_R(),dK=R(),uK=Xa(),lK=R(),pK=e=>{(0,lK.emitWarningIfUnsupportedVersion)(process.version);let t=(0,uK.resolveDefaultsModeConfig)(e),r=()=>t().then(dK.loadConfigsForDefaultMode),n=(0,cK.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??sK.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??(0,rK.decorateDefaultCredentialProvider)(nK.defaultProvider),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,aK.defaultUserAgent)({serviceId:n.serviceId,clientVersion:tK.default.version}),maxAttempts:e?.maxAttempts??(0,fc.loadConfig)(yR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,fc.loadConfig)(Im.NODE_REGION_CONFIG_OPTIONS,Im.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new gR.NodeHttpHandler(r),retryMode:e?.retryMode??(0,fc.loadConfig)({...yR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||oK.DEFAULT_RETRY_MODE}),sha256:e?.sha256??iK.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??gR.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,fc.loadConfig)(Im.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,fc.loadConfig)(Im.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Rm.getRuntimeConfig=pK});var Mm=d(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.STSClient=void 0;var fK=cr(),mK=ra(),hK=Z(),ER=na(),_K=ia(),yK=sa(),vR=Kr(),gK=I0(),SR=ma(),wK=R(),EK=R0(),vK=wR(),sv=class e extends wK.Client{constructor(t){let r=(0,vK.getRuntimeConfig)(t),n=(0,EK.resolveClientEndpointParameters)(r),i=(0,fK.resolveRegionConfig)(n),s=(0,hK.resolveEndpointConfig)(i),o=(0,vR.resolveRetryConfig)(s),a=(0,ER.resolveHostHeaderConfig)(o),u=(0,gK.resolveStsAuthConfig)(a,{stsClientCtor:e}),l=(0,SR.resolveUserAgentConfig)(u);super(l),this.config=l,this.middlewareStack.use((0,vR.getRetryPlugin)(this.config)),this.middlewareStack.use((0,mK.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,ER.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,_K.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,yK.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,SR.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};qm.STSClient=sv});var NR=d(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.STS=void 0;var SK=ll(),NK=Qy(),bK=ml(),xK=Xy(),AK=eg(),TK=rg(),CK=ig(),OK=og(),PK=Mm(),ov=class extends PK.STSClient{assumeRole(t,r,n){let i=new SK.AssumeRoleCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}assumeRoleWithSAML(t,r,n){let i=new NK.AssumeRoleWithSAMLCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}assumeRoleWithWebIdentity(t,r,n){let i=new bK.AssumeRoleWithWebIdentityCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}decodeAuthorizationMessage(t,r,n){let i=new xK.DecodeAuthorizationMessageCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}getAccessKeyInfo(t,r,n){let i=new AK.GetAccessKeyInfoCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}getCallerIdentity(t,r,n){let i=new TK.GetCallerIdentityCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}getFederationToken(t,r,n){let i=new CK.GetFederationTokenCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}getSessionToken(t,r,n){let i=new OK.GetSessionTokenCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}};km.STS=ov});var bR=d(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var ri=(b(),S(N));ri.__exportStar(ll(),Rr);ri.__exportStar(Qy(),Rr);ri.__exportStar(ml(),Rr);ri.__exportStar(Xy(),Rr);ri.__exportStar(eg(),Rr);ri.__exportStar(rg(),Rr);ri.__exportStar(ig(),Rr);ri.__exportStar(og(),Rr)});var CR=d(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.decorateDefaultCredentialProvider=qr.getDefaultRoleAssumerWithWebIdentity=qr.getDefaultRoleAssumer=void 0;var xR=ag(),AR=Mm(),TR=(e,t)=>t?class extends e{constructor(n){super(n);for(let i of t)this.middlewareStack.use(i)}}:e,IK=(e={},t)=>(0,xR.getDefaultRoleAssumer)(e,TR(AR.STSClient,t));qr.getDefaultRoleAssumer=IK;var RK=(e={},t)=>(0,xR.getDefaultRoleAssumerWithWebIdentity)(e,TR(AR.STSClient,t));qr.getDefaultRoleAssumerWithWebIdentity=RK;var qK=e=>t=>e({roleAssumer:(0,qr.getDefaultRoleAssumer)(t),roleAssumerWithWebIdentity:(0,qr.getDefaultRoleAssumerWithWebIdentity)(t),...t});qr.decorateDefaultCredentialProvider=qK});var OR=d(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});var MK=(b(),S(N));MK.__exportStar(Gt(),av)});var PR=d(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.STSServiceException=void 0;var mc=(b(),S(N));mc.__exportStar(NR(),ln);mc.__exportStar(Mm(),ln);mc.__exportStar(bR(),ln);mc.__exportStar(CR(),ln);mc.__exportStar(OR(),ln);var kK=ol();Object.defineProperty(ln,"STSServiceException",{enumerable:!0,get:function(){return kK.STSServiceException}})});var jR=d(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.ruleSet=void 0;var LR="required",fn="fn",mn="argv",lo="ref",cv="PartitionResult",pn="tree",hc="error",_c="endpoint",IR={[LR]:!1,type:"String"},RR={[LR]:!0,default:!1,type:"Boolean"},zR={[lo]:"Endpoint"},UR={[fn]:"booleanEquals",[mn]:[{[lo]:"UseFIPS"},!0]},WR={[fn]:"booleanEquals",[mn]:[{[lo]:"UseDualStack"},!0]},Mr={},qR={[fn]:"booleanEquals",[mn]:[!0,{[fn]:"getAttr",[mn]:[{[lo]:cv},"supportsFIPS"]}]},MR={[fn]:"booleanEquals",[mn]:[!0,{[fn]:"getAttr",[mn]:[{[lo]:cv},"supportsDualStack"]}]},kR=[zR],DR=[UR],FR=[WR],DK={version:"1.0",parameters:{Region:IR,UseDualStack:RR,UseFIPS:RR,Endpoint:IR},rules:[{conditions:[{[fn]:"aws.partition",[mn]:[{[lo]:"Region"}],assign:cv}],type:pn,rules:[{conditions:[{[fn]:"isSet",[mn]:kR},{[fn]:"parseURL",[mn]:kR,assign:"url"}],type:pn,rules:[{conditions:DR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:hc},{type:pn,rules:[{conditions:FR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:hc},{endpoint:{url:zR,properties:Mr,headers:Mr},type:_c}]}]},{conditions:[UR,WR],type:pn,rules:[{conditions:[qR,MR],type:pn,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mr,headers:Mr},type:_c}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:hc}]},{conditions:DR,type:pn,rules:[{conditions:[qR],type:pn,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Mr,headers:Mr},type:_c}]},{error:"FIPS is enabled but this partition does not support FIPS",type:hc}]},{conditions:FR,type:pn,rules:[{conditions:[MR],type:pn,rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mr,headers:Mr},type:_c}]},{error:"DualStack is enabled but this partition does not support DualStack",type:hc}]},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:Mr,headers:Mr},type:_c}]}]};Dm.ruleSet=DK});var VR=d(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.defaultEndpointResolver=void 0;var FK=Qa(),LK=jR(),zK=(e,t={})=>(0,FK.resolveEndpoint)(LK.ruleSet,{endpointParams:e,logger:t.logger});Fm.defaultEndpointResolver=zK});var HR=d(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.getRuntimeConfig=void 0;var UK=R(),WK=_i(),BR=Fa(),$R=Yr(),jK=VR(),VK=e=>({apiVersion:"2018-08-01",base64Decoder:e?.base64Decoder??BR.fromBase64,base64Encoder:e?.base64Encoder??BR.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??jK.defaultEndpointResolver,logger:e?.logger??new UK.NoOpLogger,serviceId:e?.serviceId??"RDS Data",urlParser:e?.urlParser??WK.parseUrl,utf8Decoder:e?.utf8Decoder??$R.fromUtf8,utf8Encoder:e?.utf8Encoder??$R.toUtf8});Lm.getRuntimeConfig=VK});var QR=d(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.getRuntimeConfig=void 0;var BK=(b(),S(N)),$K=BK.__importDefault(Mx()),HK=PR(),zm=cr(),GK=tv(),JK=Na(),GR=Kr(),yc=jn(),JR=xa(),QK=Aa(),KK=Mt(),YK=Da(),XK=HR(),ZK=R(),e8=Xa(),t8=R(),r8=e=>{(0,t8.emitWarningIfUnsupportedVersion)(process.version);let t=(0,e8.resolveDefaultsModeConfig)(e),r=()=>t().then(ZK.loadConfigsForDefaultMode),n=(0,XK.getRuntimeConfig)(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??QK.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??(0,HK.decorateDefaultCredentialProvider)(GK.defaultProvider),defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,YK.defaultUserAgent)({serviceId:n.serviceId,clientVersion:$K.default.version}),maxAttempts:e?.maxAttempts??(0,yc.loadConfig)(GR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,yc.loadConfig)(zm.NODE_REGION_CONFIG_OPTIONS,zm.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:e?.requestHandler??new JR.NodeHttpHandler(r),retryMode:e?.retryMode??(0,yc.loadConfig)({...GR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||KK.DEFAULT_RETRY_MODE}),sha256:e?.sha256??JK.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??JR.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,yc.loadConfig)(zm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:e?.useFipsEndpoint??(0,yc.loadConfig)(zm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}};Um.getRuntimeConfig=r8});var uv=d(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.RDSDataClient=void 0;var n8=cr(),i8=ra(),s8=Z(),KR=na(),o8=ia(),a8=sa(),YR=Kr(),XR=Xr(),ZR=ma(),c8=R(),d8=qx(),u8=QR(),dv=class extends c8.Client{constructor(t){let r=(0,u8.getRuntimeConfig)(t),n=(0,d8.resolveClientEndpointParameters)(r),i=(0,n8.resolveRegionConfig)(n),s=(0,s8.resolveEndpointConfig)(i),o=(0,YR.resolveRetryConfig)(s),a=(0,KR.resolveHostHeaderConfig)(o),u=(0,XR.resolveAwsAuthConfig)(a),l=(0,ZR.resolveUserAgentConfig)(u);super(l),this.config=l,this.middlewareStack.use((0,YR.getRetryPlugin)(this.config)),this.middlewareStack.use((0,i8.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,KR.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,o8.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,a8.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,XR.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,ZR.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};Wm.RDSDataClient=dv});var eq=d(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.RDSData=void 0;var l8=m_(),p8=__(),f8=g_(),m8=E_(),h8=S_(),_8=b_(),y8=uv(),lv=class extends y8.RDSDataClient{batchExecuteStatement(t,r,n){let i=new l8.BatchExecuteStatementCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}beginTransaction(t,r,n){let i=new p8.BeginTransactionCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}commitTransaction(t,r,n){let i=new f8.CommitTransactionCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}executeSql(t,r,n){let i=new m8.ExecuteSqlCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}executeStatement(t,r,n){let i=new h8.ExecuteStatementCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}rollbackTransaction(t,r,n){let i=new _8.RollbackTransactionCommand(t);if(typeof r=="function")this.send(i,r);else if(typeof n=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(i,r||{},n)}else return this.send(i,r)}};jm.RDSData=lv});var tq=d(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var po=(b(),S(N));po.__exportStar(m_(),ni);po.__exportStar(__(),ni);po.__exportStar(g_(),ni);po.__exportStar(E_(),ni);po.__exportStar(S_(),ni);po.__exportStar(b_(),ni)});var rq=d(pv=>{"use strict";Object.defineProperty(pv,"__esModule",{value:!0});var g8=(b(),S(N));g8.__exportStar(Br(),pv)});var nq=d(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.RDSDataServiceException=void 0;var Vm=(b(),S(N));Vm.__exportStar(eq(),ii);Vm.__exportStar(uv(),ii);Vm.__exportStar(tq(),ii);Vm.__exportStar(rq(),ii);var w8=Fd();Object.defineProperty(ii,"RDSDataServiceException",{enumerable:!0,get:function(){return w8.RDSDataServiceException}})});import E8 from"path";function hn(e){return typeof e>"u"||e===void 0}function Ae(e){return typeof e=="string"}function gv(e){return typeof e=="number"}function Ec(e){return typeof e=="boolean"}function vc(e){return e===null}function wv(e){return e instanceof Date}function Ev(e){return typeof e=="bigint"}function ue(e){return typeof e=="function"}function je(e){return typeof e=="object"&&e!==null}function vv(e){return e[e.length-1]}function c(e){return Object.freeze(e)}function Zt(e){return Array.isArray(e)}function _n(e){return e}var ie=c({is(e){return e.kind==="AlterTableNode"},create(e){return c({kind:"AlterTableNode",table:e})},cloneWithTableProps(e,t){return c({...e,...t})},cloneWithColumnAlteration(e,t){return c({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})}});var q=c({is(e){return e.kind==="IdentifierNode"},create(e){return c({kind:"IdentifierNode",name:e})}});var er=c({is(e){return e.kind==="CreateIndexNode"},create(e){return c({kind:"CreateIndexNode",name:q.create(e)})},cloneWith(e,t){return c({...e,...t})},cloneWithColumns(e,t){return c({...e,columns:[...e.columns||[],...t]})}});var Sc=c({is(e){return e.kind==="CreateSchemaNode"},create(e,t){return c({kind:"CreateSchemaNode",schema:q.create(e),...t})},cloneWith(e,t){return c({...e,...t})}});var Sv=["preserve rows","delete rows","drop"],mt=c({is(e){return e.kind==="CreateTableNode"},create(e){return c({kind:"CreateTableNode",table:e,columns:c([])})},cloneWithColumn(e,t){return c({...e,columns:c([...e.columns,t])})},cloneWithConstraint(e,t){return c({...e,constraints:e.constraints?c([...e.constraints,t]):c([t])})},cloneWithFrontModifier(e,t){return c({...e,frontModifiers:e.frontModifiers?c([...e.frontModifiers,t]):c([t])})},cloneWithEndModifier(e,t){return c({...e,endModifiers:e.endModifiers?c([...e.endModifiers,t]):c([t])})},cloneWith(e,t){return c({...e,...t})}});var nt=c({is(e){return e.kind==="SchemableIdentifierNode"},create(e){return c({kind:"SchemableIdentifierNode",identifier:q.create(e)})},createWithSchema(e,t){return c({kind:"SchemableIdentifierNode",schema:q.create(e),identifier:q.create(t)})}});var Vi=c({is(e){return e.kind==="DropIndexNode"},create(e,t){return c({kind:"DropIndexNode",name:nt.create(e),...t})},cloneWith(e,t){return c({...e,...t})}});var fo=c({is(e){return e.kind==="DropSchemaNode"},create(e,t){return c({kind:"DropSchemaNode",schema:q.create(e),...t})},cloneWith(e,t){return c({...e,...t})}});var mo=c({is(e){return e.kind==="DropTableNode"},create(e,t){return c({kind:"DropTableNode",table:e,...t})},cloneWith(e,t){return c({...e,...t})}});var it=c({is(e){return e.kind==="AliasNode"},create(e,t){return c({kind:"AliasNode",node:e,alias:t})}});var At=c({is(e){return e.kind==="TableNode"},create(e){return c({kind:"TableNode",table:nt.create(e)})},createWithSchema(e,t){return c({kind:"TableNode",table:nt.createWithSchema(e,t)})}});function le(e){return je(e)&&ue(e.toOperationNode)}function Nv(e){return je(e)&&"expressionType"in e&&le(e)}function bv(e){return je(e)&&"expression"in e&&Ae(e.alias)&&le(e)}var tr=c({is(e){return e.kind==="SelectModifierNode"},create(e){return c({kind:"SelectModifierNode",modifier:e})},createWithExpression(e){return c({kind:"SelectModifierNode",rawModifier:e})}});var kr=c({is(e){return e.kind==="AndNode"},create(e,t){return c({kind:"AndNode",left:e,right:t})}});var Dr=c({is(e){return e.kind==="OrNode"},create(e,t){return c({kind:"OrNode",left:e,right:t})}});var Bi=c({is(e){return e.kind==="OnNode"},create(e){return c({kind:"OnNode",on:e})},cloneWithOperation(e,t,r){return c({...e,on:t==="And"?kr.create(e.on,r):Dr.create(e.on,r)})}});var Ve=c({is(e){return e.kind==="JoinNode"},create(e,t){return c({kind:"JoinNode",joinType:e,table:t,on:void 0})},createWithOn(e,t,r){return c({kind:"JoinNode",joinType:e,table:t,on:Bi.create(r)})},cloneWithOn(e,t){return c({...e,on:e.on?Bi.cloneWithOperation(e.on,"And",t):Bi.create(t)})},cloneWithOrOn(e,t){return c({...e,on:e.on?Bi.cloneWithOperation(e.on,"Or",t):Bi.create(t)})}});var ho=c({is(e){return e.kind==="BinaryOperationNode"},create(e,t,r){return c({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:r})}});var ve=c({is(e){return e.kind==="RawNode"},create(e,t){return c({kind:"RawNode",sqlFragments:c(e),parameters:c(t)})},createWithSql(e){return ve.create([e],[])},createWithChild(e){return ve.create(["",""],[e])},createWithChildren(e){return ve.create(new Array(e.length+1).fill(""),e)}});var xv=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->"],fq=["+","-","*","/","%","^","&","|","#","<<",">>"],Av=[...xv,...fq,"&&","||"],mq=["exists","not exists"],hq=["not","-",...mq],Tv=[...Av,...hq],$i=c({is(e){return e.kind==="OperatorNode"},create(e){return c({kind:"OperatorNode",operator:e})}});function Hm(e){return Ae(e)&&Av.includes(e)}function Gm(e){return Ae(e)&&xv.includes(e)}var yn=c({is(e){return e.kind==="ParensNode"},create(e){return c({kind:"ParensNode",node:e})}});var U=c({is(e){return e.kind==="ColumnNode"},create(e){return c({kind:"ColumnNode",column:q.create(e)})}});var Hi=c({is(e){return e.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}});var si=c({is(e){return e.kind==="ReferenceNode"},create(e,t){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(e){return c({kind:"ReferenceNode",table:e,column:Hi.create()})}});var Cv=c({is(e){return e.kind==="OrderByItemNode"},create(e,t){return c({kind:"OrderByItemNode",orderBy:e,direction:t})}});function Ov(e){return e==="asc"||e==="desc"}function gn(e,t){return Cv.create(_q(e),yq(t))}function _q(e){return ht(e)}function yq(e){if(e)return e==="asc"||e==="desc"?ve.createWithSql(e):e.toOperationNode()}function Jm(e){return Ae(e)?Fr(e):e.toOperationNode()}function Lr(e){return Zt(e)?e.map(t=>ht(t)):[ht(e)]}function ht(e){return oi(e)?wn(e):Jm(e)}function Fr(e){let t=".";if(e.includes(t)){let r=e.split(t).map(Ym);if(r.length===3)return gq(r);if(r.length===2)return wq(r);throw new Error(`invalid column reference ${e}`)}else return U.create(e)}function Pv(e){let t=" as ";if(e.includes(t)){let[r,n]=e.split(t).map(Ym);return it.create(Fr(r),q.create(n))}else return Fr(e)}function Qm(e){return U.create(e)}function Km(e){let t=" ";if(e.includes(t)){let[r,n]=e.split(t).map(Ym);if(!Ov(n))throw new Error(`invalid order direction "${n}" next to "${r}"`);return gn(r,n)}else return Qm(e)}function gq(e){let[t,r,n]=e;return si.create(At.createWithSchema(t,r),U.create(n))}function wq(e){let[t,r]=e;return si.create(At.create(t),U.create(r))}function Ym(e){return e.trim()}var Nc=c({is(e){return e.kind==="PrimitiveValueListNode"},create(e){return c({kind:"PrimitiveValueListNode",values:c([...e])})}});var Gi=c({is(e){return e.kind==="ValueListNode"},create(e){return c({kind:"ValueListNode",values:c(e)})}});var Pe=c({is(e){return e.kind==="ValueNode"},create(e){return c({kind:"ValueNode",value:e})},createImmediate(e){return c({kind:"ValueNode",value:e,immediate:!0})}});function bc(e){return Zt(e)?Eq(e):_t(e)}function _t(e){return oi(e)?wn(e):Pe.create(e)}function Eq(e){return e.some(oi)?Gi.create(e.map(t=>_t(t))):Nc.create(e)}var zr=c({is(e){return e.kind==="OrderByNode"},create(e){return c({kind:"OrderByNode",items:c([e])})},cloneWithItem(e,t){return c({...e,items:c([...e.items,t])})}});var Xm=c({is(e){return e.kind==="PartitionByNode"},create(e){return c({kind:"PartitionByNode",items:c(e)})},cloneWithItems(e,t){return c({...e,items:c([...e.items,...t])})}});var _o=c({is(e){return e.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItem(e,t){return c({...e,orderBy:e.orderBy?zr.cloneWithItem(e.orderBy,t):zr.create(t)})},cloneWithPartitionByItems(e,t){return c({...e,partitionBy:e.partitionBy?Xm.cloneWithItems(e.partitionBy,t):Xm.create(t)})}});var ai=c({is(e){return e.kind==="FromNode"},create(e){return c({kind:"FromNode",froms:c(e)})},cloneWithFroms(e,t){return c({...e,froms:c([...e.froms,...t])})}});var Zm=c({is(e){return e.kind==="GroupByNode"},create(e){return c({kind:"GroupByNode",items:c(e)})},cloneWithItems(e,t){return c({...e,items:c([...e.items,...t])})}});var yo=c({is(e){return e.kind==="HavingNode"},create(e){return c({kind:"HavingNode",having:e})},cloneWithOperation(e,t,r){return c({...e,having:t==="And"?kr.create(e.having,r):Dr.create(e.having,r)})}});var I=c({is(e){return e.kind==="SelectQueryNode"},create(e,t){return c({kind:"SelectQueryNode",from:ai.create(e),...t&&{with:t}})},cloneWithSelections(e,t){return c({...e,selections:e.selections?c([...e.selections,...t]):c(t)})},cloneWithDistinctOn(e,t){return c({...e,distinctOn:e.distinctOn?c([...e.distinctOn,...t]):c(t)})},cloneWithFrontModifier(e,t){return c({...e,frontModifiers:e.frontModifiers?c([...e.frontModifiers,t]):c([t])})},cloneWithEndModifier(e,t){return c({...e,endModifiers:e.endModifiers?c([...e.endModifiers,t]):c([t])})},cloneWithOrderByItem(e,t){return c({...e,orderBy:e.orderBy?zr.cloneWithItem(e.orderBy,t):zr.create(t)})},cloneWithGroupByItems(e,t){return c({...e,groupBy:e.groupBy?Zm.cloneWithItems(e.groupBy,t):Zm.create(t)})},cloneWithLimit(e,t){return c({...e,limit:t})},cloneWithOffset(e,t){return c({...e,offset:t})},cloneWithHaving(e,t){return c({...e,having:e.having?yo.cloneWithOperation(e.having,"And",t):yo.create(t)})},cloneWithOrHaving(e,t){return c({...e,having:e.having?yo.cloneWithOperation(e.having,"Or",t):yo.create(t)})},cloneWithSetOperation(e,t){return c({...e,setOperations:e.setOperations?c([...e.setOperations,t]):c([t])})},cloneWithoutSelections(e){return c({...e,selections:[]})},cloneWithoutLimit(e){return c({...e,limit:void 0})},cloneWithoutOffset(e){return c({...e,offset:void 0})},cloneWithoutOrderBy(e){return c({...e,orderBy:void 0})}});var xc=c({is(e){return e.kind==="UnaryOperationNode"},create(e,t){return c({kind:"UnaryOperationNode",operator:e,operand:t})}});function he(e){return Ac("exists",e)}function pe(e){return Ac("not exists",e)}function Ac(e,t){return xc.create($i.create(e),ht(t))}function O(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw new Error(t)}}})}var go=class e{#e;constructor(t){this.#e=c(t)}on(...t){return new e({...this.#e,joinNode:Ve.cloneWithOn(this.#e.joinNode,eh(t))})}orOn(...t){return new e({...this.#e,joinNode:Ve.cloneWithOrOn(this.#e.joinNode,eh(t))})}onRef(t,r,n){return new e({...this.#e,joinNode:Ve.cloneWithOn(this.#e.joinNode,se(t,r,n))})}orOnRef(t,r,n){return new e({...this.#e,joinNode:Ve.cloneWithOrOn(this.#e.joinNode,se(t,r,n))})}onExists(t){return new e({...this.#e,joinNode:Ve.cloneWithOn(this.#e.joinNode,he(t))})}onNotExists(t){return new e({...this.#e,joinNode:Ve.cloneWithOn(this.#e.joinNode,pe(t))})}orOnExists(t){return new e({...this.#e,joinNode:Ve.cloneWithOrOn(this.#e.joinNode,he(t))})}orOnNotExists(t){return new e({...this.#e,joinNode:Ve.cloneWithOrOn(this.#e.joinNode,pe(t))})}onTrue(){return new e({...this.#e,joinNode:Ve.cloneWithOn(this.#e.joinNode,ve.createWithSql("true"))})}$call(t){return t(this)}toOperationNode(){return this.#e.joinNode}};O(go,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var Iv=c({is(e){return e.kind==="PartitionByItemNode"},create(e){return c({kind:"PartitionByItemNode",partitionBy:e})}});function Rv(e){return Lr(e).map(Iv.create)}var wo=class e{#e;constructor(t){this.#e=c(t)}orderBy(t,r){return new e({overNode:_o.cloneWithOrderByItem(this.#e.overNode,gn(t,r))})}partitionBy(t){return new e({overNode:_o.cloneWithPartitionByItems(this.#e.overNode,Rv(t))})}$call(t){return t(this)}toOperationNode(){return this.#e.overNode}};O(wo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var Ji=c({is(e){return e.kind==="SelectionNode"},create(e){return c({kind:"SelectionNode",selection:e})},createSelectAll(){return c({kind:"SelectionNode",selection:Hi.create()})},createSelectAllFromTable(e){return c({kind:"SelectionNode",selection:si.createSelectAll(e)})}});var Tc=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(t){this.#e=t}toOperationNode(){return Jm(this.#e)}};function qv(e){return je(e)&&le(e)&&Ae(e.dynamicReference)}function Ur(e){return ue(e)?Ur(e(Ge())):Zt(e)?e.map(t=>Mv(t)):[Mv(e)]}function Mv(e){return Ae(e)?Ji.create(Pv(e)):qv(e)?Ji.create(e.toOperationNode()):Ji.create(Cc(e))}function rr(e){return e?Array.isArray(e)?e.map(kv):[kv(e)]:[Ji.createSelectAll()]}function kv(e){if(Ae(e))return Ji.createSelectAllFromTable(_e(e));throw new Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}var Dv=c({is(e){return e.kind==="ValuesNode"},create(e){return c({kind:"ValuesNode",values:c(e)})}});var Fv=c({is(e){return e.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function Lv(e){let t=ue(e)?e(Ge()):e,r=Zt(t)?t:c([t]);return vq(r)}function vq(e){let t=Sq(e);return[c([...t.keys()].map(U.create)),Dv.create(e.map(r=>Nq(r,t)))]}function Sq(e){let t=new Map;for(let r of e){let n=Object.keys(r);for(let i of n)!t.has(i)&&r[i]!==void 0&&t.set(i,t.size)}return t}function Nq(e,t){let r=Object.keys(e),n=Array.from({length:t.size}),i=!1;for(let o of r){let a=t.get(o);if(hn(a))continue;let u=e[o];(hn(u)||oi(u))&&(i=!0),n[a]=u}if(r.length<t.size||i){let o=Fv.create();return Gi.create(n.map(a=>hn(a)?o:_t(a)))}return Nc.create(n)}var st=c({is(e){return e.kind==="InsertQueryNode"},create(e,t,r){return c({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:r})},cloneWith(e,t){return c({...e,...t})}});var ci=c({is(e){return e.kind==="UpdateQueryNode"},create(e,t){return c({kind:"UpdateQueryNode",table:e,...t&&{with:t}})},cloneWithFromItems(e,t){return c({...e,from:e.from?ai.cloneWithFroms(e.from,t):ai.create(t)})},cloneWithUpdates(e,t){return c({...e,updates:e.updates?c([...e.updates,...t]):t})}});var th=c({is(e){return e.kind==="UsingNode"},create(e){return c({kind:"UsingNode",tables:c(e)})},cloneWithTables(e,t){return c({...e,tables:c([...e.tables,...t])})}});var En=c({is(e){return e.kind==="DeleteQueryNode"},create(e,t){return c({kind:"DeleteQueryNode",from:ai.create(e),...t&&{with:t}})},cloneWithOrderByItem(e,t){return c({...e,orderBy:e.orderBy?zr.cloneWithItem(e.orderBy,t):zr.create(t)})},cloneWithLimit(e,t){return c({...e,limit:t})},cloneWithUsing(e,t){return c({...e,using:e.using!==void 0?th.cloneWithTables(e.using,t):th.create(t)})}});var Te=c({is(e){return e.kind==="WhereNode"},create(e){return c({kind:"WhereNode",where:e})},cloneWithOperation(e,t,r){return c({...e,where:t==="And"?kr.create(e.where,r):Dr.create(e.where,r)})}});var rh=c({is(e){return e.kind==="ReturningNode"},create(e){return c({kind:"ReturningNode",selections:c(e)})},cloneWithSelections(e,t){return c({...e,selections:e.selections?c([...e.selections,...t]):c(t)})}});var zv=c({is(e){return e.kind==="ExplainNode"},create(e,t){return c({kind:"ExplainNode",format:e,options:t})}});var T=c({is(e){return I.is(e)||st.is(e)||ci.is(e)||En.is(e)},cloneWithWhere(e,t){return c({...e,where:e.where?Te.cloneWithOperation(e.where,"And",t):Te.create(t)})},cloneWithOrWhere(e,t){return c({...e,where:e.where?Te.cloneWithOperation(e.where,"Or",t):Te.create(t)})},cloneWithJoin(e,t){return c({...e,joins:e.joins?c([...e.joins,t]):c([t])})},cloneWithReturning(e,t){return c({...e,returning:e.returning?rh.cloneWithSelections(e.returning,t):rh.create(t)})},cloneWithoutWhere(e){return c({...e,where:void 0})},cloneWithExplain(e,t,r){return c({...e,explain:zv.create(t,r?.toOperationNode())})}});var Uv=c({is(e){return e.kind==="ColumnUpdateNode"},create(e,t){return c({kind:"ColumnUpdateNode",column:e,value:t})}});function Qi(e){let t=ue(e)?e(Ge()):e;return Object.entries(t).filter(([r,n])=>n!==void 0).map(([r,n])=>Uv.create(U.create(r),_t(n)))}var Wv=c({is(e){return e.kind==="OnDuplicateKeyNode"},create(e){return c({kind:"OnDuplicateKeyNode",updates:e})}});var Eo=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};for(let e of["insertId","numInsertedOrUpdatedRows"])Object.defineProperty(Eo.prototype,e,{enumerable:!0});var nr=class extends Error{node;constructor(t){super("no result"),this.node=t}};function vn(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}var J=c({is(e){return e.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(e,t){return c({...e,...t})},cloneWithIndexWhere(e,t){return c({...e,indexWhere:e.indexWhere?Te.cloneWithOperation(e.indexWhere,"And",t):Te.create(t)})},cloneWithIndexOrWhere(e,t){return c({...e,indexWhere:e.indexWhere?Te.cloneWithOperation(e.indexWhere,"Or",t):Te.create(t)})},cloneWithUpdateWhere(e,t){return c({...e,updateWhere:e.updateWhere?Te.cloneWithOperation(e.updateWhere,"And",t):Te.create(t)})},cloneWithUpdateOrWhere(e,t){return c({...e,updateWhere:e.updateWhere?Te.cloneWithOperation(e.updateWhere,"Or",t):Te.create(t)})},cloneWithoutIndexWhere(e){return c({...e,indexWhere:void 0})},cloneWithoutUpdateWhere(e){return c({...e,updateWhere:void 0})}});var vo=class e{#e;constructor(t){this.#e=c(t)}column(t){let r=U.create(t);return new e({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,r]):c([r])})})}columns(t){let r=t.map(U.create);return new e({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,...r]):c(r)})})}constraint(t){return new e({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{constraint:q.create(t)})})}expression(t){return new e({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{indexExpression:t.toOperationNode()})})}where(...t){return new e({...this.#e,onConflictNode:J.cloneWithIndexWhere(this.#e.onConflictNode,Ce(t))})}whereRef(t,r,n){return new e({...this.#e,onConflictNode:J.cloneWithIndexWhere(this.#e.onConflictNode,se(t,r,n))})}orWhere(...t){return new e({...this.#e,onConflictNode:J.cloneWithIndexOrWhere(this.#e.onConflictNode,Ce(t))})}orWhereRef(t,r,n){return new e({...this.#e,onConflictNode:J.cloneWithIndexOrWhere(this.#e.onConflictNode,se(t,r,n))})}whereExists(t){return new e({...this.#e,onConflictNode:J.cloneWithIndexWhere(this.#e.onConflictNode,he(t))})}whereNotExists(t){return new e({...this.#e,onConflictNode:J.cloneWithIndexWhere(this.#e.onConflictNode,pe(t))})}orWhereExists(t){return new e({...this.#e,onConflictNode:J.cloneWithIndexOrWhere(this.#e.onConflictNode,he(t))})}orWhereNotExists(t){return new e({...this.#e,onConflictNode:J.cloneWithIndexOrWhere(this.#e.onConflictNode,pe(t))})}clearWhere(){return new e({...this.#e,onConflictNode:J.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Oc({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(t){return new Pc({...this.#e,onConflictNode:J.cloneWith(this.#e.onConflictNode,{updates:Qi(t)})})}$call(t){return t(this)}};O(vo,"don't await OnConflictBuilder instances.");var Oc=class{#e;constructor(t){this.#e=c(t)}toOperationNode(){return this.#e.onConflictNode}};O(Oc,"don't await OnConflictDoNothingBuilder instances.");var Pc=class e{#e;constructor(t){this.#e=c(t)}where(...t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateWhere(this.#e.onConflictNode,Ce(t))})}whereRef(t,r,n){return new e({...this.#e,onConflictNode:J.cloneWithUpdateWhere(this.#e.onConflictNode,se(t,r,n))})}orWhere(...t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateOrWhere(this.#e.onConflictNode,Ce(t))})}orWhereRef(t,r,n){return new e({...this.#e,onConflictNode:J.cloneWithUpdateOrWhere(this.#e.onConflictNode,se(t,r,n))})}whereExists(t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateWhere(this.#e.onConflictNode,he(t))})}whereNotExists(t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateWhere(this.#e.onConflictNode,pe(t))})}orWhereExists(t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateOrWhere(this.#e.onConflictNode,he(t))})}orWhereNotExists(t){return new e({...this.#e,onConflictNode:J.cloneWithUpdateOrWhere(this.#e.onConflictNode,pe(t))})}clearWhere(){return new e({...this.#e,onConflictNode:J.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(t){return t(this)}toOperationNode(){return this.#e.onConflictNode}};O(Pc,"don't await OnConflictUpdateBuilder instances.");var Ki=class e{#e;constructor(t){this.#e=c(t)}values(t){let[r,n]=Lv(t);return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{columns:r,values:n})})}columns(t){return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{columns:c(t.map(U.create))})})}expression(t){return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{values:wn(t)})})}ignore(){return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(t){return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{onConflict:t(new vo({onConflictNode:J.create()})).toOperationNode()})})}onDuplicateKeyUpdate(t){return new e({...this.#e,queryNode:st.cloneWith(this.#e.queryNode,{onDuplicateKey:Wv.create(Qi(t))})})}returning(t){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,Ur(t))})}returningAll(){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,rr())})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return t?r(this):new e({...this.#e})}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new Eo(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw vn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:T.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(Ki,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var So=class{#e;constructor(t){this.#e=t}get numDeletedRows(){return this.#e}};Object.defineProperty(So.prototype,"numDeletedRows",{enumerable:!0});var Ic=c({is(e){return e.kind==="LimitNode"},create(e){return c({kind:"LimitNode",limit:Pe.create(e)})}});var No=class e{#e;constructor(t){this.#e=c(t)}where(...t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,Ce(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,se(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,Ce(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,se(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,he(t))})}whereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,pe(t))})}orWhereExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,he(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,pe(t))})}clearWhere(){return new e({...this.#e,queryNode:T.cloneWithoutWhere(this.#e.queryNode)})}using(t){return new e({...this.#e,queryNode:En.cloneWithUsing(this.#e.queryNode,$t(t))})}innerJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("FullJoin",t))})}returning(t){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,Ur(t))})}returningAll(t){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,rr(t))})}orderBy(t,r){return new e({...this.#e,queryNode:En.cloneWithOrderByItem(this.#e.queryNode,gn(t,r))})}limit(t){return new e({...this.#e,queryNode:En.cloneWithLimit(this.#e.queryNode,Ic.create(t))})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new So(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw vn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:T.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(No,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var bo=class{#e;constructor(t){this.#e=t}get numUpdatedRows(){return this.#e}};Object.defineProperty(bo.prototype,"numUpdatedRows",{enumerable:!0});var xo=class e{#e;constructor(t){this.#e=c(t)}where(...t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,Ce(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,se(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,Ce(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,se(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,he(t))})}whereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,pe(t))})}orWhereExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,he(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,pe(t))})}clearWhere(){return new e({...this.#e,queryNode:T.cloneWithoutWhere(this.#e.queryNode)})}from(t){return new e({...this.#e,queryNode:ci.cloneWithFromItems(this.#e.queryNode,$t(t))})}innerJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("FullJoin",t))})}set(t){return new e({...this.#e,queryNode:ci.cloneWithUpdates(this.#e.queryNode,Qi(t))})}returning(t){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,Ur(t))})}returningAll(){return new e({...this.#e,queryNode:T.cloneWithReturning(this.#e.queryNode,rr())})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile(),r=t.query,n=await this.#e.executor.executeQuery(t,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new bo(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw vn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:T.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(xo,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var jv=c({is(e){return e.kind==="CommonTableExpressionNode"},create(e,t){return c({kind:"CommonTableExpressionNode",name:e,expression:t})}});var nh=c({is(e){return e.kind==="CommonTableExpressionNameNode"},create(e,t){return c({kind:"CommonTableExpressionNameNode",table:At.create(e),columns:t?c(t.map(U.create)):void 0})}});function ih(e,t){let r=t(Vv());return jv.create(bq(e),r.toOperationNode())}function bq(e){if(e.includes("(")){let t=e.split(/[\(\)]/),r=t[0],n=t[1].split(",").map(i=>i.trim());return nh.create(r,n)}else return nh.create(e)}var Ao=c({is(e){return e.kind==="WithNode"},create(e,t){return c({kind:"WithNode",expressions:c([e]),...t})},cloneWithExpression(e,t){return c({...e,expressions:c([...e.expressions,t])})}});var Bv=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function $v(e){let t="";for(let r=0;r<e;++r)t+=xq();return t}function xq(){return Bv[~~(Math.random()*Bv.length)]}function j(){return new sh}var sh=class{#e;get queryId(){return this.#e===void 0&&(this.#e=$v(8)),this.#e}};var Yi=class{nodeStack=[];#e=c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this)});transformNode(t){if(!t)return t;this.nodeStack.push(t);let r=this.transformNodeImpl(t);return this.nodeStack.pop(),c(r)}transformNodeImpl(t){return this.#e[t.kind](t)}transformNodeList(t){return t&&c(t.map(r=>this.transformNode(r)))}transformSelectQuery(t){return{kind:"SelectQueryNode",from:this.transformNode(t.from),selections:this.transformNodeList(t.selections),distinctOn:this.transformNodeList(t.distinctOn),joins:this.transformNodeList(t.joins),groupBy:this.transformNode(t.groupBy),orderBy:this.transformNode(t.orderBy),where:this.transformNode(t.where),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),limit:this.transformNode(t.limit),offset:this.transformNode(t.offset),with:this.transformNode(t.with),having:this.transformNode(t.having),explain:this.transformNode(t.explain),setOperations:this.transformNodeList(t.setOperations)}}transformSelection(t){return{kind:"SelectionNode",selection:this.transformNode(t.selection)}}transformColumn(t){return{kind:"ColumnNode",column:this.transformNode(t.column)}}transformAlias(t){return{kind:"AliasNode",node:this.transformNode(t.node),alias:this.transformNode(t.alias)}}transformTable(t){return{kind:"TableNode",table:this.transformNode(t.table)}}transformFrom(t){return{kind:"FromNode",froms:this.transformNodeList(t.froms)}}transformReference(t){return{kind:"ReferenceNode",table:this.transformNode(t.table),column:this.transformNode(t.column)}}transformAnd(t){return{kind:"AndNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformOr(t){return{kind:"OrNode",left:this.transformNode(t.left),right:this.transformNode(t.right)}}transformValueList(t){return{kind:"ValueListNode",values:this.transformNodeList(t.values)}}transformParens(t){return{kind:"ParensNode",node:this.transformNode(t.node)}}transformJoin(t){return{kind:"JoinNode",joinType:t.joinType,table:this.transformNode(t.table),on:this.transformNode(t.on)}}transformRaw(t){return{kind:"RawNode",sqlFragments:c([...t.sqlFragments]),parameters:this.transformNodeList(t.parameters)}}transformWhere(t){return{kind:"WhereNode",where:this.transformNode(t.where)}}transformInsertQuery(t){return{kind:"InsertQueryNode",into:this.transformNode(t.into),columns:this.transformNodeList(t.columns),values:this.transformNode(t.values),returning:this.transformNode(t.returning),onConflict:this.transformNode(t.onConflict),onDuplicateKey:this.transformNode(t.onDuplicateKey),with:this.transformNode(t.with),ignore:t.ignore,replace:t.replace,explain:this.transformNode(t.explain)}}transformValues(t){return{kind:"ValuesNode",values:this.transformNodeList(t.values)}}transformDeleteQuery(t){return{kind:"DeleteQueryNode",from:this.transformNode(t.from),using:this.transformNode(t.using),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),returning:this.transformNode(t.returning),with:this.transformNode(t.with),orderBy:this.transformNode(t.orderBy),limit:this.transformNode(t.limit),explain:this.transformNode(t.explain)}}transformReturning(t){return{kind:"ReturningNode",selections:this.transformNodeList(t.selections)}}transformCreateTable(t){return{kind:"CreateTableNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),constraints:this.transformNodeList(t.constraints),temporary:t.temporary,ifNotExists:t.ifNotExists,onCommit:t.onCommit,frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers)}}transformColumnDefinition(t){return{kind:"ColumnDefinitionNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),references:this.transformNode(t.references),primaryKey:t.primaryKey,autoIncrement:t.autoIncrement,unique:t.unique,notNull:t.notNull,unsigned:t.unsigned,defaultTo:this.transformNode(t.defaultTo),check:this.transformNode(t.check),generated:this.transformNode(t.generated),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers)}}transformAddColumn(t){return{kind:"AddColumnNode",column:this.transformNode(t.column)}}transformDropTable(t){return{kind:"DropTableNode",table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformOrderBy(t){return{kind:"OrderByNode",items:this.transformNodeList(t.items)}}transformOrderByItem(t){return{kind:"OrderByItemNode",orderBy:this.transformNode(t.orderBy),direction:this.transformNode(t.direction)}}transformGroupBy(t){return{kind:"GroupByNode",items:this.transformNodeList(t.items)}}transformGroupByItem(t){return{kind:"GroupByItemNode",groupBy:this.transformNode(t.groupBy)}}transformUpdateQuery(t){return{kind:"UpdateQueryNode",table:this.transformNode(t.table),from:this.transformNode(t.from),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),updates:this.transformNodeList(t.updates),returning:this.transformNode(t.returning),with:this.transformNode(t.with),explain:this.transformNode(t.explain)}}transformColumnUpdate(t){return{kind:"ColumnUpdateNode",column:this.transformNode(t.column),value:this.transformNode(t.value)}}transformLimit(t){return{kind:"LimitNode",limit:this.transformNode(t.limit)}}transformOffset(t){return{kind:"OffsetNode",offset:this.transformNode(t.offset)}}transformOnConflict(t){return{kind:"OnConflictNode",columns:this.transformNodeList(t.columns),constraint:this.transformNode(t.constraint),indexExpression:this.transformNode(t.indexExpression),indexWhere:this.transformNode(t.indexWhere),updates:this.transformNodeList(t.updates),updateWhere:this.transformNode(t.updateWhere),doNothing:t.doNothing}}transformOnDuplicateKey(t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(t.updates)}}transformCreateIndex(t){return{kind:"CreateIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists,where:this.transformNode(t.where)}}transformList(t){return{kind:"ListNode",items:this.transformNodeList(t.items)}}transformDropIndex(t){return{kind:"DropIndexNode",name:this.transformNode(t.name),table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade}}transformPrimaryKeyConstraint(t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformUniqueConstraint(t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)}}transformForeignKeyConstraint(t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(t.columns),references:this.transformNode(t.references),name:this.transformNode(t.name),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformSetOperation(t){return{kind:"SetOperationNode",operator:t.operator,expression:this.transformNode(t.expression),all:t.all}}transformReferences(t){return{kind:"ReferencesNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),onDelete:t.onDelete,onUpdate:t.onUpdate}}transformCheckConstraint(t){return{kind:"CheckConstraintNode",expression:this.transformNode(t.expression),name:this.transformNode(t.name)}}transformWith(t){return{kind:"WithNode",expressions:this.transformNodeList(t.expressions),recursive:t.recursive}}transformCommonTableExpression(t){return{kind:"CommonTableExpressionNode",name:this.transformNode(t.name),expression:this.transformNode(t.expression)}}transformCommonTableExpressionName(t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(t.table),columns:this.transformNodeList(t.columns)}}transformHaving(t){return{kind:"HavingNode",having:this.transformNode(t.having)}}transformCreateSchema(t){return{kind:"CreateSchemaNode",schema:this.transformNode(t.schema),ifNotExists:t.ifNotExists}}transformDropSchema(t){return{kind:"DropSchemaNode",schema:this.transformNode(t.schema),ifExists:t.ifExists,cascade:t.cascade}}transformAlterTable(t){return{kind:"AlterTableNode",table:this.transformNode(t.table),renameTo:this.transformNode(t.renameTo),setSchema:this.transformNode(t.setSchema),columnAlterations:this.transformNodeList(t.columnAlterations),addConstraint:this.transformNode(t.addConstraint),dropConstraint:this.transformNode(t.dropConstraint)}}transformDropColumn(t){return{kind:"DropColumnNode",column:this.transformNode(t.column)}}transformRenameColumn(t){return{kind:"RenameColumnNode",column:this.transformNode(t.column),renameTo:this.transformNode(t.renameTo)}}transformAlterColumn(t){return{kind:"AlterColumnNode",column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),dataTypeExpression:this.transformNode(t.dataTypeExpression),setDefault:this.transformNode(t.setDefault),dropDefault:t.dropDefault,setNotNull:t.setNotNull,dropNotNull:t.dropNotNull}}transformModifyColumn(t){return{kind:"ModifyColumnNode",column:this.transformNode(t.column)}}transformAddConstraint(t){return{kind:"AddConstraintNode",constraint:this.transformNode(t.constraint)}}transformDropConstraint(t){return{kind:"DropConstraintNode",constraintName:this.transformNode(t.constraintName),ifExists:t.ifExists,modifier:t.modifier}}transformCreateView(t){return{kind:"CreateViewNode",name:this.transformNode(t.name),temporary:t.temporary,orReplace:t.orReplace,ifNotExists:t.ifNotExists,materialized:t.materialized,columns:this.transformNodeList(t.columns),as:this.transformNode(t.as)}}transformDropView(t){return{kind:"DropViewNode",name:this.transformNode(t.name),ifExists:t.ifExists,materialized:t.materialized,cascade:t.cascade}}transformGenerated(t){return{kind:"GeneratedNode",byDefault:t.byDefault,always:t.always,identity:t.identity,stored:t.stored,expression:this.transformNode(t.expression)}}transformDefaultValue(t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(t.defaultValue)}}transformOn(t){return{kind:"OnNode",on:this.transformNode(t.on)}}transformSelectModifier(t){return{kind:"SelectModifierNode",modifier:t.modifier,rawModifier:this.transformNode(t.rawModifier)}}transformCreateType(t){return{kind:"CreateTypeNode",name:this.transformNode(t.name),enum:this.transformNode(t.enum)}}transformDropType(t){return{kind:"DropTypeNode",name:this.transformNode(t.name),ifExists:t.ifExists}}transformExplain(t){return{kind:"ExplainNode",format:t.format,options:this.transformNode(t.options)}}transformSchemableIdentifier(t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(t.schema),identifier:this.transformNode(t.identifier)}}transformAggregateFunction(t){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(t.aggregated),distinct:t.distinct,filter:this.transformNode(t.filter),func:t.func,over:this.transformNode(t.over)}}transformOver(t){return{kind:"OverNode",orderBy:this.transformNode(t.orderBy),partitionBy:this.transformNode(t.partitionBy)}}transformPartitionBy(t){return{kind:"PartitionByNode",items:this.transformNodeList(t.items)}}transformPartitionByItem(t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(t.partitionBy)}}transformBinaryOperation(t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(t.leftOperand),operator:this.transformNode(t.operator),rightOperand:this.transformNode(t.rightOperand)}}transformUnaryOperation(t){return{kind:"UnaryOperationNode",operator:this.transformNode(t.operator),operand:this.transformNode(t.operand)}}transformUsing(t){return{kind:"UsingNode",tables:this.transformNodeList(t.tables)}}transformFunction(t){return{kind:"FunctionNode",func:t.func,arguments:this.transformNodeList(t.arguments)}}transformCase(t){return{kind:"CaseNode",value:this.transformNode(t.value),when:this.transformNodeList(t.when),else:this.transformNode(t.else),isStatement:t.isStatement}}transformWhen(t){return{kind:"WhenNode",condition:this.transformNode(t.condition),result:this.transformNode(t.result)}}transformDataType(t){return t}transformSelectAll(t){return t}transformIdentifier(t){return t}transformValue(t){return t}transformPrimitiveValueList(t){return t}transformOperator(t){return t}transformDefaultInsertValue(t){return t}};var Aq=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Rc=class extends Yi{#e;#t=new Set;constructor(t){super(),this.#e=t}transformNodeImpl(t){if(!this.#r(t))return super.transformNodeImpl(t);let r=this.#n(t);for(let i of r)this.#t.add(i);let n=super.transformNodeImpl(t);for(let i of r)this.#t.delete(i);return n}transformSchemableIdentifier(t){let r=super.transformSchemableIdentifier(t);return r.schema||!this.#t.has(t.identifier.name)?r:{...r,schema:q.create(this.#e)}}transformReferences(t){let r=super.transformReferences(t);return r.table.table.schema?r:{...r,table:At.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(t){return t.kind in Aq}#n(t){let r=new Set;if("name"in t&&t.name&&nt.is(t.name)&&this.#s(t.name,r),"from"in t&&t.from)for(let n of t.from.froms)this.#i(n,r);if("into"in t&&t.into&&this.#i(t.into,r),"table"in t&&t.table&&this.#i(t.table,r),"joins"in t&&t.joins)for(let n of t.joins)this.#i(n.table,r);return"with"in t&&t.with&&this.#o(t.with,r),r}#i(t,r){let n=At.is(t)?t:it.is(t)&&At.is(t.node)?t.node:null;n&&this.#s(n.table,r)}#s(t,r){this.#t.has(t.identifier.name)||r.add(t.identifier.name)}#o(t,r){for(let n of t.expressions)r.delete(n.name.table.table.identifier.name)}};var yt=class{#e;constructor(t){this.#e=new Rc(t)}transformQuery(t){return this.#e.transformNode(t.node)}async transformResult(t){return t.result}};var Xi=class e{#e;constructor(t){this.#e=c(t)}selectFrom(t){return new Wr({queryId:j(),executor:this.#e.executor,queryNode:I.create($t(t),this.#e.withNode)})}insertInto(t){return new Ki({queryId:j(),executor:this.#e.executor,queryNode:st.create(_e(t),this.#e.withNode)})}replaceInto(t){return new Ki({queryId:j(),executor:this.#e.executor,queryNode:st.create(_e(t),this.#e.withNode,!0)})}deleteFrom(t){return new No({queryId:j(),executor:this.#e.executor,queryNode:En.create($t(t),this.#e.withNode)})}updateTable(t){return new xo({queryId:j(),executor:this.#e.executor,queryNode:ci.create(Sn(t),this.#e.withNode)})}with(t,r){let n=ih(t,r);return new e({...this.#e,withNode:this.#e.withNode?Ao.cloneWithExpression(this.#e.withNode,n):Ao.create(n)})}withRecursive(t,r){let n=ih(t,r);return new e({...this.#e,withNode:this.#e.withNode?Ao.cloneWithExpression(this.#e.withNode,n):Ao.create(n,{recursive:!0})})}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new yt(t))})}};var To=class{#e;#t;#r;constructor(){this.#e=new Promise((t,r)=>{this.#r=r,this.#t=t})}get promise(){return this.#e}resolve=t=>{this.#t&&this.#t(t)};reject=t=>{this.#r&&this.#r(t)}};var Hv=new Set;function Gv(e){Hv.has(e)||(Hv.add(e),console.log(e))}var Tq=c([]),Zi=class{#e;constructor(t=Tq){this.#e=t}get plugins(){return this.#e}transformQuery(t,r){for(let n of this.#e){let i=n.transformQuery({node:t,queryId:r});if(i.kind===t.kind)t=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${t.kind}`,`but it returned a ${i.kind}`].join(" "))}return t}async executeQuery(t,r){return await this.provideConnection(async n=>{let i=await n.executeQuery(t),s=await this.#t(i,r);return Cq(i,s),s})}async*stream(t,r,n){let i=new To,s=new To;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));let o=await i.promise;try{for await(let a of o.streamQuery(t,r))yield await this.#t(a,n)}finally{s.resolve()}}async#t(t,r){for(let n of this.#e)t=await n.transformResult({result:t,queryId:r});return t}};function Cq(e,t){let{numAffectedRows:r}=e;r===void 0&&e.numUpdatedOrDeletedRows===void 0||r!==void 0&&t.numAffectedRows!==void 0||Gv("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}var oh=class e extends Zi{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(t){return new e([...this.plugins,t])}withPlugins(t){return new e([...this.plugins,...t])}withPluginAtFront(t){return new e([t,...this.plugins])}withoutPlugins(){return new e([])}},di=new oh;function ah(){return new Wr({queryId:j(),executor:di,queryNode:I.create($t([]))})}function Vv(){return new Xi({executor:di})}function qc(e,t){return new go({joinNode:Ve.create(e,Sn(t))})}function Jv(){return new wo({overNode:_o.create()})}var Co=c({is(e){return e.kind==="WhenNode"},create(e){return c({kind:"WhenNode",condition:e})},cloneWithResult(e,t){return c({...e,result:t})}});var Je=c({is(e){return e.kind==="CaseNode"},create(e){return c({kind:"CaseNode",value:e})},cloneWithWhen(e,t){return c({...e,when:c(e.when?[...e.when,t]:[t])})},cloneWithThen(e,t){return c({...e,when:e.when?c([...e.when.slice(0,-1),Co.cloneWithResult(e.when[e.when.length-1],t)]):void 0})},cloneWith(e,t){return c({...e,...t})}});function Mc(e,t,r){if(!Hm(t)&&!le(t))throw new Error(`invalid binary operator ${JSON.stringify(t)}`);return Iq(t,r)?Rq(e,t,r):ho.create(ht(e),uh(t),bc(r))}function Oq(e,t,r){if(!Hm(t)&&!le(t))throw new Error(`invalid binary operator ${JSON.stringify(t)}`);return ho.create(ht(e),uh(t),ht(r))}function Pq(e,t,r){if(!Gm(t)&&!le(t))throw new Error(`invalid comparison operator ${JSON.stringify(t)}`);return Mc(e,t,r)}function se(e,t,r){if(!Gm(t)&&!le(t))throw new Error(`invalid comparison operator ${JSON.stringify(t)}`);return Oq(e,t,r)}function Ce(e){return kc("where",e)}function ch(e){return kc("having",e)}function eh(e){return kc("on",e)}function dh(e){return kc("when",e)}function kc(e,t){if(t.length===3)return Pq(t[0],t[1],t[2]);if(t.length===1)return qq(e,t[0]);throw Qv(e,t)}function Iq(e,t){return(e==="is"||e==="is not")&&(vc(t)||Ec(t))}function Rq(e,t,r){return ho.create(ht(e),uh(t),Pe.createImmediate(r))}function uh(e){if(Ae(e)&&Tv.includes(e))return $i.create(e);if(le(e))return e.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(e)}`)}function qq(e,t){if(ue(t)){if(e==="when")throw new Error("when method doesn't accept a callback as an argument");return Mq[e](t)}else if(le(t)){let r=t.toOperationNode();if(ve.is(r)||ho.is(r)||xc.is(r)||yn.is(r)||Je.is(r))return r}else if(e==="when")return Pe.create(t);throw Qv(e,t)}function Qv(e,t){return new Error(`invalid arguments passed to a '${e}' method: ${JSON.stringify(t)}`)}var Mq=c({where(e){let t=ah(),r=Ge(),i=e(Object.assign(t,r)).toOperationNode();if(I.is(i)){if(!i.where)throw new Error("no `where` methods called inside a group callback");return yn.create(i.where.where)}else return i},having(e){let t=ah(),r=Ge(),i=e(Object.assign(t,r)).toOperationNode();if(I.is(i)){if(!i.having)throw new Error("no `having` methods called inside a group callback");return yn.create(i.having.having)}else return i},on(e){let t=qc("InnerJoin","table"),r=Ge(),i=e(Object.assign(t,r)).toOperationNode();if(Ve.is(i)){if(!i.on)throw new Error("no `on` methods called inside a group callback");return yn.create(i.on.on)}else return i}});function De(e,t){if(t.length===3)return Dq(e,t[0],t[1],t[2]);if(t.length===2)return kq(e,t[0],t[1]);throw new Error("not implemented")}function kq(e,t,r){return r(qc(e,t)).toOperationNode()}function Dq(e,t,r,n){return Ve.createWithOn(e,Sn(t),se(r,"=",n))}var Kv=c({is(e){return e.kind==="OffsetNode"},create(e){return c({kind:"OffsetNode",offset:Pe.create(e)})}});var Yv=c({is(e){return e.kind==="GroupByItemNode"},create(e){return c({kind:"GroupByItemNode",groupBy:e})}});function Xv(e){return e=ue(e)?e(Ge()):e,Lr(e).map(Yv.create)}var Dc=c({is(e){return e.kind==="SetOperationNode"},create(e,t,r){return c({kind:"SetOperationNode",operator:e,expression:t,all:r})}});function ui(e,t,r){return Dc.create(e,t.toOperationNode(),r)}var Wr=class e{#e;constructor(t){this.#e=c(t)}get expressionType(){}where(...t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,Ce(t))})}whereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,se(t,r,n))})}orWhere(...t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,Ce(t))})}orWhereRef(t,r,n){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,se(t,r,n))})}whereExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,he(t))})}whereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithWhere(this.#e.queryNode,pe(t))})}orWhereExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,he(t))})}orWhereNotExists(t){return new e({...this.#e,queryNode:T.cloneWithOrWhere(this.#e.queryNode,pe(t))})}having(...t){return new e({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,ch(t))})}havingRef(t,r,n){return new e({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,se(t,r,n))})}orHaving(...t){return new e({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,ch(t))})}orHavingRef(t,r,n){return new e({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,se(t,r,n))})}havingExists(t){return new e({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,he(t))})}havingNotExist(t){return new e({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,pe(t))})}havingNotExists(t){return new e({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,pe(t))})}orHavingExists(t){return new e({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,he(t))})}orHavingNotExists(t){return new e({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,pe(t))})}select(t){return new e({...this.#e,queryNode:I.cloneWithSelections(this.#e.queryNode,Ur(t))})}distinctOn(t){return new e({...this.#e,queryNode:I.cloneWithDistinctOn(this.#e.queryNode,Lr(t))})}modifyFront(t){return new e({...this.#e,queryNode:I.cloneWithFrontModifier(this.#e.queryNode,tr.createWithExpression(t.toOperationNode()))})}modifyEnd(t){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.createWithExpression(t.toOperationNode()))})}distinct(){return new e({...this.#e,queryNode:I.cloneWithFrontModifier(this.#e.queryNode,tr.create("Distinct"))})}forUpdate(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("ForUpdate"))})}forShare(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("ForShare"))})}forKeyShare(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("ForKeyShare"))})}forNoKeyUpdate(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("ForNoKeyUpdate"))})}skipLocked(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("SkipLocked"))})}noWait(){return new e({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,tr.create("NoWait"))})}selectAll(t){return new e({...this.#e,queryNode:I.cloneWithSelections(this.#e.queryNode,rr(t))})}innerJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("InnerJoin",t))})}leftJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("LeftJoin",t))})}rightJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("RightJoin",t))})}fullJoin(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("FullJoin",t))})}innerJoinLateral(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("LateralInnerJoin",t))})}leftJoinLateral(...t){return new e({...this.#e,queryNode:T.cloneWithJoin(this.#e.queryNode,De("LateralLeftJoin",t))})}orderBy(t,r){return new e({...this.#e,queryNode:I.cloneWithOrderByItem(this.#e.queryNode,gn(t,r))})}groupBy(t){return new e({...this.#e,queryNode:I.cloneWithGroupByItems(this.#e.queryNode,Xv(t))})}limit(t){return new e({...this.#e,queryNode:I.cloneWithLimit(this.#e.queryNode,Ic.create(t))})}offset(t){return new e({...this.#e,queryNode:I.cloneWithOffset(this.#e.queryNode,Kv.create(t))})}union(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("union",t,!1))})}unionAll(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("union",t,!0))})}intersect(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("intersect",t,!1))})}intersectAll(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("intersect",t,!0))})}except(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("except",t,!1))})}exceptAll(t){return new e({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,ui("except",t,!0))})}as(t){return new lh(this,t)}clearSelect(){return new e({...this.#e,queryNode:I.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new e({...this.#e,queryNode:T.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new e({...this.#e,queryNode:I.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new e({...this.#e,queryNode:I.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new e({...this.#e,queryNode:I.cloneWithoutOrderBy(this.#e.queryNode)})}$call(t){return t(this)}call(t){return this.$call(t)}$if(t,r){return t?r(this):new e({...this.#e})}if(t,r){return this.$if(t,r)}$castTo(){return new e(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new e(this.#e)}$assertType(){return new e(this.#e)}assertType(){return new e(this.#e)}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let t=this.compile();return(await this.#e.executor.executeQuery(t,this.#e.queryId)).rows}async executeTakeFirst(){let[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=nr){let r=await this.executeTakeFirst();if(r===void 0)throw vn(t)?new t(this.toOperationNode()):t(this.toOperationNode());return r}async*stream(t=100){let r=this.compile(),n=this.#e.executor.stream(r,t,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(t,r){return await new e({...this.#e,queryNode:T.cloneWithExplain(this.#e.queryNode,t,r)}).execute()}};O(Wr,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var lh=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return it.create(this.#e.toOperationNode(),q.create(this.#t))}};var we=class e{#e;constructor(t){this.#e=t}get expressionType(){}as(t){return new ph(this,t)}$castTo(){return new e(this.#e)}toOperationNode(){return this.#e}},ph=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return it.create(this.#e.toOperationNode(),le(this.#t)?this.#t.toOperationNode():q.create(this.#t))}};var ot=c({is(e){return e.kind==="AggregateFunctionNode"},create(e,t=[]){return c({kind:"AggregateFunctionNode",func:e,aggregated:t})},cloneWithDistinct(e){return c({...e,distinct:!0})},cloneWithFilter(e,t){return c({...e,filter:e.filter?Te.cloneWithOperation(e.filter,"And",t):Te.create(t)})},cloneWithOrFilter(e,t){return c({...e,filter:e.filter?Te.cloneWithOperation(e.filter,"Or",t):Te.create(t)})},cloneWithOver(e,t){return c({...e,over:t})}});var Zv=c({is(e){return e.kind==="FunctionNode"},create(e,t){return c({kind:"FunctionNode",func:e,arguments:t})}});var es=class e{#e;constructor(t){this.#e=c(t)}get expressionType(){}as(t){return new fh(this,t)}distinct(){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithFilter(this.#e.aggregateFunctionNode,Ce(t))})}filterWhereExists(t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithFilter(this.#e.aggregateFunctionNode,he(t))})}filterWhereNotExists(t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithFilter(this.#e.aggregateFunctionNode,pe(t))})}filterWhereRef(t,r,n){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithFilter(this.#e.aggregateFunctionNode,se(t,r,n))})}orFilterWhere(...t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithOrFilter(this.#e.aggregateFunctionNode,Ce(t))})}orFilterWhereExists(t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithOrFilter(this.#e.aggregateFunctionNode,he(t))})}orFilterWhereNotExists(t){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithOrFilter(this.#e.aggregateFunctionNode,pe(t))})}orFilterWhereRef(t,r,n){return new e({...this.#e,aggregateFunctionNode:ot.cloneWithOrFilter(this.#e.aggregateFunctionNode,se(t,r,n))})}over(t){let r=Jv();return new e({...this.#e,aggregateFunctionNode:ot.cloneWithOver(this.#e.aggregateFunctionNode,(t?t(r):r).toOperationNode())})}$call(t){return t(this)}toOperationNode(){return this.#e.aggregateFunctionNode}};O(es,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var fh=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return it.create(this.#e.toOperationNode(),q.create(this.#t))}};function Fc(){let e=(r,n)=>new we(Zv.create(r,Lr(n))),t=(r,n)=>new es({aggregateFunctionNode:ot.create(r,n?Lr(n):void 0)});return Object.assign(e,{agg:t,avg(r){return t("avg",[r])},coalesce(r,...n){return e("coalesce",[r,...n])},count(r){return t("count",[r])},countAll(r){return new es({aggregateFunctionNode:ot.create("count",rr(r))})},max(r){return t("max",[r])},min(r){return t("min",[r])},sum(r){return t("sum",[r])}})}var ts=class{#e;constructor(t){this.#e=c(t)}when(...t){return new Lc({...this.#e,node:Je.cloneWithWhen(this.#e.node,Co.create(dh(t)))})}},Lc=class{#e;constructor(t){this.#e=c(t)}then(t){return new mh({...this.#e,node:Je.cloneWithThen(this.#e.node,_t(t))})}},mh=class{#e;constructor(t){this.#e=c(t)}when(...t){return new Lc({...this.#e,node:Je.cloneWithWhen(this.#e.node,Co.create(dh(t)))})}else(t){return new hh({...this.#e,node:Je.cloneWith(this.#e.node,{else:_t(t)})})}end(){return new we(Je.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new we(Je.cloneWith(this.#e.node,{isStatement:!0}))}},hh=class{#e;constructor(t){this.#e=c(t)}end(){return new we(Je.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new we(Je.cloneWith(this.#e.node,{isStatement:!0}))}};function eS(e=di){function t(r,n){return new we(Ac(r,n))}return{get fn(){return Fc()},selectFrom(r){return new Wr({queryId:j(),executor:e,queryNode:I.create($t(r))})},case(r){return new ts({node:Je.create(hn(r)?void 0:ht(r))})},ref(r){return new we(Fr(r))},val(r){return new we(bc(r))},cmpr(r,n,i){return new we(Mc(r,n,i))},bxp(r,n,i){return new we(Mc(r,n,i))},unary:t,not(r){return t("not",r)},exists(r){return t("exists",r)},neg(r){return t("-",r)},and(r){if(r.length===0)return new we(Pe.createImmediate(!0));if(r.length===1)return new we(r[0].toOperationNode());let n=kr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=kr.create(n,r[i].toOperationNode());return new we(yn.create(n))},or(r){if(r.length===0)return new we(Pe.createImmediate(!1));if(r.length===1)return new we(r[0].toOperationNode());let n=Dr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Dr.create(n,r[i].toOperationNode());return new we(yn.create(n))},withSchema(r){return eS(e.withPluginAtFront(new yt(r)))}}}function Ge(e){return eS()}function wn(e){if(le(e))return e.toOperationNode();if(ue(e))return e(Ge()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(e)}`)}function Cc(e){if(le(e))return e.toOperationNode();if(ue(e))return e(Ge()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function oi(e){return Nv(e)||bv(e)||ue(e)}function $t(e){return Zt(e)?e.map(t=>Sn(t)):[Sn(e)]}function Sn(e){return Ae(e)?Fq(e):Cc(e)}function Fq(e){let t=" as ";if(e.includes(t)){let[r,n]=e.split(t).map(tS);return it.create(_e(r),q.create(n))}else return _e(e)}function _e(e){let t=".";if(e.includes(t)){let[r,n]=e.split(t).map(tS);return At.createWithSchema(r,n)}else return At.create(e)}function tS(e){return e.trim()}var _h=c({is(e){return e.kind==="AddColumnNode"},create(e){return c({kind:"AddColumnNode",column:e})}});var jr=c({is(e){return e.kind==="AlterColumnNode"},create(e){return c({kind:"AlterColumnNode",column:U.create(e)})},cloneWith(e,t){return c({...e,...t})}});var oe=c({is(e){return e.kind==="ColumnDefinitionNode"},create(e,t){return c({kind:"ColumnDefinitionNode",column:U.create(e),dataType:t})},cloneWithFrontModifier(e,t){return c({...e,frontModifiers:e.frontModifiers?c([...e.frontModifiers,t]):[t]})},cloneWithEndModifier(e,t){return c({...e,endModifiers:e.endModifiers?c([...e.endModifiers,t]):[t]})},cloneWith(e,t){return c({...e,...t})}});var yh=c({is(e){return e.kind==="DropColumnNode"},create(e){return c({kind:"DropColumnNode",column:U.create(e)})}});var gh=c({is(e){return e.kind==="RenameColumnNode"},create(e,t){return c({kind:"RenameColumnNode",column:U.create(e),renameTo:U.create(t)})}});var rs=c({is(e){return e.kind==="CheckConstraintNode"},create(e,t){return c({kind:"CheckConstraintNode",expression:e,name:t?q.create(t):void 0})}});var rS=["no action","restrict","cascade","set null","set default"],ns=c({is(e){return e.kind==="ReferencesNode"},create(e,t){return c({kind:"ReferencesNode",table:e,columns:c([...t])})},cloneWithOnDelete(e,t){return c({...e,onDelete:t})},cloneWithOnUpdate(e,t){return c({...e,onUpdate:t})}});function zc(e){return le(e)?e.toOperationNode():Pe.createImmediate(e)}var Oo=c({is(e){return e.kind==="GeneratedNode"},create(e){return c({kind:"GeneratedNode",...e})},createWithExpression(e){return c({kind:"GeneratedNode",always:!0,expression:e})},cloneWith(e,t){return c({...e,...t})}});var nS=c({is(e){return e.kind==="DefaultValueNode"},create(e){return c({kind:"DefaultValueNode",defaultValue:e})}});function is(e){if(rS.includes(e))return e;throw new Error(`invalid OnModifyForeignAction ${e}`)}var ir=class e{#e;constructor(t){this.#e=t}autoIncrement(){return new e(oe.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new e(oe.cloneWith(this.#e,{primaryKey:!0}))}references(t){let r=Fr(t);if(!si.is(r)||Hi.is(r.column))throw new Error(`invalid call references('${t}'). The reference must have format table.column or schema.table.column`);return new e(oe.cloneWith(this.#e,{references:ns.create(r.table,[r.column])}))}onDelete(t){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new e(oe.cloneWith(this.#e,{references:ns.cloneWithOnDelete(this.#e.references,is(t))}))}onUpdate(t){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new e(oe.cloneWith(this.#e,{references:ns.cloneWithOnUpdate(this.#e.references,is(t))}))}unique(){return new e(oe.cloneWith(this.#e,{unique:!0}))}notNull(){return new e(oe.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new e(oe.cloneWith(this.#e,{unsigned:!0}))}defaultTo(t){return new e(oe.cloneWith(this.#e,{defaultTo:nS.create(zc(t))}))}check(t){return new e(oe.cloneWith(this.#e,{check:rs.create(t.toOperationNode())}))}generatedAlwaysAs(t){return new e(oe.cloneWith(this.#e,{generated:Oo.createWithExpression(t.toOperationNode())}))}generatedAlwaysAsIdentity(){return new e(oe.cloneWith(this.#e,{generated:Oo.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new e(oe.cloneWith(this.#e,{generated:Oo.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new e(oe.cloneWith(this.#e,{generated:Oo.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(t){return new e(oe.cloneWithFrontModifier(this.#e,t.toOperationNode()))}modifyEnd(t){return new e(oe.cloneWithEndModifier(this.#e,t.toOperationNode()))}$call(t){return t(this)}toOperationNode(){return this.#e}};O(ir,"don't await ColumnDefinitionBuilder instances directly.");var wh=c({is(e){return e.kind==="ModifyColumnNode"},create(e){return c({kind:"ModifyColumnNode",column:e})}});var iS=c({is(e){return e.kind==="DataTypeNode"},create(e){return c({kind:"DataTypeNode",dataType:e})}});function Vr(e){return le(e)?e.toOperationNode():iS.create(e)}var li=c({is(e){return e.kind==="ForeignKeyConstraintNode"},create(e,t,r,n){return c({kind:"ForeignKeyConstraintNode",columns:e,references:ns.create(t,r),name:n?q.create(n):void 0})},cloneWith(e,t){return c({...e,...t})}});var pi=class e{#e;constructor(t){this.#e=t}onDelete(t){return new e(li.cloneWith(this.#e,{onDelete:is(t)}))}onUpdate(t){return new e(li.cloneWith(this.#e,{onUpdate:is(t)}))}$call(t){return t(this)}toOperationNode(){return this.#e}};O(pi,"don't await ForeignKeyConstraintBuilder instances directly.");var Po=c({is(e){return e.kind==="AddConstraintNode"},create(e){return c({kind:"AddConstraintNode",constraint:e})}});var Uc=c({is(e){return e.kind==="UniqueConstraintNode"},create(e,t){return c({kind:"UniqueConstraintNode",columns:c(e.map(U.create)),name:t?q.create(t):void 0})}});var ss=c({is(e){return e.kind==="DropConstraintNode"},create(e){return c({kind:"DropConstraintNode",constraintName:q.create(e)})},cloneWith(e,t){return c({...e,...t})}});var mi=class{alterColumnNode;constructor(t){this.alterColumnNode=t}setDataType(t){return new fi(jr.cloneWith(this.alterColumnNode,{dataType:Vr(t)}))}setDefault(t){return new fi(jr.cloneWith(this.alterColumnNode,{setDefault:zc(t)}))}dropDefault(){return new fi(jr.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new fi(jr.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new fi(jr.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}$call(t){return t(this)}},fi=class extends mi{toOperationNode(){return this.alterColumnNode}};var Nn=class{#e;constructor(t){this.#e=c(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Nn,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var Io=class e{#e;constructor(t){this.#e=c(t)}onDelete(t){return new e({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(t)})}onUpdate(t){return new e({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(t)})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(ie.cloneWithTableProps(this.#e.node,{addConstraint:Po.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Io,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var Ro=class e{#e;constructor(t){this.#e=c(t)}ifExists(){return new e({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{dropConstraint:ss.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new e({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{dropConstraint:ss.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new e({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{dropConstraint:ss.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Ro,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var qo=class{#e;constructor(t){this.#e=c(t)}renameTo(t){return new Nn({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{renameTo:_e(t)})})}setSchema(t){return new Nn({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{setSchema:q.create(t)})})}alterColumn(t,r){let n=r(new mi(jr.create(t)));return new bn({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(t){return new bn({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,yh.create(t))})}renameColumn(t,r){return new bn({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,gh.create(t,r))})}addColumn(t,r,n=_n){let i=n(new ir(oe.create(t,Vr(r))));return new bn({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,_h.create(i.toOperationNode()))})}modifyColumn(t,r,n=_n){let i=n(new ir(oe.create(t,Vr(r))));return new bn({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,wh.create(i.toOperationNode()))})}addUniqueConstraint(t,r){return new Nn({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{addConstraint:Po.create(Uc.create(r,t))})})}addCheckConstraint(t,r){return new Nn({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{addConstraint:Po.create(rs.create(r.toOperationNode(),t))})})}addForeignKeyConstraint(t,r,n,i){return new Io({...this.#e,constraintBuilder:new pi(li.create(r.map(U.create),_e(n),i.map(U.create),t))})}dropConstraint(t){return new Ro({...this.#e,node:ie.cloneWithTableProps(this.#e.node,{dropConstraint:ss.create(t)})})}$call(t){return t(this)}call(t){return this.$call(t)}},bn=class e{#e;constructor(t){this.#e=c(t)}alterColumn(t,r){let n=r(new mi(jr.create(t)));return new e({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(t){return new e({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,yh.create(t))})}renameColumn(t,r){return new e({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,gh.create(t,r))})}addColumn(t,r,n=_n){let i=n(new ir(oe.create(t,Vr(r))));return new e({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,_h.create(i.toOperationNode()))})}modifyColumn(t,r,n=_n){let i=n(new ir(oe.create(t,Vr(r))));return new e({...this.#e,node:ie.cloneWithColumnAlteration(this.#e.node,wh.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(qo,"don't await AlterTableBuilder instances");O(mi,"don't await AlterColumnBuilder instances");O(bn,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var os=class extends Yi{transformValue(t){return{...super.transformValue(t),immediate:!0}}};var Mo=class e{#e;constructor(t){this.#e=c(t)}ifNotExists(){return new e({...this.#e,node:er.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new e({...this.#e,node:er.cloneWith(this.#e.node,{unique:!0})})}on(t){return new e({...this.#e,node:er.cloneWith(this.#e.node,{table:_e(t)})})}column(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,[Km(t)])})}columns(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,t.map(Km))})}expression(t){return new e({...this.#e,node:er.cloneWithColumns(this.#e.node,[t.toOperationNode()])})}using(t){return new e({...this.#e,node:er.cloneWith(this.#e.node,{using:ve.createWithSql(t)})})}where(...t){let r=new os;return new e({...this.#e,node:T.cloneWithWhere(this.#e.node,r.transformNode(Ce(t)))})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Mo,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var ko=class e{#e;constructor(t){this.#e=c(t)}ifNotExists(){return new e({...this.#e,node:Sc.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(ko,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var sS=c({is(e){return e.kind==="PrimaryKeyConstraintNode"},create(e,t){return c({kind:"PrimaryKeyConstraintNode",columns:c(e.map(U.create)),name:t?q.create(t):void 0})}});function oS(e){if(Sv.includes(e))return e;throw new Error(`invalid OnCommitAction ${e}`)}var Do=class e{#e;constructor(t){this.#e=c(t)}temporary(){return new e({...this.#e,node:mt.cloneWith(this.#e.node,{temporary:!0})})}onCommit(t){return new e({...this.#e,node:mt.cloneWith(this.#e.node,{onCommit:oS(t)})})}ifNotExists(){return new e({...this.#e,node:mt.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(t,r,n=_n){let i=n(new ir(oe.create(t,Vr(r))));return new e({...this.#e,node:mt.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(t,r){return new e({...this.#e,node:mt.cloneWithConstraint(this.#e.node,sS.create(r,t))})}addUniqueConstraint(t,r){return new e({...this.#e,node:mt.cloneWithConstraint(this.#e.node,Uc.create(r,t))})}addCheckConstraint(t,r){return new e({...this.#e,node:mt.cloneWithConstraint(this.#e.node,rs.create(r.toOperationNode(),t))})}addForeignKeyConstraint(t,r,n,i,s=_n){let o=s(new pi(li.create(r.map(U.create),_e(n),i.map(U.create),t)));return new e({...this.#e,node:mt.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(t){return new e({...this.#e,node:mt.cloneWithFrontModifier(this.#e.node,t.toOperationNode())})}modifyEnd(t){return new e({...this.#e,node:mt.cloneWithEndModifier(this.#e.node,t.toOperationNode())})}$call(t){return t(this)}call(t){return this.$call(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Do,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Fo=class e{#e;constructor(t){this.#e=c(t)}on(t){return new e({...this.#e,node:Vi.cloneWith(this.#e.node,{table:_e(t)})})}ifExists(){return new e({...this.#e,node:Vi.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:Vi.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Fo,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var Lo=class e{#e;constructor(t){this.#e=c(t)}ifExists(){return new e({...this.#e,node:fo.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:fo.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Lo,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var zo=class e{#e;constructor(t){this.#e=c(t)}ifExists(){return new e({...this.#e,node:mo.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:mo.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(zo,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var Ht=c({is(e){return e.kind==="CreateViewNode"},create(e){return c({kind:"CreateViewNode",name:nt.create(e)})},cloneWith(e,t){return c({...e,...t})}});var Wc=class{#e=new os;transformQuery(t){return this.#e.transformNode(t.node)}transformResult(t){return Promise.resolve(t.result)}};var Uo=class e{#e;constructor(t){this.#e=c(t)}temporary(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{orReplace:!0})})}columns(t){return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{columns:t.map(Qm)})})}as(t){let r=t.withPlugin(new Wc).toOperationNode();return new e({...this.#e,node:Ht.cloneWith(this.#e.node,{as:r})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Uo,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var as=c({is(e){return e.kind==="DropViewNode"},create(e){return c({kind:"DropViewNode",name:nt.create(e)})},cloneWith(e,t){return c({...e,...t})}});var Wo=class e{#e;constructor(t){this.#e=c(t)}materialized(){return new e({...this.#e,node:as.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new e({...this.#e,node:as.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new e({...this.#e,node:as.cloneWith(this.#e.node,{cascade:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Wo,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var jc=c({is(e){return e.kind==="CreateTypeNode"},create(e){return c({kind:"CreateTypeNode",name:e})},cloneWithEnum(e,t){return c({...e,enum:Gi.create(t.map(r=>Pe.createImmediate(r)))})}});var jo=class e{#e;constructor(t){this.#e=c(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(t){return new e({...this.#e,node:jc.cloneWithEnum(this.#e.node,t)})}$call(t){return t(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(jo,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var Vc=c({is(e){return e.kind==="DropTypeNode"},create(e){return c({kind:"DropTypeNode",name:e})},cloneWith(e,t){return c({...e,...t})}});var Vo=class e{#e;constructor(t){this.#e=c(t)}ifExists(){return new e({...this.#e,node:Vc.cloneWith(this.#e.node,{ifExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};O(Vo,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Eh(e){let t=".";if(e.includes(t)){let r=e.split(t).map(Lq);if(r.length===2)return nt.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${e}`)}else return nt.create(e)}function Lq(e){return e.trim()}var Bc=class e{#e;constructor(t){this.#e=t}createTable(t){return new Do({queryId:j(),executor:this.#e,node:mt.create(_e(t))})}dropTable(t){return new zo({queryId:j(),executor:this.#e,node:mo.create(_e(t))})}createIndex(t){return new Mo({queryId:j(),executor:this.#e,node:er.create(t)})}dropIndex(t){return new Fo({queryId:j(),executor:this.#e,node:Vi.create(t)})}createSchema(t){return new ko({queryId:j(),executor:this.#e,node:Sc.create(t)})}dropSchema(t){return new Lo({queryId:j(),executor:this.#e,node:fo.create(t)})}alterTable(t){return new qo({queryId:j(),executor:this.#e,node:ie.create(_e(t))})}createView(t){return new Uo({queryId:j(),executor:this.#e,node:Ht.create(t)})}dropView(t){return new Wo({queryId:j(),executor:this.#e,node:as.create(t)})}createType(t){return new jo({queryId:j(),executor:this.#e,node:jc.create(Eh(t))})}dropType(t){return new Vo({queryId:j(),executor:this.#e,node:Vc.create(Eh(t))})}withPlugin(t){return new e(this.#e.withPlugin(t))}withoutPlugins(){return new e(this.#e.withoutPlugins())}withSchema(t){return new e(this.#e.withPluginAtFront(new yt(t)))}};var $c=class{ref(t){return new Tc(t)}};var Hc=class{#e;constructor(t){this.#e=t}async provideConnection(t){let r=await this.#e.acquireConnection();try{return await t(r)}finally{await this.#e.releaseConnection(r)}}};var Gc=class e extends Zi{#e;#t;#r;constructor(t,r,n,i=[]){super(i),this.#e=t,this.#t=r,this.#r=n}get adapter(){return this.#t}compileQuery(t){return this.#e.compileQuery(t)}provideConnection(t){return this.#r.provideConnection(t)}withPlugins(t){return new e(this.#e,this.#t,this.#r,[...this.plugins,...t])}withPlugin(t){return new e(this.#e,this.#t,this.#r,[...this.plugins,t])}withPluginAtFront(t){return new e(this.#e,this.#t,this.#r,[t,...this.plugins])}withConnectionProvider(t){return new e(this.#e,this.#t,t,[...this.plugins])}withoutPlugins(){return new e(this.#e,this.#t,this.#r,[])}};function vh(){return typeof performance<"u"&&ue(performance.now)?performance.now():Date.now()}var Jc=class{#e;#t;#r;#n;#i=new WeakSet;constructor(t,r){this.#e=t,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(t=>(this.#r=void 0,Promise.reject(t)))),await this.#r}async acquireConnection(){await this.init();let t=await this.#e.acquireConnection();return this.#i.has(t)||(this.#s()&&this.#o(t),this.#i.add(t)),t}async releaseConnection(t){await this.#e.releaseConnection(t)}beginTransaction(t,r){return this.#e.beginTransaction(t,r)}commitTransaction(t){return this.#e.commitTransaction(t)}rollbackTransaction(t){return this.#e.rollbackTransaction(t)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(t=>(this.#n=void 0,Promise.reject(t)))),await this.#n)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(t){let r=t.executeQuery;t.executeQuery=async n=>{let i=vh();try{return await r.call(t,n)}catch(s){throw await this.#d(s,n,i),s}finally{await this.#u(n,i)}}}async#d(t,r,n){await this.#t.error(()=>({level:"error",error:t,query:r,queryDurationMillis:this.#c(n)}))}async#u(t,r){await this.#t.query(()=>({level:"query",query:t,queryDurationMillis:this.#c(r)}))}#c(t){return vh()-t}};var Bo=class{#e;#t;constructor(t){this.#e=t}async provideConnection(t){for(;this.#t;)await this.#t;let r=this.#r(t);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(t){return await t(this.#e)}};var aS=["read uncommitted","read committed","repeatable read","serializable"];var Zse=c(["query","error"]),Qc=class{#e;#t;constructor(t){ue(t)?(this.#t=t,this.#e=c({query:!0,error:!0})):(this.#t=zq,this.#e=c({query:t.includes("query"),error:t.includes("error")}))}isLevelEnabled(t){return this.#e[t]}async query(t){this.#e.query&&await this.#t(t())}async error(t){this.#e.error&&await this.#t(t())}};function zq(e){e.level==="query"?(console.log(`kysely:query: ${e.query.sql}`),console.log(`kysely:query: duration: ${e.queryDurationMillis.toFixed(1)}ms`)):e.level==="error"&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${e}`))}function cS(e){return je(e)&&ue(e.compile)}var cs=class e extends Xi{#e;constructor(t){let r,n;if(Uq(t))r={executor:t.executor},n={...t};else{let i=t.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),u=new Qc(t.log??[]),l=new Jc(s,u),p=new Hc(l),f=new Gc(o,a,p,t.plugins??[]);r={executor:f},n={config:t,executor:f,dialect:i,driver:l}}super(r),this.#e=c(n)}get schema(){return new Bc(this.#e.executor)}get dynamic(){return new $c}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(t){return new ts({node:Je.create(hn(t)?void 0:wn(t))})}get fn(){return Fc()}transaction(){return new Yc({...this.#e})}connection(){return new Kc({...this.#e})}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new yt(t))})}withTables(){return new e({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(t,r=j()){let n=cS(t)?t.compile():t;return this.getExecutor().executeQuery(n,r)}},Sh=class e extends cs{#e;constructor(t){super(t),this.#e=t}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(t){return new e({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new e({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new e({...this.#e,executor:this.#e.executor.withPluginAtFront(new yt(t))})}withTables(){return new e({...this.#e})}};function Uq(e){return je(e)&&je(e.config)&&je(e.driver)&&je(e.executor)&&je(e.dialect)}var Kc=class{#e;constructor(t){this.#e=c(t)}async execute(t){return this.#e.executor.provideConnection(async r=>{let n=this.#e.executor.withConnectionProvider(new Bo(r)),i=new cs({...this.#e,executor:n});return await t(i)})}};O(Kc,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var Yc=class e{#e;constructor(t){this.#e=c(t)}setIsolationLevel(t){return new e({...this.#e,isolationLevel:t})}async execute(t){let{isolationLevel:r,...n}=this.#e,i={isolationLevel:r};return Wq(i),this.#e.executor.provideConnection(async s=>{let o=this.#e.executor.withConnectionProvider(new Bo(s)),a=new Sh({...n,executor:o});try{await this.#e.driver.beginTransaction(s,i);let u=await t(a);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}};O(Yc,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Wq(e){if(e.isolationLevel&&!aS.includes(e.isolationLevel))throw new Error(`invalid transaction isolation level ${e.isolationLevel}`)}var Tt=class e{#e;constructor(t){this.#e=c(t)}get expressionType(){}as(t){return new Nh(this,t)}$castTo(){return new e({...this.#e})}castTo(){return this.$castTo()}withPlugin(t){return new e({...this.#e,plugins:this.#e.plugins!==void 0?c([...this.#e.plugins,t]):c([t])})}toOperationNode(){return this.#r(this.#t())}compile(t){return this.#n(this.#t(t))}async execute(t){let r=this.#t(t);return r.executeQuery(this.#n(r),this.#e.queryId)}#t(t){let r=t!==void 0?t.getExecutor():di;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(t){return t.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(t){return t.compileQuery(this.#r(t),this.#e.queryId)}};O(Tt,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Nh=class{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return it.create(this.#e.toOperationNode(),le(this.#t)?this.#t.toOperationNode():q.create(this.#t))}};var Qe=Object.assign((e,...t)=>new Tt({queryId:j(),rawNode:ve.create(e,t?.map(_t)??[])}),{ref(e){return new Tt({queryId:j(),rawNode:ve.createWithChild(Fr(e))})},val(e){return new Tt({queryId:j(),rawNode:ve.createWithChild(_t(e))})},value(e){return this.val(e)},table(e){return new Tt({queryId:j(),rawNode:ve.createWithChild(_e(e))})},id(...e){let t=new Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",new Tt({queryId:j(),rawNode:ve.create(t,e.map(q.create))})},lit(e){return new Tt({queryId:j(),rawNode:ve.createWithChild(Pe.createImmediate(e))})},literal(e){return this.lit(e)},raw(e){return new Tt({queryId:j(),rawNode:ve.createWithSql(e)})},join(e,t=Qe`, `){let r=new Array(2*e.length-1),n=t.toOperationNode();for(let i=0;i<e.length;++i)r[2*i]=_t(e[i]),i!==e.length-1&&(r[2*i+1]=n);return new Tt({queryId:j(),rawNode:ve.createWithChildren(r)})}});var Xc=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this)});visitNode=t=>{this.nodeStack.push(t),this.#e[t.kind](t),this.nodeStack.pop()}};var ds=class extends Xc{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(t){return this.#e="",this.#t=[],this.visitNode(t),c({query:t,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(t){let r=this.parentNode!==void 0&&!st.is(this.parentNode)&&!Ht.is(this.parentNode)&&!Dc.is(this.parentNode);this.parentNode===void 0&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("select "),t.distinctOn&&(this.compileDistinctOn(t.distinctOn),this.append(" ")),t.frontModifiers&&t.frontModifiers.length>0&&(this.compileList(t.frontModifiers," "),this.append(" ")),t.selections&&(this.compileList(t.selections),this.append(" ")),this.visitNode(t.from),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.groupBy&&(this.append(" "),this.visitNode(t.groupBy)),t.having&&(this.append(" "),this.visitNode(t.having)),t.setOperations&&(this.append(" "),this.compileList(t.setOperations," ")),t.orderBy&&(this.append(" "),this.visitNode(t.orderBy)),t.limit&&(this.append(" "),this.visitNode(t.limit)),t.offset&&(this.append(" "),this.visitNode(t.offset)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," ")),r&&this.append(")")}visitFrom(t){this.append("from "),this.compileList(t.froms)}visitSelection(t){this.visitNode(t.selection)}visitColumn(t){this.visitNode(t.column)}compileDistinctOn(t){this.append("distinct on ("),this.compileList(t),this.append(")")}compileList(t,r=", "){let n=t.length-1;for(let i=0;i<=n;i++)this.visitNode(t[i]),i<n&&this.append(r)}visitWhere(t){this.append("where "),this.visitNode(t.where)}visitHaving(t){this.append("having "),this.visitNode(t.having)}visitInsertQuery(t){let r=this.nodeStack.find(T.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append(t.replace?"replace":"insert"),t.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(t.into),t.columns&&(this.append(" ("),this.compileList(t.columns),this.append(")")),t.values&&(this.append(" "),this.visitNode(t.values)),t.onConflict&&(this.append(" "),this.visitNode(t.onConflict)),t.onDuplicateKey&&(this.append(" "),this.visitNode(t.onDuplicateKey)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitValues(t){this.append("values "),this.compileList(t.values)}visitDeleteQuery(t){let r=this.nodeStack.find(T.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("delete "),this.visitNode(t.from),t.using&&(this.append(" "),this.visitNode(t.using)),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.orderBy&&(this.append(" "),this.visitNode(t.orderBy)),t.limit&&(this.append(" "),this.visitNode(t.limit)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitReturning(t){this.append("returning "),this.compileList(t.selections)}visitAlias(t){this.visitNode(t.node),this.append(" as "),this.visitNode(t.alias)}visitReference(t){this.visitNode(t.table),this.append("."),this.visitNode(t.column)}visitSelectAll(t){this.append("*")}visitIdentifier(t){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(t),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(t){if(!Ae(t.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(t.name))}visitAnd(t){this.visitNode(t.left),this.append(" and "),this.visitNode(t.right)}visitOr(t){this.visitNode(t.left),this.append(" or "),this.visitNode(t.right)}visitValue(t){t.immediate?this.appendImmediateValue(t.value):this.appendValue(t.value)}visitValueList(t){this.append("("),this.compileList(t.values),this.append(")")}visitPrimitiveValueList(t){this.append("(");let{values:r}=t;for(let n=0;n<r.length;++n)this.appendValue(r[n]),n!==r.length-1&&this.append(", ");this.append(")")}visitParens(t){this.append("("),this.visitNode(t.node),this.append(")")}visitJoin(t){this.append(Vq[t.joinType]),this.append(" "),this.visitNode(t.table),t.on&&(this.append(" "),this.visitNode(t.on))}visitOn(t){this.append("on "),this.visitNode(t.on)}visitRaw(t){let{sqlFragments:r,parameters:n}=t;for(let i=0;i<r.length;++i)this.append(r[i]),n.length>i&&this.visitNode(n[i])}visitOperator(t){this.append(t.operator)}visitTable(t){this.visitNode(t.table)}visitSchemableIdentifier(t){t.schema&&(this.visitNode(t.schema),this.append(".")),this.visitNode(t.identifier)}visitCreateTable(t){this.append("create "),t.frontModifiers&&t.frontModifiers.length>0&&(this.compileList(t.frontModifiers," "),this.append(" ")),t.temporary&&this.append("temporary "),this.append("table "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.table),this.append(" ("),this.compileList([...t.columns,...t.constraints??[]]),this.append(")"),t.onCommit&&(this.append(" on commit "),this.append(t.onCommit)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," "))}visitColumnDefinition(t){this.visitNode(t.column),this.append(" "),this.visitNode(t.dataType),t.unsigned&&this.append(" unsigned"),t.frontModifiers&&t.frontModifiers.length>0&&(this.append(" "),this.compileList(t.frontModifiers," ")),t.generated&&(this.append(" "),this.visitNode(t.generated)),t.defaultTo&&(this.append(" "),this.visitNode(t.defaultTo)),t.notNull&&this.append(" not null"),t.unique&&this.append(" unique"),t.primaryKey&&this.append(" primary key"),t.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),t.references&&(this.append(" "),this.visitNode(t.references)),t.check&&(this.append(" "),this.visitNode(t.check)),t.endModifiers&&t.endModifiers.length>0&&(this.append(" "),this.compileList(t.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(t){this.append("references "),this.visitNode(t.table),this.append(" ("),this.compileList(t.columns),this.append(")"),t.onDelete&&(this.append(" on delete "),this.append(t.onDelete)),t.onUpdate&&(this.append(" on update "),this.append(t.onUpdate))}visitDropTable(t){this.append("drop table "),t.ifExists&&this.append("if exists "),this.visitNode(t.table),t.cascade&&this.append(" cascade")}visitDataType(t){this.append(t.dataType)}visitOrderBy(t){this.append("order by "),this.compileList(t.items)}visitOrderByItem(t){this.visitNode(t.orderBy),t.direction&&(this.append(" "),this.visitNode(t.direction))}visitGroupBy(t){this.append("group by "),this.compileList(t.items)}visitGroupByItem(t){this.visitNode(t.groupBy)}visitUpdateQuery(t){let r=this.nodeStack.find(T.is)!==t;!r&&t.explain&&(this.visitNode(t.explain),this.append(" ")),r&&this.append("("),t.with&&(this.visitNode(t.with),this.append(" ")),this.append("update "),this.visitNode(t.table),this.append(" set "),t.updates&&this.compileList(t.updates),t.from&&(this.append(" "),this.visitNode(t.from)),t.joins&&(this.append(" "),this.compileList(t.joins," ")),t.where&&(this.append(" "),this.visitNode(t.where)),t.returning&&(this.append(" "),this.visitNode(t.returning)),r&&this.append(")")}visitColumnUpdate(t){this.visitNode(t.column),this.append(" = "),this.visitNode(t.value)}visitLimit(t){this.append("limit "),this.visitNode(t.limit)}visitOffset(t){this.append("offset "),this.visitNode(t.offset)}visitOnConflict(t){this.append("on conflict"),t.columns?(this.append(" ("),this.compileList(t.columns),this.append(")")):t.constraint?(this.append(" on constraint "),this.visitNode(t.constraint)):t.indexExpression&&(this.append(" ("),this.visitNode(t.indexExpression),this.append(")")),t.indexWhere&&(this.append(" "),this.visitNode(t.indexWhere)),t.doNothing===!0?this.append(" do nothing"):t.updates&&(this.append(" do update set "),this.compileList(t.updates),t.updateWhere&&(this.append(" "),this.visitNode(t.updateWhere)))}visitOnDuplicateKey(t){this.append("on duplicate key update "),this.compileList(t.updates)}visitCreateIndex(t){this.append("create "),t.unique&&this.append("unique "),this.append("index "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.name),t.table&&(this.append(" on "),this.visitNode(t.table)),t.using&&(this.append(" using "),this.visitNode(t.using)),t.columns&&(this.append(" ("),this.compileList(t.columns),this.append(")")),t.where&&(this.append(" "),this.visitNode(t.where))}visitDropIndex(t){this.append("drop index "),t.ifExists&&this.append("if exists "),this.visitNode(t.name),t.table&&(this.append(" on "),this.visitNode(t.table)),t.cascade&&this.append(" cascade")}visitCreateSchema(t){this.append("create schema "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.schema)}visitDropSchema(t){this.append("drop schema "),t.ifExists&&this.append("if exists "),this.visitNode(t.schema),t.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("primary key ("),this.compileList(t.columns),this.append(")")}visitUniqueConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("unique ("),this.compileList(t.columns),this.append(")")}visitCheckConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("check ("),this.visitNode(t.expression),this.append(")")}visitForeignKeyConstraint(t){t.name&&(this.append("constraint "),this.visitNode(t.name),this.append(" ")),this.append("foreign key ("),this.compileList(t.columns),this.append(") "),this.visitNode(t.references),t.onDelete&&(this.append(" on delete "),this.append(t.onDelete)),t.onUpdate&&(this.append(" on update "),this.append(t.onUpdate))}visitList(t){this.compileList(t.items)}visitWith(t){this.append("with "),t.recursive&&this.append("recursive "),this.compileList(t.expressions)}visitCommonTableExpression(t){this.visitNode(t.name),this.append(" as "),this.visitNode(t.expression)}visitCommonTableExpressionName(t){this.visitNode(t.table),t.columns&&(this.append("("),this.compileList(t.columns),this.append(")"))}visitAlterTable(t){this.append("alter table "),this.visitNode(t.table),this.append(" "),t.renameTo&&(this.append("rename to "),this.visitNode(t.renameTo)),t.setSchema&&(this.append("set schema "),this.visitNode(t.setSchema)),t.addConstraint&&this.visitNode(t.addConstraint),t.dropConstraint&&this.visitNode(t.dropConstraint),t.columnAlterations&&this.compileList(t.columnAlterations)}visitAddColumn(t){this.append("add column "),this.visitNode(t.column)}visitRenameColumn(t){this.append("rename column "),this.visitNode(t.column),this.append(" to "),this.visitNode(t.renameTo)}visitDropColumn(t){this.append("drop column "),this.visitNode(t.column)}visitAlterColumn(t){this.append("alter column "),this.visitNode(t.column),this.append(" "),t.dataType&&(this.append("type "),this.visitNode(t.dataType),t.dataTypeExpression&&(this.append("using "),this.visitNode(t.dataTypeExpression))),t.setDefault&&(this.append("set default "),this.visitNode(t.setDefault)),t.dropDefault&&this.append("drop default"),t.setNotNull&&this.append("set not null"),t.dropNotNull&&this.append("drop not null")}visitModifyColumn(t){this.append("modify column "),this.visitNode(t.column)}visitAddConstraint(t){this.append("add "),this.visitNode(t.constraint)}visitDropConstraint(t){this.append("drop constraint "),t.ifExists&&this.append("if exists "),this.visitNode(t.constraintName),t.modifier==="cascade"?this.append(" cascade"):t.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(t){this.append(t.operator),this.append(" "),t.all&&this.append("all "),this.visitNode(t.expression)}visitCreateView(t){this.append("create "),t.orReplace&&this.append("or replace "),t.materialized&&this.append("materialized "),t.temporary&&this.append("temporary "),this.append("view "),t.ifNotExists&&this.append("if not exists "),this.visitNode(t.name),this.append(" "),t.columns&&(this.append("("),this.compileList(t.columns),this.append(") ")),t.as&&(this.append("as "),this.visitNode(t.as))}visitDropView(t){this.append("drop "),t.materialized&&this.append("materialized "),this.append("view "),t.ifExists&&this.append("if exists "),this.visitNode(t.name),t.cascade&&this.append(" cascade")}visitGenerated(t){this.append("generated "),t.always&&this.append("always "),t.byDefault&&this.append("by default "),this.append("as "),t.identity&&this.append("identity"),t.expression&&(this.append("("),this.visitNode(t.expression),this.append(")")),t.stored&&this.append(" stored")}visitDefaultValue(t){this.append("default "),this.visitNode(t.defaultValue)}visitSelectModifier(t){t.rawModifier?this.visitNode(t.rawModifier):this.append(jq[t.modifier])}visitCreateType(t){this.append("create type "),this.visitNode(t.name),t.enum&&(this.append(" as enum "),this.visitNode(t.enum))}visitDropType(t){this.append("drop type "),t.ifExists&&this.append("if exists "),this.visitNode(t.name)}visitExplain(t){this.append("explain"),(t.options||t.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),t.options&&(this.visitNode(t.options),t.format&&this.append(this.getExplainOptionsDelimiter())),t.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(t.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(t){this.append("default")}visitAggregateFunction(t){this.append(t.func),this.append("("),t.distinct&&this.append("distinct "),this.compileList(t.aggregated),this.append(")"),t.filter&&(this.append(" filter("),this.visitNode(t.filter),this.append(")")),t.over&&(this.append(" "),this.visitNode(t.over))}visitOver(t){this.append("over("),t.partitionBy&&(this.visitNode(t.partitionBy),t.orderBy&&this.append(" ")),t.orderBy&&this.visitNode(t.orderBy),this.append(")")}visitPartitionBy(t){this.append("partition by "),this.compileList(t.items)}visitPartitionByItem(t){this.visitNode(t.partitionBy)}visitBinaryOperation(t){this.visitNode(t.leftOperand),this.append(" "),this.visitNode(t.operator),this.append(" "),this.visitNode(t.rightOperand)}visitUnaryOperation(t){this.visitNode(t.operator),this.isMinusOperator(t.operator)||this.append(" "),this.visitNode(t.operand)}isMinusOperator(t){return $i.is(t)&&t.operator==="-"}visitUsing(t){this.append("using "),this.compileList(t.tables)}visitFunction(t){this.append(t.func),this.append("("),this.compileList(t.arguments),this.append(")")}visitCase(t){this.append("case"),t.value&&(this.append(" "),this.visitNode(t.value)),t.when&&(this.append(" "),this.compileList(t.when," ")),t.else&&(this.append(" else "),this.visitNode(t.else)),this.append(" end"),t.isStatement&&this.append(" case")}visitWhen(t){this.append("when "),this.visitNode(t.condition),t.result&&(this.append(" then "),this.visitNode(t.result))}append(t){this.#e+=t}appendValue(t){this.addParameter(t),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(t){let r=this.getLeftIdentifierWrapper(),n=this.getRightIdentifierWrapper(),i="";for(let s of t)i+=s,s===r?i+=r:s===n&&(i+=n);return i}addParameter(t){this.#t.push(t)}appendImmediateValue(t){if(Ae(t))this.append(`'${t}'`);else if(gv(t)||Ec(t))this.append(t.toString());else if(vc(t))this.append("null");else if(wv(t))this.appendImmediateValue(t.toISOString());else if(Ev(t))this.appendImmediateValue(t.toString());else throw new Error(`invalid immediate value ${t}`)}},jq=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Vq=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var us=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};var Zc=class{transformQuery(t){return t.node}async transformResult(t){return t.result}};var Ho="kysely_migration",ls="kysely_migration_lock",bh="migration_lock",xh=c({__noMigrations__:!0}),ed=class{#e;constructor(t){this.#e=c(t)}async getMigrations(){let t=await this.#a(this.#n)?await this.#e.db.withPlugin(this.#s).selectFrom(this.#n).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:n,...i})=>{let s=t.find(o=>o.name===n);return{name:n,migration:i,executedAt:s?new Date(s.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:t})=>t.length-1)}async migrateTo(t){return this.#t(({migrations:r})=>{if(t===xh)return-1;let n=r.findIndex(i=>i.name===t);if(n===-1)throw new Error(`migration "${t}" doesn't exist`);return n})}async migrateUp(){return this.#t(({currentIndex:t,migrations:r})=>Math.min(t+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:t})=>Math.max(t-1,-1))}async#t(t){try{return await this.#o(),await this.#h(t)}catch(r){return r instanceof $o?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#n(){return this.#e.migrationTableName??Ho}get#i(){return this.#e.migrationLockTableName??ls}get#s(){return this.#r?new yt(this.#r):new Zc}async#o(){await this.#d(),await this.#u(),await this.#c(),await this.#m()}async#d(){if(this.#r&&!await this.#l())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(t){if(!await this.#l())throw t}}async#u(){if(!await this.#a(this.#n))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#s).createTable(this.#n).ifNotExists().addColumn("name","varchar(255)",t=>t.notNull().primaryKey()).addColumn("timestamp","varchar(255)",t=>t.notNull()).execute()}catch(t){if(!await this.#a(this.#n))throw t}}async#c(){if(!await this.#a(this.#i))try{await this.#e.db.schema.withPlugin(this.#s).createTable(this.#i).ifNotExists().addColumn("id","varchar(255)",t=>t.notNull().primaryKey()).addColumn("is_locked","integer",t=>t.notNull().defaultTo(0)).execute()}catch(t){if(!await this.#a(this.#i))throw t}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#s).insertInto(this.#i).values({id:bh,is_locked:0}).execute()}catch(t){if(!await this.#p())throw t}}async#l(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(t){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(i=>i.name===t&&(!r||i.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#s).selectFrom(this.#i).where("id","=",bh).select("id").executeTakeFirst()}async#h(t){let r=this.#e.db.getExecutor().adapter,n=c({lockTable:this.#e.migrationLockTableName??ls,lockRowId:bh,lockTableSchema:this.#e.migrationTableSchema}),i=async s=>{try{await r.acquireMigrationLock(s,n);let o=await this.#_(s);if(o.migrations.length===0)return{results:[]};let a=t(o);return a===void 0?{results:[]}:a<o.currentIndex?await this.#w(s,o,a):a>o.currentIndex?await this.#E(s,o,a):{results:[]}}finally{await r.releaseMigrationLock(s,n)}};return r.supportsTransactionalDdl?this.#e.db.transaction().execute(i):this.#e.db.connection().execute(i)}async#_(t){let r=await this.#f(),n=await this.#y(t);return this.#g(r,n),c({migrations:r,currentIndex:r.findIndex(i=>i.name===vv(n))})}async#f(){let t=await this.#e.provider.getMigrations();return Object.keys(t).sort().map(r=>({...t[r],name:r}))}async#y(t){return(await t.withPlugin(this.#s).selectFrom(this.#n).select("name").orderBy("name").execute()).map(n=>n.name)}#g(t,r){for(let n of r)if(!t.some(i=>i.name===n))throw new Error(`corrupted migrations: previously executed migration ${n} is missing`);for(let n=0;n<r.length;++n)if(t[n].name!==r[n])throw new Error(`corrupted migrations: expected previously executed migration ${r[n]} to be at index ${n} but ${t[n].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#w(t,r,n){let i=[];for(let s=r.currentIndex;s>n;--s)i.push({migrationName:r.migrations[s].name,direction:"Down",status:"NotExecuted"});for(let s=0;s<i.length;++s){let o=r.migrations.find(a=>a.name===i[s].migrationName);try{o.down&&(await o.down(t),await t.withPlugin(this.#s).deleteFrom(this.#n).where("name","=",o.name).execute(),i[s]={migrationName:o.name,direction:"Down",status:"Success"})}catch(a){throw i[s]={migrationName:o.name,direction:"Down",status:"Error"},new $o({error:a,results:i})}}return{results:i}}async#E(t,r,n){let i=[];for(let s=r.currentIndex+1;s<=n;++s)i.push({migrationName:r.migrations[s].name,direction:"Up",status:"NotExecuted"});for(let s=0;s<i.length;++s){let o=r.migrations.find(a=>a.name===i[s].migrationName);try{await o.up(t),await t.withPlugin(this.#s).insertInto(this.#n).values({name:o.name,timestamp:new Date().toISOString()}).execute(),i[s]={migrationName:o.name,direction:"Up",status:"Success"}}catch(a){throw i[s]={migrationName:o.name,direction:"Up",status:"Error"},new $o({error:a,results:i})}}return{results:i}}},$o=class extends Error{#e;constructor(t){super(),this.#e=t}get resultSet(){return this.#e}};var Bq=/"/g,td=class extends ds{sanitizeIdentifier(t){return t.replace(Bq,'""')}};var $q=BigInt("3853314791062309107"),rd=class extends us{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(t){await Qe`select pg_advisory_xact_lock(${Qe.lit($q)})`.execute(t)}async releaseMigrationLock(){}};var Hq=/`/g,nd=class extends ds{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(t){return t.replace(Hq,"``")}};var id=class{#e;constructor(t){this.#e=t}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(t={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",i=>i.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",Qe`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();t.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Ho).where("columns.TABLE_NAME","!=",ls));let n=await r.execute();return this.#t(n)}async getMetadata(t){return{tables:await this.getTables(t)}}#t(t){return t.reduce((r,n)=>{let i=r.find(s=>s.name===n.TABLE_NAME);return i||(i=c({name:n.TABLE_NAME,isView:n.TABLE_TYPE==="VIEW",schema:n.TABLE_SCHEMA,columns:[]}),r.push(i)),i.columns.push(c({name:n.COLUMN_NAME,dataType:n.DATA_TYPE,isNullable:n.IS_NULLABLE==="YES",isAutoIncrementing:n.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:n.COLUMN_DEFAULT!==null})),r},[])}};var dS="ea586330-2c93-47c8-908d-981d9d270f9d",Gq=60*60,sd=class extends us{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(t){await Qe`select get_lock(${Qe.lit(dS)}, ${Qe.lit(Gq)})`.execute(t)}async releaseMigrationLock(t){await Qe`select release_lock(${Qe.lit(dS)})`.execute(t)}};var od=class{#e;constructor(t){this.#e=t}async init(){}async acquireConnection(){return new Ah(this.#e)}async beginTransaction(t){await t.beginTransaction()}async commitTransaction(t){await t.commitTransaction()}async rollbackTransaction(t){await t.rollbackTransaction()}async releaseConnection(t){}async destroy(){}},Ah=class{#e;#t;constructor(t){this.#e=t}async beginTransaction(){let t=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=t.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(t){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:t.sql,parameters:t.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let s=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:s,numUpdatedOrDeletedRows:s,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(s=>s.length!==0).map(s=>Object.fromEntries(s.map((o,a)=>[r.columnMetadata[a].label||r.columnMetadata[a].name,o.isNull?null:o.stringValue??o.doubleValue??o.longValue??o.booleanValue??this.#r(o.arrayValue)??o.blobValue??null])))||[]}}async*streamQuery(t,r){throw new Error("Data API does not support streaming")}#r(t){if(t)return t.stringValues??t.doubleValues??t.longValues??t.booleanValues??t.arrayValues?.map(this.#r)}};var ad=class extends td{appendValue(t){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...uS(t)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}},cd=class extends nd{appendValue(t){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...uS(t)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};function uS(e){switch(typeof e){case"bigint":return{value:{doubleValue:Number(e)}};case"boolean":return{value:{booleanValue:e}};case"number":return Number.isInteger(e)?{value:{longValue:e}}:{value:{doubleValue:e}};case"object":if(e==null)return{value:{isNull:!0}};if(Buffer.isBuffer(e))return{value:{blobValue:e}};if(e instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:lS(e.toISOString())}};if(e?.value&&Kq(e.value))return e.typeHint&&e.value.stringValue&&typeof e.value.stringValue=="string"&&(e.value.stringValue=Jq(e.typeHint,e.value.stringValue)),e;break;case"string":return{value:{stringValue:e}}}throw new Ch("Could not serialize value")}function Jq(e,t){switch(e){case"DATE":return Th(t).slice(0,10);case"TIME":return t.match(/^\d{4}-\d{2}-\d{2}/)?Th(t).slice(11,23):Qq(t);case"TIMESTAMP":return lS(Th(t))}return t}function Qq(e){let t=(e||"00:00:00").split(":");for(;t.length<3;)t.push("00");return t.join(":").slice(0,12)}function lS(e){return e.replace("T"," ").slice(0,23)}function Th(e){return new Date(Date.parse(e)).toISOString()}function Kq(e){for(let t of Xq)if(e[t])return!0;if(e.arrayValue){for(let t of Yq)if(e.arrayValue?.[t])return!0}return!1}var Ch=class e extends Error{constructor(t){super(t),this.name=e.name}},Yq=["booleanValues","doubleValues","longValues","stringValues"],Xq=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var dd=class{#e;constructor(t){this.#e=t}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(t={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(Qe`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",Qe`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(i=>i.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();t.withInternalKyselyTables||(r=r.where("c.relname","!=",Ho).where("c.relname","!=",ls));let n=await r.execute();return this.#t(n)}async getMetadata(t){return{tables:await this.getTables(t)}}#t(t){return t.reduce((r,n)=>{let i=r.find(s=>s.name===n.table&&s.schema===n.schema);return i||(i=Object.freeze({name:n.table,isView:n.table_type==="v",schema:n.schema,columns:[]}),r.push(i)),i.columns.push(Object.freeze({name:n.column,dataType:n.type,dataTypeSchema:n.type_schema,isNullable:!n.not_null,isAutoIncrementing:!!n.auto_incrementing,hasDefaultValue:n.has_default})),r},[])}};var ud=class{#e;constructor(t){this.#e=t}createAdapter(){if(this.#e.mode==="postgres")return new rd;if(this.#e.mode==="mysql")return new sd;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new od(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new ad;if(this.#e.mode==="mysql")return new cd;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(t){if(this.#e.mode==="postgres")return new dd(t);if(this.#e.mode==="mysql")return new id(t);throw new Error("Unknown mode "+this.#e.mode)}};var iq=pq(nq(),1);import v8 from"url";async function S_e(e){console.log("initializing db");let t=new cs({dialect:new ud({mode:process.env.RDS_ENGINE_MODE,driver:{client:new iq.RDSData({}),database:e?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new ed({db:t,provider:new fv(E8.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",e),!e.type||e.type==="latest"){console.log("migrating to latest");let n=await r.migrateToLatest(),i=n.error||n.results?.find(s=>s.status==="Error");if(i)throw i;return n}if(e.type==="to"){if(console.log("migrating to",e.data.name),!e.data.name)return await r.migrateTo(xh);let n=await r.migrateTo(e.data.name),i=n.error||n.results?.find(s=>s.status==="Error");if(i)throw i;return n}if(e.type==="list")return console.log("listing migrations"),await r.getMigrations()}var fv=class{#e;constructor(t){this.#e=t}async getMigrations(){let t=await import("fs/promises"),r=await import("path"),n={},i=await t.readdir(this.#e);for(let s of i)if(s.endsWith(".js")||s.endsWith(".cjs")||s.endsWith(".mjs")){let[o]=r.basename(s).split("."),a=r.join(this.#e,s);if(process.env.LAMBDA_TASK_ROOT){let l=await import(a);n[o]=l;continue}let u=a.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await t.copyFile(a,u);let l=await import(v8.pathToFileURL(u).href);n[o]=l}catch(l){console.error(l)}await t.rm(u)}return n}};export{S_e as handler};
